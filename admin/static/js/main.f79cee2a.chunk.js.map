{"version":3,"sources":["Components/ColorPicker/transformers.js","Components/ColorPicker/components/PickerDialog.js","Components/ColorPicker/components/ColorPicker.js","Components/ColorPicker/index.js","Components/Fields.js","Components/Line.js","Components/Mark.js","Components/DefaultPreset.js","Components/PresetTabs.js","SettingsEditor.js","Components/ChartSettings.js","Components/ChartFrame.js","MainChart.js","App.js","utils/getUrlQuery.js","serviceWorker.js","index.js"],"names":["converters","rgba","c","rgb","r","g","b","a","hex","rgba_rgb","rgba_hex","PickerDialog","value","onClick","onChange","className","style","position","zIndex","top","right","bottom","left","color","ColorPicker","convert","name","id","hintText","placeholder","floatingLabelText","label","TextFieldProps","showPicker","setShowPicker","internalValue","setValue","pickerClassName","custom","TextField","e","target","InputProps","undefined","newValue","defaultProps","MakedColorPicker","compose","withState","defaultValue","makeColorPicker","styles","theme","fieldContainer","paddingTop","whiteSpace","checkBoxLabel","fontSize","objectContainer","display","objectField","flex","objectButton","marginTop","paddingLeft","colorPicker","sliderContainer","sliderLabel","sliderRoot","paddingBottom","spacing","IOSelect","props","I18n","t","clsx","classes","FormControl","minWidth","width","InputLabel","shrink","Select","colors","formData","updateValue","renderValue","displayEmpty","options","Object","keys","map","key","MenuItem","noTranslate","withStyles","IOCheckbox","FormControlLabel","control","Checkbox","checked","IOTextField","InputLabelProps","inputProps","min","max","type","startAdornment","helperLink","IconButton","size","window","open","endAdornment","IODateTimeField","date","split","IOObjectField","useState","state","setState","fullWidth","showDialog","socket","dialogName","customFilter","title","selected","onOk","onClose","IOColorPicker","variant","backgroundColor","IOSlider","Typography","Slider","root","parseFloat","step","marks","valueLabelDisplay","WIDTHS","instance","chartType","dataType","buttons","Line","updateField","line","JSON","parse","stringify","getObject","then","obj","common","Utils","getObjectNameFromObj","language","getLanguage","_name","length","unit","catch","console","error","updateLine","index","idWidth","visible","windowWidth","this","padding","lineClosed","provided","dragHandleProps","lineOpenToggle","result","instances","forEach","_id","replace","shortInstanceField","shortIdField","auto","scatterplot","steps","spline","shortChartTypeField","minmax","average","total","onchange","shortDataTypeField","renderColorField","shortColorField","shortNameField","deleteButton","aria-label","deleteLine","onUpdate","noPadding","textColor","isUseBright","onSelectColor","getColor","stopPropagation","xAxisOptions","i","maxLines","ownYAxis","commonYAxis","deleteButtonFull","shortFields","points","off","leftColor","rightColor","Card","card","background","snapshot","isDragging","palette","secondary","light","CardContent","cardContent","opened","renderOpenedLine","renderClosedLine","React","Component","borderStyle","borderWidth","marginBottom","borderColor","grey","overflow","margin","paddingRight","borderBottom","opacity","lineHeight","marginLeft","marginRight","shortFieldsLast","LINE_HEIGHT","verticalAlign","shortButtonsField","float","lineId","upperValueOrId","lowerValueOrId","fill","text","Mark","mark","updateMark","lines","lineClosedContainer","markOpenToggle","shortLineIdField","shortUpperValueOrIdField","shortLowerValueOrIdField","shortFillField","shortTextField","deleteMark","presetData","renderOpenedCard","flexFlow","flexDirection","height","DEFAULT_PRESET","timeType","relativeEnd","range","aggregateType","aggregateSpan","legend","hoverDetail","zoom","animation","live","ticks","noBorder","window_bg","bg_custom","x_labels_color","y_labels_color","border_color","grid_color","grid_hideX","grid_hideY","border_width","barColor","barLabels","barWidth","barFontSize","barFontColor","titlePos","titleColor","titleSize","legColumns","legBgOpacity","legBg","timeFormat","export","getDefaultLine","systemSettings","isBoolean","defaultHistory","thickness","aggregate","symbolSize","yaxe","yticks","getDefaultPreset","preset","useComma","isFloatComma","dateFormat","push","PREDEFINED_COLORS_MARKS","PresetTabs","linesOpened","localStorage","setItem","marksOpened","time","markData","lineData","addMark","len","expandAllLines","collapseAllLines","expandAllMarks","collapseAllMarks","splice","addLine","DefaultPreset","systemConfig","xaxe","selectedTab","getItem","deleteLineDialog","deleteMarkDialog","showColorDialog","colorDialogValue","colorPickerCb","Dialog","DialogTitle","DialogActions","alignRight","buttonsContainer","Button","cb","anyClosed","find","l","anyOpened","droppableId","droppableProps","ref","innerRef","isDraggingOver","dark","minHeight","TabPanel","tabContent","Fab","buttonAdd","buttonExpandAll","buttonCollapseAll","draggableId","draggableProps","draggableStyle","userSelect","showColorPicker","noContent","dragHint","group","timeFormatCustom","Grid","item","sm","xs","TabContext","AppBar","tabsContainer","buttonSave","visibility","selectedPresetChanged","savePreset","selectedPresetId","TabList","event","scrollButtons","Tab","tabsBody","renderTabLines","renderTabMarkings","renderTabTime","renderTabOptions","renderTabTitle","renderTabAppearance","renderDeleteLineDialog","renderDeleteMarkDialog","renderColorDialog","overflowY","fontStyle","SettingsEditor","logBox","logBoxInner","toolbox","boxShadow","iconButtons","layoutIcon","borderRadius","IconAggregate","viewBox","xmlns","stroke","strokeWidth","d","transform","RefreshSelect","rangeOptions","relativeEndOptions","liveOptions","CHART_TYPES","AGGREGATES","ChartSettings","timeSpanOpened","aggregateOpened","refreshOpened","Toolbar","mainDiv","settingsButton","start","start_time","end","end_time","Popover","popOver","anchorEl","document","getElementById","anchorOrigin","vertical","horizontal","transformOrigin","fieldsContainer","aggregateIcon","refreshSelect","refreshSelectButtonTitle","grow1","hintButton","createPreset","selectedChartInstance","selectedChartId","buttonIcon","textTransform","flexGrow","ChartFrame","location","port","parts","src","includes","decodeURIComponent","Paper","iframe","join","darkBackground","border","primary","main","MainChart","presetMode","enablePresetMode","url","encodeURIComponent","search","getUrlParameters","height100","heightWithoutToolbar","getUrl","container","renderToolbar","getChartFrame","toolbar","mixins","toolbarButtons","editorDiv","textButton","tabIcon","hintIcon","tabMenuButton","tabChanged","tabText","maxWidth","textOverflow","tabChangedIcon","closeButton","cursor","notRunning","tabButton","tabButtonWrapper","menuIcon","FORBIDDEN_CHARS","getFolderPrefix","presetId","shift","pop","sortObj","aid","bid","App","settings","query","val","getUrlQuery","parseInt","host","hostname","translations","require","addPresetToFolderPrefix","folderPrefix","noRefresh","oldId","adapterName","delObject","log","setObject","refreshData","showError","deletePreset","toggleChartFolder","chartFolders","newState","enabledDP","openedChartFolder","k","hasOwnProperty","openedChart","values","loadChart","renderTreePreset","level","anySubFolders","presets","ListItem","gutters","noGutters","button","loadPresetDialog","loadPreset","ListItemIcon","itemIconRoot","itemIconPreset","itemIcon","ListItemText","listItemTitle","listItemSubTitle","ListItemSecondaryAction","changingPreset","CircularProgress","renameDialog","renamePresetDialogTitle","moveDialog","newFolder","deleteDialog","native","data","loadedPresetData","onUpdatePreset","onDragEnd","source","destination","stateId","newLine","removed","objects","chartsOpened","ready","folders","addFolderDialog","addFolderDialogTitle","editFolderDialog","editFolderDialogTitle","showSearch","selectedPresetData","progress","resizing","menuOpened","menuSelectId","logHorzLayout","confirm","searchText","settingsSize","menuSize","getSystemConfig","Promise","resolve","getAllData","reject","_socket","emit","startkey","endkey","err","res","rows","buildTree","getData","presetObj","ids","setTimeout","getObjects","objs","substring","_instances","insts","sort","getAdapterInstances","filter","entry","getHistory","enabled","getAllCustoms","subFolders","prefix","currentFolder","parent","folder","findFolder","parentFolder","_parentFolder","newName","newSelectedId","pos","indexOf","promises","all","isNameUnique","parentId","historyInstance","trim","template","getNewPresetName","gIndex","isDropDisabled","List","scroll","Fragment","width100","folderItem","itemIconFolder","showAddStateDialog","isDragDisabled","LEVEL_PADDING","loadChartDialog","loadChartDialogInstance","closeFolderDialog","folderIconPreset","toggleFolder","editFolderDialogTitleOrigin","subFolder","renderTree","list","leftMenuItem","newTitle","newId","loadChartParam","noedit","mainToolbar","textInput","DialogContent","p","onKeyPress","which","addFolder","disabled","autoFocus","isUnique","renameFolder","isIdUnique","getFolderList","concat","renamePreset","savePresetDialog","content","menuOpenCloseButton","primaryMinSize","secondaryInitialSize","onDragStart","onSecondaryPaneSizeChange","toString","themeType","innerWidth","verticalLayout","onLayoutChange","toggleLogLayout","connection","mainListDiv","renderListToolbar","heightMinusToolbar","renderSimpleHistory","showToast","inst","primaryIndex","secondaryMinSize","customClassName","splitterDivs","menuDivWithoutMenu","renderLeftList","renderMain","renderAddFolderDialog","renderRenameFolderDialog","renderDeleteDialog","renderMoveDialog","renderRenameDialog","renderLoadChartDialog","renderLoadPresetDialog","renderError","renderToast","renderSavePresetDialog","renderCloseFolderDialog","renderSelectIdDialog","GenericApp","withWidth","default","fontFamily","menuDiv","withTheme","Boolean","match","themeName","getThemeName","version","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","render","onThemeChange","_theme","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.f79cee2a.chunk.js","sourcesContent":["export const DEFAULT_CONVERTER = 'rgba_hex';\r\nexport const converters = {\r\n  rgba: c => `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`,\r\n  rgb: c => `rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})`,\r\n  hex: c => c.hex,\r\n\r\n  rgba_rgb: c => c.rgb.a === 1 ? converters.rgb(c) : converters.rgba(c),\r\n  rgba_hex: c => c.rgb.a === 1 ? converters.hex(c) : converters.rgba(c)\r\n};\r\n\r\nexport default converters;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ChromePicker } from 'react-color'\r\n\r\nconst PickerDialog = ({\r\n  value,\r\n  onClick,\r\n  onChange,\r\n  className\r\n}) => (\r\n  <div style={{ position: 'relative' }}>\r\n    <div style={{ position: 'absolute', zIndex: '2' }}>\r\n      <div\r\n        style={{ position: 'fixed', top: '0px', right: '0px', bottom: '0px', left: '0px' }}\r\n        onClick={onClick}\r\n      />\r\n      <ChromePicker\r\n        color={value}\r\n        onChange={onChange}\r\n        className={className}\r\n      />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nPickerDialog.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  className: PropTypes.any\r\n};\r\n\r\nexport default PickerDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport compose from 'recompose/compose'\r\nimport withState from 'recompose/withState'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport { DEFAULT_CONVERTER, converters } from '../transformers'\r\nimport PickerDialog from './PickerDialog'\r\n\r\nconst ColorPicker = ({\r\n  // ColorPicker\r\n  onChange,\r\n  convert,\r\n\r\n  // Text field\r\n  name,\r\n  id,\r\n  hintText,\r\n  placeholder,\r\n  floatingLabelText,\r\n  label,\r\n  TextFieldProps,\r\n  value,\r\n\r\n  // State\r\n  showPicker,\r\n  setShowPicker,\r\n  internalValue,\r\n  setValue,\r\n  pickerClassName,\r\n\r\n  ...custom\r\n}) => (\r\n  <>\r\n    <TextField\r\n      name={name}\r\n      id={id}\r\n      label={floatingLabelText || label}\r\n      placeholder={hintText || placeholder}\r\n      onClick={() => setShowPicker(true)}\r\n      onChange={e => {\r\n        setValue(e.target.value);\r\n        onChange(e.target.value)\r\n      }}\r\n      InputProps={{ style: { color: value === undefined ? internalValue : value } }}\r\n      {...TextFieldProps}\r\n      {...custom}\r\n    />\r\n    {showPicker && (\r\n      <PickerDialog\r\n        value={value === undefined ? internalValue : value}\r\n        onClick={() => {\r\n          setShowPicker(false);\r\n          onChange(value)\r\n        }}\r\n        onChange={c => {\r\n          const newValue = converters[convert](c);\r\n          setValue(newValue);\r\n          onChange(newValue)\r\n        }}\r\n        className={pickerClassName}\r\n      />\r\n    )}\r\n  </>\r\n);\r\n\r\nColorPicker.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  convert: PropTypes.oneOf(Object.keys(converters)),\r\n  name: PropTypes.string,\r\n  id: PropTypes.string,\r\n  hintText: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  label: PropTypes.string,\r\n  floatingLabelText: PropTypes.string,\r\n  TextFieldProps: PropTypes.shape(TextField.propTypes),\r\n  showPicker: PropTypes.bool,\r\n  setShowPicker: PropTypes.func,\r\n  internalValue: PropTypes.string,\r\n  setValue: PropTypes.func,\r\n  pickerClassName: PropTypes.any\r\n};\r\n\r\nColorPicker.defaultProps = {\r\n  convert: DEFAULT_CONVERTER\r\n};\r\n\r\nconst makeColorPicker = compose(\r\n  withState('showPicker', 'setShowPicker', false),\r\n  withState('internalValue', 'setValue', ({ defaultValue }) => defaultValue)\r\n);\r\n\r\nconst MakedColorPicker = makeColorPicker(ColorPicker);\r\n\r\nconst ColorPickerField = ({ input: { value, onChange, ...restInput }, meta: { touched, error }, ...restProps }) => (\r\n  <MakedColorPicker\r\n    value={value}\r\n    onChange={onChange}\r\n    errorText={touched && error}\r\n    {...restInput}\r\n    {...restProps}\r\n  />\r\n);\r\n\r\nColorPickerField.propTypes = {\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n};\r\n\r\nexport default MakedColorPicker\r\n\r\nexport {\r\n  ColorPickerField\r\n}\r\n","import ColorPicker from './components/ColorPicker'\r\nexport default ColorPicker\r\n","import React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport IconSelectID from '@material-ui/icons/Subject';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport ColorPicker from './ColorPicker';\r\nimport ClearIcon from \"@material-ui/icons/Close\";\r\nimport HelpIcon from \"@material-ui/icons/Help\";\r\n\r\nconst styles = theme => ({\r\n    fieldContainer: {\r\n        paddingTop: 10,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    checkBoxLabel: {\r\n        fontSize: '0.8rem'\r\n    },\r\n    objectContainer: {display: 'flex'},\r\n    objectField: {flex: 1},\r\n    objectButton: {\r\n        marginTop: 'auto',\r\n        paddingLeft: 0\r\n    },\r\n    colorPicker: {\r\n        left: -200,\r\n        top: 60,\r\n        position: 'relative'\r\n    },\r\n    sliderContainer: {\r\n        position: 'relative',\r\n        //height: theme.spacing(3),\r\n    },\r\n    sliderLabel: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        fontSize: 'small'\r\n    },\r\n    sliderRoot: {\r\n        paddingBottom: 0,\r\n        paddingTop: theme.spacing(2),\r\n    }\r\n});\r\n\r\nlet IOSelect = function (props) {\r\n    const label = I18n.t(props.label);\r\n    return <div className={clsx(props.classes.fieldContainer, props.className)}>\r\n        <FormControl style={{minWidth: props.minWidth || 200, width: props.width}}>\r\n            <InputLabel shrink={true}>{ label }</InputLabel>\r\n            <Select\r\n                label={label}\r\n                style={{color: props.colors ? props.colors[props.formData[props.name]] || undefined : undefined}}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n                value={props.formData[props.name] || ''}\r\n                renderValue={props.renderValue}\r\n                displayEmpty\r\n            >{\r\n                props.options ?\r\n                    Object.keys(props.options).map(key =>\r\n                        <MenuItem key={key} value={key} style={{color: props.colors ? props.colors[key] || undefined : undefined}}>{\r\n                            props.noTranslate ? props.options[key] : (props.options[key] !== '' && props.options[key] !== null && props.options[key] !== undefined? I18n.t(props.options[key]) : '')\r\n                        }</MenuItem>)\r\n                     : null\r\n            }\r\n            </Select>\r\n        </FormControl>\r\n    </div>;\r\n};\r\nIOSelect.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    options: PropTypes.object,\r\n    colors: PropTypes.object,\r\n};\r\nIOSelect = withStyles(styles)(IOSelect);\r\nexport {IOSelect};\r\n\r\nlet IOCheckbox = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <FormControlLabel style={{paddingTop: 10}} label={<span className={props.classes.checkBoxLabel}>{I18n.t(props.label)}</span>} control={\r\n            <Checkbox onChange={e => {\r\n                props.updateValue(props.name, e.target.checked)\r\n            }} checked={props.formData[props.name] || false}/>\r\n        }/>\r\n    </div>;\r\n};\r\nIOCheckbox.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOCheckbox = withStyles(styles)(IOCheckbox);\r\nexport {IOCheckbox};\r\n\r\nlet IOTextField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField\r\n            style={{width: props.formData[props.name] ? (props.width ? props.width - 30 : 'calc(100% - 30px)') : (props.width || '100%')}}\r\n            label={I18n.t(props.label)}\r\n            InputLabelProps={{shrink: true}}\r\n            inputProps={{min: props.min, max: props.max}}\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            type={props.type}\r\n            InputProps={{\r\n                startAdornment: props.helperLink ? <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => window.open(props.helperLink,'_blank')}>\r\n                    <HelpIcon />\r\n                </IconButton> : undefined,\r\n\r\n                endAdornment: props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n        />\r\n    </div>;\r\n};\r\nIOTextField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    type: PropTypes.string,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    helperLink: PropTypes.string,\r\n    width: PropTypes.number,\r\n};\r\nIOTextField = withStyles(styles)(IOTextField);\r\nexport {IOTextField};\r\n\r\nlet IODateTimeField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField type=\"datetime-local\" label={I18n.t(props.label)} InputLabelProps={{shrink: true}} onChange={e => {\r\n            let date = e.target.value.split('T');\r\n            props.updateValue(props.name, date[0], date[1]);\r\n        }} value={props.formData[props.name] ? props.formData[props.name] + 'T' + props.formData[props.name + '_time'] : ''}/>\r\n    </div>;\r\n};\r\nIODateTimeField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIODateTimeField = withStyles(styles)(IODateTimeField);\r\nexport {IODateTimeField};\r\n\r\nlet IOObjectField = function (props) {\r\n    let [state, setState] = useState({});\r\n\r\n    return <div className={props.classes.fieldContainer} style={{width: props.width}}>\r\n        <div className={props.classes.objectContainer}>\r\n            <TextField\r\n                className={props.classes.objectField}\r\n                label={I18n.t(props.label)}\r\n                fullWidth={true}\r\n                InputLabelProps={{shrink: true}}\r\n                value={props.formData[props.name] || ''}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n            />\r\n            <IconButton size=\"small\" onClick={() => setState({showDialog: true})} className={props.classes.objectButton}>\r\n                <IconSelectID/>\r\n            </IconButton>\r\n        </div>\r\n        {state.showDialog ? <DialogSelectID\r\n                key={'selectDialog_' + props.name}\r\n                socket={ props.socket }\r\n                dialogName={props.name}\r\n                customFilter={props.customFilter}\r\n                title={ I18n.t('Select for ') + props.label}\r\n                selected={ props.formData[props.name] }\r\n                onOk={e => {\r\n                    props.updateValue(props.name, e);\r\n                    setState({showDialog: false});\r\n                } }\r\n                onClose={ () => setState({showDialog: false}) }\r\n            /> : null\r\n        }\r\n    </div>;\r\n};\r\nIOObjectField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    customFilter: PropTypes.object,\r\n};\r\nIOObjectField = withStyles(styles)(IOObjectField);\r\nexport {IOObjectField};\r\n\r\nlet IOColorPicker = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <ColorPicker\r\n            variant=\"standard\"\r\n            label={I18n.t(props.label)}\r\n            pickerClassName={props.classes.colorPicker}\r\n            inputProps={{\r\n                style: {backgroundColor: props.formData[props.name]}\r\n            }}\r\n            InputProps={{\r\n                endAdornment: props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n            onChange={color => props.updateValue(props.name, color)}\r\n            InputLabelProps={{shrink: true}}\r\n            value={props.formData[props.name] || ''}\r\n        />\r\n    </div>;\r\n};\r\nIOColorPicker.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOColorPicker = withStyles(styles)(IOColorPicker);\r\nexport {IOColorPicker};\r\n\r\nlet IOSlider = function (props) {\r\n    return <div className={clsx(props.classes.fieldContainer, props.classes.sliderContainer)}>\r\n        <Typography className={props.classes.sliderLabel}>{props.label}</Typography>\r\n        <Slider\r\n            classes={{root: props.classes.sliderRoot}}\r\n            value={parseFloat(props.formData[props.name] || props.min || 0) || 0}\r\n            //getAriaValueText={(props.formData[props.name] || '').toString()}\r\n            step={parseFloat(props.step || (((props.max || 1) - (props.min || 0)) / 10)) || 0.1}\r\n            marks\r\n            onChange={(e, value) => props.updateValue(props.name, value)}\r\n            min={parseFloat(props.min || 0)}\r\n            max={parseFloat(props.max || 1)}\r\n            valueLabelDisplay=\"auto\"\r\n        />\r\n    </div>;\r\n};\r\nIOSlider.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    step: PropTypes.number,\r\n    formData: PropTypes.object,\r\n};\r\nIOSlider = withStyles(styles)(IOSlider);\r\nexport {IOSlider};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdMenu as IconDrag} from 'react-icons/md';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/fa';\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IOObjectField, IOSlider} from './Fields';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nconst WIDTHS = {\r\n    instance: 100,\r\n    id: 200,\r\n    chartType: 120,\r\n    dataType: 110,\r\n    color: 100,\r\n    name: 200,\r\n    buttons: 50 + 50 + 16\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n        }\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: '0px',\r\n        paddingBottom: 0,\r\n    },\r\n    shortInstanceField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.instance,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortIdField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.id,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortDataTypeField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.dataType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n    },\r\n    shortChartTypeField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.chartType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.color,\r\n        width: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortNameField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.name,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    fullWidth: {\r\n        width: '100%',\r\n        minWidth: 200\r\n    }\r\n});\r\n\r\nclass Line extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            width: this.props.width\r\n        };\r\n    }\r\n    updateField = (name, value) => {\r\n        let line = JSON.parse(JSON.stringify(this.props.line));\r\n        line[name] = value;\r\n\r\n        if (name === 'id') {\r\n            // If ID changed => read unit and name\r\n            if (this.props.line.id !== value) {\r\n                return this.props.socket.getObject(value)\r\n                    .then(obj => {\r\n                        if (obj && obj.common && obj.common.name) {\r\n                            name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                        } else {\r\n                            let _name = value.split('.');\r\n                            name = _name.length ? _name[_name.length - 1] : '';\r\n                        }\r\n                        if (obj && obj.common && obj.common.unit) {\r\n                            line.unit = obj.common.unit;\r\n                        }\r\n                    })\r\n                    .catch(e => {\r\n                        console.error(e);\r\n                        let _name = value.split('.');\r\n                        name = _name.length ? _name[_name.length - 1] : '';\r\n                    })\r\n                    .then(() => {\r\n                        line.name = name;\r\n                        this.props.updateLine(this.props.index, line);\r\n                    });\r\n            }\r\n        }\r\n        this.props.updateLine(this.props.index, line);\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.width !== state.width) {\r\n            return {width: props.width};\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderClosedLine() {\r\n        const visible = {};\r\n\r\n        const windowWidth = this.props.width - 95;\r\n        const padding = 8;\r\n\r\n        let idWidth;\r\n        if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6) {\r\n            idWidth = `calc(100% - ${WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n            visible.name = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.buttons + padding * 5) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + padding * 5}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.buttons + padding * 4) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + padding * 4}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.buttons + padding * 3) {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + padding * 3}px)`;\r\n            visible.chartType = true;\r\n        } else {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + padding * 2}px)`;\r\n        }\r\n\r\n        return <div className={this.props.classes.lineClosed}>\r\n            {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n            <IconButton\r\n                title={ I18n.t('Edit') }\r\n                onClick={() => this.props.lineOpenToggle(this.props.index)}>\r\n                <IconFolderClosed/>\r\n            </IconButton>\r\n            <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"instance\"\r\n                label=\"Instance\"\r\n                noTranslate={true}\r\n                options={(() => {\r\n                    let result = {};\r\n                    this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                    return result;\r\n                })()}\r\n                minWidth={WIDTHS.instance}\r\n                classes={{fieldContainer: this.props.classes.shortInstanceField}}\r\n            />\r\n            <IOObjectField\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"id\"\r\n                width={idWidth}\r\n                label=\"ID\"\r\n                customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : true}}}\r\n                classes={{fieldContainer: this.props.classes.shortIdField}}\r\n                socket={this.props.socket}\r\n            />\r\n            {visible.chartType ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.chartType}\r\n                name=\"chartType\"\r\n                label=\"Chart type\"\r\n                options={{\r\n                    auto: 'Auto',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortChartTypeField}}\r\n            /> : null}\r\n            {visible.dataType ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.dataType}\r\n                name=\"aggregate\"\r\n                label=\"Type\"\r\n                options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortDataTypeField}}\r\n            /> : null}\r\n            {visible.color ? this.renderColorField(this.props.line, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField, true) : null}\r\n            {visible.name ? <IOTextField\r\n                width={WIDTHS.name}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"name\"\r\n                label=\"Name\"\r\n                classes={{fieldContainer: this.props.classes.shortNameField}}\r\n            /> : null}\r\n            <IconButton\r\n                className={this.props.classes.deleteButton}\r\n                aria-label=\"Delete\"\r\n                title={I18n.t('Delete')}\r\n                onClick={() => this.props.deleteLine(this.props.index)}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className, noPadding) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: noPadding ? 0 : 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderOpenedLine() {\r\n        const xAxisOptions = {\r\n            '': I18n.t('own axis')\r\n        };\r\n        for (let i = 0; i < this.props.maxLines; i++) {\r\n            if (i !== this.props.index) {\r\n                xAxisOptions[i] = I18n.t('From line %s', i + 1);\r\n            }\r\n        }\r\n        const ownYAxis = this.props.line.commonYAxis === '' || this.props.line.commonYAxis === undefined;\r\n        return <>\r\n            <div>\r\n                {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.lineOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Line')} {this.props.index + 1}{this.props.line.name ? ' - ' + this.props.line.name : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteLine(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"instance\" label=\"Instance\" noTranslate={true} options={\r\n                    (() => {\r\n                        let result = {};\r\n                        this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                        return result;\r\n                    })()\r\n                }/>\r\n                <IOObjectField\r\n                    formData={this.props.line}\r\n                    classes={{objectContainer: this.props.classes.fullWidth}}\r\n                    updateValue={this.updateField}\r\n                    name=\"id\"\r\n                    label=\"ID\"\r\n                    width={'calc(100% - 250px)'}\r\n                    customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : true}}}\r\n                    socket={this.props.socket}/>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Main')}</p>\r\n                {this.renderColorField(this.props.line, this.updateField, 'Color', 'color')}\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"aggregate\" label=\"Type\" options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"chartType\" label=\"Chart type\" options={{\r\n                    auto: 'Auto (Line or Steps)',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}/>\r\n                {this.props.line.chartType === 'scatterplot' ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> : null }\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Texts')}</p>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"name\" label=\"Name\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"unit\" label=\"Unit\" />\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Line and area')}</p>\r\n                <IOSlider formData={this.props.line} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\" />\r\n                <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"points\" label=\"Show points\"/>\r\n                {this.props.line.points && this.props.line.chartType !== 'scatterplot' ?\r\n                    <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> :\r\n                    null\r\n                }\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"thickness\" label=\"L - Line thickness\" min={1} type=\"number\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"shadowsize\" label=\"S - Shadow size\" min={0} type=\"number\"/>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Axis')}</p>\r\n                {!this.props.index ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"xaxe\" label=\"X Axis position\" options={{\r\n                    '': 'bottom',\r\n                    'top': 'top',\r\n                    'off': 'off',\r\n                    /*off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    topColor: 'top colored',\r\n                    bottomColor: 'bottom colored',*/\r\n                }}/> : null }\r\n                {!this.props.index ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"xticks\" label=\"X-Axis ticks\" type=\"number\"/> : null }\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"offset\" label=\"X-Offset\" options={{\r\n                    '0': '0 seconds',\r\n                    '10': '10 seconds',\r\n                    '30': '30 seconds',\r\n                    '60': '60 seconds',\r\n                    '120': '2 minutes',\r\n                    '180': '3 minutes',\r\n                    '240': '4 minutes',\r\n                    '300': '5 minutes',\r\n                    '600': '10 minutes',\r\n                    '900': '15 minutes',\r\n                    '1800': '30 minutes',\r\n                    '2700': '45 minutes',\r\n                    '3600': '1 hour',\r\n                    '7200': '2 hours',\r\n                    '21600': '6 hours',\r\n                    '43200': '12 hours',\r\n                    '86400': '1 day',\r\n                    '172800': '2 days',\r\n                    '259200': '3 days',\r\n                    '345600': '4 days',\r\n                    '604800': '1 week',\r\n                    '1209600': '2 weeks',\r\n                    '1m': '1 month',\r\n                    '2m': '2 months',\r\n                    '3m': '3 months',\r\n                    '6m': '6 months',\r\n                    '1y': '1 year',\r\n                    '2y': '2 years',\r\n                }}/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yOffset\" label=\"Y-Offset\" type=\"number\"/>\r\n\r\n                <br/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"commonYAxis\" label=\"Common Y Axis\" noTranslate={true} options={xAxisOptions}/>\r\n\r\n                {ownYAxis ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"yaxe\" label=\"Y Axis position\" options={{\r\n                    '': '',\r\n                    off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    leftColor: 'left colored',\r\n                    rightColor: 'right colored',\r\n                }}/> : null}\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"min\" label=\"Min\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"max\" label=\"Max\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yticks\" label=\"Y-Axis ticks\" type=\"number\"/> : null }\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Others')}</p>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"ignoreNull\" label=\"NULL as\" options={{\r\n                    'false': 'default',\r\n                    'true': 'ignore null values',\r\n                    '0': 'use 0 instead of null values',\r\n                }}/>\r\n                {/*<IOTextField formData={this.props.line} updateValue={this.updateField} name=\"smoothing\" label=\"Smoothing\" type=\"number\" min={0}/>*/}\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"afterComma\" label=\"Digits after comma\" type=\"number\" min={0}/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                    'solid': 'solid',\r\n                    'dashed': 'dashed',\r\n                    'dotted': 'dotted',\r\n                }}/>\r\n            </div>\r\n            {/*<div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                            <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"dashes\" label=\"Dashes\"/>\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"dashLength\" label=\"Dashes length\" min={1} type=\"number\"/> : null}\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"spaceLength\" label=\"Space length\" min={1} type=\"number\"/> : null}\r\n                        </div>*/}\r\n        </>\r\n    }\r\n\r\n    render() {\r\n        return <Card\r\n            className={this.props.classes.card}\r\n            style={{background: this.props.snapshot.isDragging ? this.props.theme.palette.secondary.light : undefined}}\r\n        >\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ? this.renderOpenedLine() : this.renderClosedLine()}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nLine.propTypes = {\r\n    line: PropTypes.object,\r\n    maxLines: PropTypes.number,\r\n    socket: PropTypes.object,\r\n    updateLine: PropTypes.func,\r\n    provided: PropTypes.object,\r\n    snapshot: PropTypes.object,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    lineOpenToggle: PropTypes.func,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    onSelectColor: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Line);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField, IOSelect, IOObjectField, IOSlider} from './Fields';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport ColorPicker from \"@iobroker/adapter-react/Components/ColorPicker\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport ClearIcon from \"@material-ui/icons/Close\";\r\nimport Utils from \"@iobroker/adapter-react/Components/Utils\";\r\n\r\nconst WIDTHS = {\r\n    lineId: 100,\r\n    upperValueOrId: 100,\r\n    lowerValueOrId: 100,\r\n    color: 100,\r\n    fill: 100,\r\n    text: 200,\r\n    buttons: 100\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n            paddingRight: 20\r\n        },\r\n        paddingRight: 20\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        },\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: 0,\r\n        paddingBottom: 0,\r\n        position: 'relaitve',\r\n    },\r\n    shortLineIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lineId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortUpperValueOrIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.upperValueOrId,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortLowerValueOrIdField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lowerValueOrId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortFillField: {\r\n        display: 'inline-flex',\r\n        width: WIDTHS.fill,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    sliderRoot: {\r\n        marginTop: 10,\r\n    },\r\n    shortTextField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.text,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    lineClosed: {\r\n        display: 'inline-flex',\r\n        flexFlow: 'column wrap',\r\n        overflow: 'hidden',\r\n        flexDirection: 'row',\r\n        flex: 1,\r\n        height: LINE_HEIGHT\r\n    },\r\n    lineClosedContainer: {\r\n        display: 'flex'\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 40,\r\n    },\r\n});\r\n\r\nclass Mark extends React.Component {\r\n    state = {\r\n        /*\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        */\r\n      };\r\n\r\n    updateField = (name, value) => {\r\n        const mark = JSON.parse(JSON.stringify(this.props.mark));\r\n        mark[name] = value;\r\n        this.props.updateMark(this.props.index, mark);\r\n    };\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderClosedLine(lines, colors) {\r\n        return <div className={this.props.classes.lineClosedContainer}>\r\n            <div className={this.props.classes.lineClosed}>\r\n                <IconButton\r\n                    title={ I18n.t('Edit') }\r\n                    onClick={() => this.props.markOpenToggle(this.props.index)}>\r\n                    <IconFolderClosed/>\r\n                </IconButton>\r\n                <IOSelect\r\n                    noTranslate={true}\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lineId\"\r\n                    label=\"Line ID\"\r\n                    options={lines}\r\n                    colors={colors}\r\n                    classes={{fieldContainer: this.props.classes.shortLineIdField}}\r\n                    minWidth={WIDTHS.lineId}\r\n                />\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"upperValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortUpperValueOrIdField}}\r\n                        minWidth={WIDTHS.upperValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"lowerValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortLowerValueOrIdField}}\r\n                        minWidth={WIDTHS.lowerValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    this.renderColorField(this.props.mark, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField) : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== ''  &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' &&\r\n                 this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== ''?\r\n                    <IOSlider\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        minWidth={WIDTHS.dataType}\r\n                        classes={{fieldContainer: this.props.classes.shortFillField, sliderRoot: this.props.classes.sliderRoot}}\r\n                        name=\"fill\"\r\n                        label=\"Fill (from 0 to 1)\"\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOTextField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"text\"\r\n                        label=\"Text\"\r\n                        classes={{fieldContainer: this.props.classes.shortTextField}}\r\n                        minWidth={WIDTHS.fill}\r\n                    /> : null}\r\n            </div>\r\n            <IconButton\r\n                style={{ marginLeft: 5 }} aria-label=\"Delete\" title={I18n.t('Delete')}\r\n                onClick={()=>{\r\n                    this.props.deleteMark(this.props.index);\r\n                }}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>\r\n    }\r\n\r\n    renderOpenedCard(lines, colors) {\r\n        return <>\r\n            <div>\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.markOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Mark')} {this.props.index + 1}{this.props.mark.text ? ' - ' + this.props.mark.text : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteMark(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Limits')}</p>\r\n                <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineId\" noTranslate={true} label=\"Line ID\" options={lines} colors={colors}/>\r\n\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"upperValueOrId\" label=\"Upper value or ID\" socket={this.props.socket} /> : null }\r\n\r\n                {this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"lowerValueOrId\" label=\"Lower value or ID\" socket={this.props.socket} /> : null }\r\n            </div>\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={this.props.classes.shortFields}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Style')}</p>\r\n                    {this.renderColorField(this.props.mark, this.updateField, 'Color', 'color')}\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"ol\" label=\"L Line thickness\" type=\"number\"/>\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"os\" label=\"S Shadow size\" type=\"number\"/>\r\n\r\n                    <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                        'solid': 'solid',\r\n                        'dashed': 'dashed',\r\n                        'dotted': 'dotted',\r\n                    }}/>\r\n\r\n                    {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') &&\r\n                    (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                        <IOSlider formData={this.props.mark} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\"/> : null}\r\n                </div> : null}\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Label')}</p>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"text\" label=\"Text\"/>\r\n                    {this.props.mark.text ?\r\n                        <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"textPosition\" label=\"Text position\" options={{\r\n                            'l': 'Left',\r\n                            'r': 'Right',\r\n                        }}/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textOffset\" label=\"Text offset\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textSize\" label=\"Text size\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? this.renderColorField(this.props.mark, this.updateField, 'Text color', 'textColor') : null}\r\n                </div> : null }\r\n        </>;\r\n    }\r\n\r\n    render() {\r\n        let lines = {};\r\n        let colors = {};\r\n        this.props.presetData.lines.forEach((line, index) => {\r\n            lines[index] = index + ' - ' + (line.id || I18n.t('No ID yet'));\r\n            colors[index] = line.color;\r\n        });\r\n        return <Card className={this.props.classes.card}>\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ? this.renderOpenedCard(lines, colors) : this.renderClosedLine(lines, colors)}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nMark.propTypes = {\r\n    mark: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    updateMark: PropTypes.func,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    markOpenToggle: PropTypes.func,\r\n    onSelectColor: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Mark);","import Utils from \"@iobroker/adapter-react/Components/Utils\";\r\n\r\nconst DEFAULT_PRESET = {\r\n    lines:[\r\n        /*\r\n        {\r\n            'id':'system.adapter.admin.0.cpu',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#FF0000',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'name':'Line 1',\r\n            'xaxe':'off',\r\n            'ignoreNull':'false',\r\n            'afterComma':'2',\r\n            'dashes':'true',\r\n            'dashLength':'10',\r\n            'spaceLength':'10',\r\n            'min':'-0.1',\r\n            'max':'1',\r\n            'points':'true',\r\n            'fill':'4',\r\n            'unit':'2',\r\n            'yaxe':'left',\r\n            'yOffset':'1',\r\n            'xticks':'2',\r\n            'yticks':'3',\r\n            'smoothing':'4'\r\n        },\r\n        {\r\n            'id':'system.adapter.admin.0.memHeapTotal',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#00FF00',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'min':'-0.1',\r\n            'points':'false'\r\n        },\r\n        {\r\n            'id':'system.adapter.admin.0.memRss',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#0000FF',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'xaxe':'off',\r\n            'min':'-0.1'\r\n        }\r\n        */\r\n    ],\r\n    marks: [\r\n        /*\r\n        {\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        }\r\n        */\r\n    ],\r\n    timeType: 'relative',\r\n    relativeEnd: '30minutes',\r\n    range: '120',\r\n    aggregateType: 'count',\r\n    aggregateSpan: 300,\r\n    legend: 'ne',\r\n    hoverDetail: true,\r\n    zoom: true,\r\n    animation: 0,\r\n    live: '15',\r\n    ticks: '',\r\n    width: '100%',\r\n    height: '100%',\r\n    noBorder: 'noborder',\r\n    window_bg: '',\r\n    bg_custom: '',\r\n    x_labels_color: '',\r\n    y_labels_color: '',\r\n    border_color: '',\r\n    grid_color: '',\r\n    grid_hideX: false,\r\n    grid_hideY: false,\r\n    border_width: '',\r\n    barColor: '',\r\n    barLabels: 'topover',\r\n    barWidth: '',\r\n    barFontSize: '',\r\n    barFontColor: '',\r\n    title: '',\r\n    titlePos: '',\r\n    titleColor: '',\r\n    titleSize: '',\r\n    legColumns: '',\r\n    legBgOpacity: '',\r\n    legBg: '',\r\n    timeFormat: '',\r\n    export: true,\r\n};\r\n\r\nfunction getDefaultLine(systemSettings, instance, obj, language) {\r\n    const isBoolean = obj && obj.common && obj.common.type === 'boolean';\r\n    const line = {\r\n        name:       (obj && obj.common && obj.common.name && Utils.getObjectNameFromObj(obj, null, {language})) || '',\r\n        id:         obj ? obj._id : '',\r\n        instance:   instance || systemSettings.common.defaultHistory,\r\n        thickness:  2,\r\n        chartType:  isBoolean ? 'steps' : 'line',\r\n        aggregate:  isBoolean ? 'onchange' : 'minmax',\r\n        symbolSize: 3,\r\n    };\r\n    if (obj && obj.common && obj.common.color) {\r\n        line.color = obj.common.color;\r\n    }\r\n    if (obj && obj.common && obj.common.unit) {\r\n        line.unit = obj.common.unit;\r\n    }\r\n    if (isBoolean) {\r\n        line.yaxe = 'off';\r\n        line.min = '0';\r\n        line.yticks = 1;\r\n        line.fill = 0.3;\r\n        line.symbolSize = 1;\r\n    }\r\n\r\n    return line;\r\n}\r\n\r\nfunction getDefaultPreset(systemSettings, instance, obj, language) {\r\n    const preset = JSON.parse(JSON.stringify(DEFAULT_PRESET));\r\n\r\n    preset.useComma = systemSettings.common.isFloatComma || false;\r\n\r\n    if (systemSettings.common.dateFormat) {\r\n        //preset.timeFormat = 'HH:mm:ss ' + systemSettings.common.dateFormat;\r\n    }\r\n\r\n    preset.lines.push(getDefaultLine(systemSettings, instance, obj, language));\r\n\r\n    return preset;\r\n}\r\nexport default {\r\n    getDefaultPreset,\r\n    getDefaultLine\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { ChromePicker } from 'react-color'\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TabList from '@material-ui/lab/TabList';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport TabPanel from '@material-ui/lab/TabPanel';\r\nimport TabContext from '@material-ui/lab/TabContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IODateTimeField} from './Fields';\r\nimport Line from './Line';\r\nimport Mark from './Mark';\r\nimport DefaultPreset from './DefaultPreset';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nconst styles = theme => ({\r\n    tabsBody: {\r\n        overflowY: 'auto',\r\n        flex: 1\r\n    },\r\n    tabsContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    tabContent: {\r\n        paddingTop: theme.spacing(1),\r\n        position: 'relative',\r\n        minHeight: 'calc(100% - 32px)'\r\n    },\r\n    buttonAdd: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n        zIndex: 3,\r\n    },\r\n    buttonExpandAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonCollapseAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42 * 2,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonSave: {\r\n        color: theme.type === 'dark' ? '#CC0000' : '#CC0000'\r\n    },\r\n    noContent : {\r\n        padding: theme.spacing(1),\r\n        height: 64,\r\n        verticalAlign: 'middle',\r\n        lineHeight: '64px',\r\n        width: '100%',\r\n    },\r\n    dragHint: {\r\n        paddingLeft: theme.spacing(1),\r\n        fontSize: 10,\r\n        fontStyle: 'italic',\r\n        opacity: 0.8,\r\n    },\r\n    marginTop: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    group: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n});\r\n\r\nconst PREDEFINED_COLORS_MARKS = [\r\n    '#144578',\r\n    '#1868A8',\r\n    '#665191',\r\n    '#a05195',\r\n    '#d45087',\r\n    '#f95d6a',\r\n    '#ff7c43',\r\n    '#ffa600',\r\n];\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: 'none',\r\n    width: '100%',\r\n    // change background colour if dragging\r\n    background: isDragging ? 'lightgreen' : 'grey',\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n});\r\n\r\nclass PresetTabs extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            presetData: DefaultPreset.getDefaultPreset(this.props.systemConfig),\r\n            selectedTab: window.localStorage.getItem('PresetTabs.selectedTab') !== null ? window.localStorage.getItem('PresetTabs.selectedTab') : '0',\r\n            linesOpened: window.localStorage.getItem('Lines.opened') !== null ? JSON.parse(window.localStorage.getItem('Lines.opened')) : [],\r\n            marksOpened: window.localStorage.getItem('Marks.opened') !== null ? JSON.parse(window.localStorage.getItem('Marks.opened')) : [],\r\n            deleteLineDialog: null,\r\n            deleteMarkDialog: null,\r\n            showColorDialog: false,\r\n            colorDialogValue: '',\r\n        };\r\n        this.colorPickerCb = null;\r\n    }\r\n\r\n    lineOpenToggle = index => {\r\n        let linesOpened = JSON.parse(JSON.stringify(this.state.linesOpened));\r\n        linesOpened[index] = !this.state.linesOpened[index];\r\n        this.setState({linesOpened});\r\n        window.localStorage.setItem('Lines.opened', JSON.stringify(linesOpened));\r\n    };\r\n\r\n    markOpenToggle = index => {\r\n        let marksOpened = JSON.parse(JSON.stringify(this.state.marksOpened));\r\n        marksOpened[index] = !this.state.marksOpened[index];\r\n        this.setState({marksOpened});\r\n        window.localStorage.setItem('Marks.opened', JSON.stringify(marksOpened));\r\n    };\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    updateMark = (index, markData) => {\r\n        let marks = JSON.parse(JSON.stringify(this.props.presetData.marks));\r\n        marks[index] = markData;\r\n        this.updateField('marks', marks);\r\n    };\r\n\r\n    updateLine = (index, lineData) => {\r\n        let lines = JSON.parse(JSON.stringify(this.props.presetData.lines));\r\n        lines[index] = lineData;\r\n        this.updateField('lines', lines);\r\n    };\r\n\r\n    addMark = () => {\r\n        const len = this.props.presetData.marks.length;\r\n        const color = PREDEFINED_COLORS_MARKS[len % PREDEFINED_COLORS_MARKS.length];\r\n        let presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.push({color});\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    expandAllLines = () => {\r\n        const linesOpened = this.props.presetData.lines.map(() => true);\r\n        window.localStorage.setItem('Lines.opened', JSON.stringify(linesOpened));\r\n        this.setState({linesOpened});\r\n    };\r\n\r\n    collapseAllLines = () => {\r\n        window.localStorage.setItem('Lines.opened', JSON.stringify([]));\r\n        this.setState({linesOpened: []});\r\n    };\r\n\r\n    expandAllMarks = () => {\r\n        const marksOpened = this.props.presetData.marks.map(() => true);\r\n        window.localStorage.setItem('Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened});\r\n    };\r\n\r\n    collapseAllMarks = () => {\r\n        window.localStorage.setItem('Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened: []});\r\n    };\r\n\r\n    deleteMark = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.splice(index, 1);\r\n        const marksOpened = [...this.state.marksOpened];\r\n        marksOpened.splice(index, 1);\r\n        this.setState({marksOpened}, () =>\r\n            this.props.onChange(presetData));\r\n    };\r\n\r\n    addLine = () => {\r\n        const len = this.props.presetData.lines.length;\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        const line = DefaultPreset.getDefaultLine(this.props.systemConfig);\r\n        line.xaxe = !len ? undefined : 'off';\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    deleteLine = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.lines.splice(index, 1);\r\n        const linesOpened = [...this.state.linesOpened];\r\n        linesOpened.splice(index, 1);\r\n        this.setState({linesOpened}, () => this.props.onChange(presetData));\r\n    };\r\n\r\n    renderDeleteLineDialog() {\r\n        return this.state.deleteLineDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteLineDialog\"\r\n            onClose={ () => this.setState({deleteLineDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this line?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteLineDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteLine(this.state.deleteLineDialog);\r\n                    this.setState({deleteLineDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderDeleteMarkDialog() {\r\n        return this.state.deleteMarkDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteMarkDialog\"\r\n            onClose={ () => this.setState({deleteMarkDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this mark?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteMarkDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteMark(this.state.deleteMarkDialog);\r\n                    this.setState({deleteMarkDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    showColorPicker(value, cb) {\r\n        this.colorPickerCb = cb;\r\n        this.setState({colorDialogValue: value, showColorDialog: true});\r\n    }\r\n\r\n    renderColorDialog() {\r\n        return <Dialog onClose={() => {\r\n            this.colorPickerCb = null;\r\n            this.setState({showColorDialog: false});\r\n        }} open={this.state.showColorDialog}>\r\n            {/*<DialogTitle id=\"simple-dialog-title\">Set backup account</DialogTitle>*/}\r\n            <ChromePicker\r\n                color={this.state.colorDialogValue}\r\n                onChange={value => {\r\n                    this.setState({colorDialogValue: value}, () =>\r\n                        this.colorPickerCb(value));\r\n                }}\r\n            />\r\n        </Dialog>;\r\n    }\r\n\r\n    renderTabLines() {\r\n        const anyClosed = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => !this.state.linesOpened[i]);\r\n        const anyOpened = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => this.state.linesOpened[i]);\r\n\r\n        return <Droppable droppableId=\"droppable\">\r\n            {(provided, snapshot) =>\r\n                <div\r\n                    {...provided.droppableProps}\r\n                    ref={provided.innerRef}\r\n                    style={{\r\n                        background: snapshot.isDraggingOver ? this.props.theme.palette.secondary.dark : undefined,\r\n                        width: '100%',\r\n                        minHeight: '100%',\r\n                    }}\r\n                >\r\n                    <TabPanel value=\"0\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Fab onClick={this.addLine}     size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd}         title={I18n.t('Add line to chart')}><IconAdd/></Fab>\r\n                        {anyClosed ? <Fab onClick={this.expandAllLines}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all lines')}><IconExpand/></Fab> : null}\r\n                        {anyOpened ? <Fab onClick={this.collapseAllLines} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all lines')}><IconCollapse/></Fab> : null}\r\n                        {this.props.presetData.lines.length ? this.props.presetData.lines.map((line, index) =>\r\n                            <Draggable key={line.id + '_' + index} draggableId={line.id + '_' + index} index={index}>\r\n                                {(provided, snapshot) =>\r\n                                    <div\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        style={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\r\n                                    >\r\n                                        <Line\r\n                                            provided={provided}\r\n                                            snapshot={snapshot}\r\n                                            theme={this.props.theme}\r\n                                            instances={this.props.instances}\r\n                                            line={line}\r\n                                            width={this.props.width}\r\n                                            updateLine={this.updateLine}\r\n                                            deleteLine={index => this.setState({deleteLineDialog: index})}\r\n                                            index={index}\r\n                                            key={index}\r\n                                            socket={this.props.socket}\r\n                                            opened={typeof this.state.linesOpened[index] !== 'undefined' && this.state.linesOpened[index] === true}\r\n                                            lineOpenToggle={this.lineOpenToggle}\r\n                                            maxLines={this.props.presetData.lines.length}\r\n                                            onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            </Draggable>)\r\n                        :\r\n                            <div className={this.props.classes.noContent}>\r\n                                {I18n.t('Create a new line with a \"+\" on the right.')}\r\n                            </div>\r\n                        }\r\n                        <div className={this.props.classes.dragHint}>{I18n.t('You can drag and drop simple lines from the left list.')}</div>\r\n                    </TabPanel>\r\n                </div>}\r\n            </Droppable>;\r\n    }\r\n\r\n    renderTabMarkings() {\r\n        const anyClosed = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) => !this.state.marksOpened[i]);\r\n        const anyOpened = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) =>  this.state.marksOpened[i]);\r\n\r\n        return <TabPanel value=\"1\" classes={{root: this.props.classes.tabContent}}>\r\n            <Fab onClick={this.addMark} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd} title={I18n.t('Add marking line to chart')}>\r\n                <IconAdd/>\r\n            </Fab>\r\n            {anyClosed ? <Fab onClick={this.expandAllMarks}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all markings')}><IconExpand/></Fab> : null}\r\n            {anyOpened ? <Fab onClick={this.collapseAllMarks} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all markings')}><IconCollapse/></Fab> : null}\r\n            {\r\n                this.props.presetData.marks.length ?\r\n                    this.props.presetData.marks.map((mark, index) => <Mark\r\n                        mark={mark}\r\n                        presetData={this.props.presetData}\r\n                        updateMark={this.updateMark}\r\n                        deleteMark={(index) => {this.setState({deleteMarkDialog: index})}}\r\n                        index={index}\r\n                        key={index}\r\n                        socket={this.props.socket}\r\n                        opened={typeof this.state.marksOpened[index] !== 'undefined' && this.state.marksOpened[index] === true}\r\n                        markOpenToggle={this.markOpenToggle}\r\n                        onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                    />) :\r\n                    <div className={this.props.classes.noContent}>\r\n                        {I18n.t('You can create a new markings with a \"+\" on the right.')}\r\n                    </div>\r\n            }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTime() {\r\n        return <TabPanel value=\"2\" classes={{root: this.props.classes.tabContent}}>\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Type')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                    </div>\r\n                    <div className={this.props.classes.group}>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Relative')}</p>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={{\r\n                                    'now': 'now',\r\n                                    '1minute': 'end of minute',\r\n                                    '5minutes': 'end of 5 minutes',\r\n                                    '10minutes': 'end of 10 minutes',\r\n                                    '30minutes': 'end of 30 minutes',\r\n                                    '1hour': 'end of hour',\r\n                                    '2hours': 'end of 2 hours',\r\n                                    '3hours': 'end of 3 hours',\r\n                                    '4hours': 'end of 4 hours',\r\n                                    '6hours': 'end of 6 hours',\r\n                                    '8hours': 'end of 8 hours',\r\n                                    '12hours': 'end of 12 hours',\r\n                                    'today': 'end of day',\r\n                                    'weekEurope': 'end of sunday',\r\n                                    'weekUsa': 'end of saturday',\r\n                                    'month': 'this month',\r\n                                    'year': 'this year',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={{\r\n                                    '10': '10 minutes',\r\n                                    '30': '30 minutes',\r\n                                    '60': '1 hour',\r\n                                    '120': '2 hours',\r\n                                    '180': '3 hours',\r\n                                    '360': '6 hours',\r\n                                    '720': '12 hours',\r\n                                    '1440': '1 day',\r\n                                    '2880': '2 days',\r\n                                    '4320': '3 days',\r\n                                    '10080': '7 days',\r\n                                    '20160': '14 days',\r\n                                    '1m': '1 month',\r\n                                    '2m': '2 months',\r\n                                    '3m': '3 months',\r\n                                    '6m': '6 months',\r\n                                    '1y': '1 year',\r\n                                    '2y': '2 years',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"live\" label=\"Live update every\" options={{\r\n                                    '': 'none',\r\n                                    '5': '5 seconds',\r\n                                    '10': '10 seconds',\r\n                                    '15': '15 seconds',\r\n                                    '20': '20 seconds',\r\n                                    '30': '30 seconds',\r\n                                    '60': '1 minute',\r\n                                    '120': '2 minutes',\r\n                                    '300': '5 minutes',\r\n                                    '600': '10 minutes',\r\n                                    '900': '15 minutes',\r\n                                    '1200': '20 minutes',\r\n                                    '1800': '30 minutes',\r\n                                    '3600': '1 hour',\r\n                                    '7200': '2 hours',\r\n                                    '10800': '3 hours',\r\n                                    '21600': '6 hours',\r\n                                    '43200': '12 hours',\r\n                                    '86400': '1 day',\r\n                                }}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    {/*<div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                        <IOObjectField socket={this.props.socket} formData={this.props.presetData} updateValue={this.updateField} name=\"ticks\" label=\"Use X-ticks from\" />\r\n                    </div>*/}\r\n                {this.props.presetData.lines.find(line => line.aggregate !== 'onchange') ?\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Aggregate')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                                     label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        />\r\n                    </div> : null }\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Time format')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label=\"Custom time format\" name=\"timeFormatCustom\" />\r\n                {!this.props.presetData.timeFormatCustom ?\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" options={{\r\n                        '': 'Default',\r\n                        'HH:mm DD.MM': 'HH:MM dd.mm',\r\n                        'HH:mm DD.MM.': 'HH:MM dd.mm.',\r\n                        'HH:mm <br/> DD.MM': 'HH:MM / dd.mm',\r\n                        'HH:mm <br/> DD.MM.': 'HH:MM / dd.mm.',\r\n                        'HH:mm <br/> DD.MM.YY': 'HH:MM / dd.mm.yy',\r\n                        'HH:mm:ss DD.MM.YY': 'HH:MM:SS dd.mm.yy',\r\n                        'HH:mm DD.MM.YY': 'HH:MM dd.mm.yy',\r\n                        'hh:mm:ss MM/DD/YY a': 'HH:MM:SS mm/dd/yy am (US)',\r\n                        'HH:mm:ss DD/MM/YY': 'HH:MM:SS dd/mm/yy (UK)',\r\n                        'HH:mm:ss MM.DD.YY': 'HH:MM:SS mm.dd.yy',\r\n                        'HH:mm ddd': 'HH:MM dow',\r\n                        'HH:mm:ss ddd': 'HH:MM:SS dow',\r\n                        'HH:mm MM.DD': 'HH:MM mm.dd',\r\n                        'HH:mm:ss': 'HH:MM:SS',\r\n                        'HH:mm': 'HH:MM',\r\n                        'DD.MM': 'dd.mm',\r\n                        'DD.MM.': 'dd.mm.',\r\n                        'MM/DD': 'mm/dd',\r\n                        'DD': 'dd',\r\n                        'MM': 'mm',\r\n                        'YY': 'y',\r\n                        'HH': 'HH',\r\n                        'mm': 'MM',\r\n                        'ddd': 'dow',\r\n                        'DD.MM.YY': 'dd.mm.yy',\r\n                    }}/> :\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" helperLink=\"https://momentjs.com/docs/#/displaying/format/\"/>\r\n                }\r\n                {/*<IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Animation\" name=\"animation\" options={{\r\n                                '0': 'no',\r\n                                '300': '300ms',\r\n                                '500': '500ms',\r\n                                '1000': '1 second',\r\n                                '2000': '2 seconds',\r\n                                '3000': '3 seconds',\r\n                                '5000': '5 seconds',\r\n                                '10000': '10 seconds',\r\n                            }}/>*/}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabOptions() {\r\n        return <TabPanel value=\"3\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Legend')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Show legend\" name=\"legend\" options={{\r\n                    '': 'none',\r\n                    'nw': 'Top, left',\r\n                    'ne': 'Top, right',\r\n                    'sw': 'Bottom, left',\r\n                    'se': 'Bottom, right',\r\n                }}/>\r\n                {this.props.presetData.legend ?\r\n                <>\r\n                    {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend columns\" name=\"legColumns\" min=\"1\" type=\"number\" />*/}\r\n                    {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend opacity (0-1)\" name=\"legBgOpacity\" />*/}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Legend text color', 'legColor')}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Legend background', 'legBg')}\r\n                </> : null}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Options')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hover details'} name=\"hoverDetail\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Use comma'} name=\"useComma\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Enable zoom and pan'} name=\"zoom\" />\r\n                {/*<IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide edit button'} name=\"noedit\" />*/}\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Show export button'} name=\"export\" />\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTitle() {\r\n        return <TabPanel value=\"4\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Title')}</p>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"title\" label=\"Title\"/>\r\n                {this.props.presetData.title ?\r\n                    <>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"titlePos\" label=\"Title position\" options={{\r\n                            '': 'none',\r\n                            'top:35;left:65': 'Top, left, inside',\r\n                            'top:35;right:5': 'Top, right, inside',\r\n                            'top:35;left:50': 'Top, center, inside',\r\n                            'top:50;left:65': 'Middle, left, inside',\r\n                            'top:50;right:5': 'Middle, right, inside',\r\n                            'bottom:5;left:65': 'Bottom, left, inside',\r\n                            'bottom:5;right:5': 'Bottom, right, inside',\r\n                            'bottom:5;left:50': 'Bottom, center, inside',\r\n                            /*'top:5;right:-5': 'Top, right, outside',\r\n                            'top:50;right:-5': 'Middle, right, outside',\r\n                            'bottom:5;right:-5': 'Bottom, right, outside',\r\n                            'bottom:-5;left:50': 'Bottom, center, outside',*/\r\n                        }}/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Title color', 'titleColor')}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"titleSize\" label=\"Title size\" min={0} type=\"number\" />\r\n                    </>\r\n                    : null}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabAppearance() {\r\n        return <TabPanel value=\"5\" classes={{root: this.props.classes.tabContent}}>\r\n                {/*<h4>{I18n.t('Appearance')}</h4>*/}\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Theme')}</p>\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"theme\" label=\"Theme\" noTranslate={true} options={{\r\n                        '': 'auto',\r\n                        'default': 'default',\r\n                        'dark': 'dark',\r\n                        'dark-bold': 'dark-bold',\r\n                        'dark-blue': 'dark-blue',\r\n                        'gray': 'gray',\r\n                        'vintage': 'vintage',\r\n                        'macarons': 'macarons',\r\n                        'infographic': 'infographic',\r\n                        'shine': 'shine',\r\n                        'roma': 'roma',\r\n                        'azul': 'azul',\r\n                        'bee-inspired': '',\r\n                        'blue': 'blue',\r\n                        'royal': 'royal',\r\n                        'tech-blue': 'tech-blue',\r\n                        'red': 'red',\r\n                        'red-velvet': 'red-velvet',\r\n                        'green': 'green',\r\n                    }}/>\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Chart size')}</p>\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"width\"  label=\"Width\"  classes={{fieldContainer: this.props.classes.marginTop}}/>\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"height\" label=\"Height\" classes={{fieldContainer: this.props.classes.marginTop}} />\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Backgrounds')}</p>\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Window background', 'window_bg', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Chart background', 'bg_custom', undefined, this.props.classes.marginTop)}\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Labels')}</p>\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'X labels color', 'x_labels_color', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'X ticks color', 'x_ticks_color', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Y labels color', 'y_labels_color', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Y ticks color', 'y_ticks_color', undefined, this.props.classes.marginTop)}\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Grid')}</p>\r\n                    <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideX\" label=\"Hide X grid\" />\r\n                    <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideY\" label=\"Hide Y grid\" />\r\n                    {!this.props.presetData.grid_hideX || !this.props.presetData.grid_hideY ?\r\n                        this.renderColorField(this.props.presetData, this.updateField, 'Grid color', 'grid_color')\r\n                        : null }\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Border')}</p>\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"noBorder\" label=\"Border\" options={{\r\n                        '': 'With border',\r\n                        'noborder': 'Without border',\r\n                    }}/>\r\n                    {this.props.presetData.noBorder !== 'noborder' ?\r\n                        <>\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_width\" label=\"Border width\" min=\"0\" type=\"number\"/>\r\n                            {this.props.presetData.border_width ? this.renderColorField(this.props.presetData, this.updateField, 'Border color', 'border_color') : null}\r\n                            {this.props.presetData.border_width ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"border_style\" label=\"Border style\" options={{\r\n                                'solid':  'solid',\r\n                                'dotted': 'dotted',\r\n                                'dashed': 'dashed',\r\n                                'double': 'double',\r\n                                'groove': 'groove',\r\n                                'ridge':  'ridge',\r\n                                'inset':  'inset',\r\n                                'outset': 'outset',\r\n                            }}/> : null}\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_padding\" label=\"Border padding\" min=\"0\" type=\"number\"/>\r\n\r\n                        </> : null}\r\n                </div>\r\n                {\r\n                    !!this.props.presetData.lines.find(line => line.chartType === 'bar') ?\r\n                        <Grid item sm={6} xs={12}>\r\n                            <h4>{I18n.t('Bar settings')}</h4>\r\n                            {this.renderColorField(this.props.presetData, this.updateField, 'Fill color', 'barColor')}\r\n                            <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"barLabels\" label=\"Show labels\" options={{\r\n                                '': 'none',\r\n                                'topover': 'top over',\r\n                                'topunder': 'top under',\r\n                                'bottom': 'bottom',\r\n                                'middle': 'middle',\r\n                            }}/>\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barWidth\" label=\"Bars width\" min=\"0\" type=\"number\"/>\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barFontSize\" label=\"Label font size\" min=\"0\" type=\"number\"/>\r\n                            {this.renderColorField(this.props.presetData, this.updateField, 'Label color', 'barFontColor')}\r\n                        </Grid>\r\n                        : null\r\n                }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_c_' + name]: formData[name]}, () =>\r\n                        this.showColorPicker(this.state['_' + name], color =>\r\n                            this.setState({['_c_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))}\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_c_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_c_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <TabContext value={this.state.selectedTab}>\r\n                <AppBar position=\"static\" className={this.props.classes.tabsContainer}>\r\n                    <IconButton\r\n                        className={this.props.classes.buttonSave}\r\n                        style={{visibility: this.props.selectedPresetChanged ? 'visible' : 'hidden'}}\r\n                        onClick={() =>\r\n                            this.props.savePreset(this.props.selectedPresetId)}\r\n                    >\r\n                        <IconSave/>\r\n                    </IconButton>\r\n                    <TabList\r\n                        onChange={(event, newValue)=>{\r\n                            window.localStorage.setItem('PresetTabs.selectedTab', newValue);\r\n                            this.setState({selectedTab: newValue})\r\n                        }}\r\n                        variant=\"scrollable\"\r\n                        scrollButtons=\"on\"\r\n                    >\r\n                        <Tab label={I18n.t('Data')} value=\"0\"/>\r\n                        <Tab label={I18n.t('Markings')} value=\"1\"/>\r\n                        <Tab label={I18n.t('Time')} value=\"2\"/>\r\n                        <Tab label={I18n.t('Options')} value=\"3\"/>\r\n                        <Tab label={I18n.t('Title')} value=\"4\"/>\r\n                        <Tab label={I18n.t('Appearance')} value=\"5\"/>\r\n                    </TabList>\r\n                </AppBar>\r\n                <div className={this.props.classes.tabsBody}>\r\n                    {this.state.selectedTab === '0' ? this.renderTabLines()      : null}\r\n                    {this.state.selectedTab === '1' ? this.renderTabMarkings()   : null}\r\n                    {this.state.selectedTab === '2' ? this.renderTabTime()       : null}\r\n                    {this.state.selectedTab === '3' ? this.renderTabOptions()    : null}\r\n                    {this.state.selectedTab === '4' ? this.renderTabTitle()      : null}\r\n                    {this.state.selectedTab === '5' ? this.renderTabAppearance() : null}\r\n                </div>\r\n            </TabContext>\r\n            {this.renderDeleteLineDialog()}\r\n            {this.renderDeleteMarkDialog()}\r\n            {this.renderColorDialog()}\r\n        </>\r\n    }\r\n}\r\n\r\nPresetTabs.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    selectedPresetId: PropTypes.string,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    systemConfig: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(PresetTabs)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n//import IconButton from '@material-ui/core/IconButton';\r\n\r\n//import I18n from '@iobroker/adapter-react/i18n';\r\nimport {withStyles} from '@material-ui/core/styles/index';\r\n\r\nimport PresetTabs from './Components/PresetTabs';\r\n\r\n// replace later with MdHorizontalSplit and MdVerticalSplit\r\n//const IconVerticalSplit   = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAACFJREFUeAFjAIJRwP////8PYIKWHCigNQdKj/pn1D+jAABTG16wVQqVpQAAAABJRU5ErkJggg==';\r\n//const IconHorizontalSplit = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAABtJREFUeAFjAIJRwP8fCj7QkENn/4z6Z5QzCgBjbWaoyx1PqQAAAABJRU5ErkJggg==';\r\n\r\nconst TOOLBOX_WIDTH = 0;//34;\r\n\r\nconst styles = theme => ({\r\n    logBox: {\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    },\r\n    logBoxInner: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\r\n        height: '100%',\r\n        marginLeft: TOOLBOX_WIDTH,\r\n        overflow: 'none',\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    toolbox: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        marginLeft: 2,\r\n        width: TOOLBOX_WIDTH,\r\n        height: '100%',\r\n        boxShadow: '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    iconButtons: {\r\n        width: 32,\r\n        height: 32,\r\n        padding: 4\r\n    },\r\n    layoutIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        background: theme.palette.type === 'dark' ? '#9d9d9d' : undefined,\r\n        borderRadius: theme.palette.type === 'dark' ? 30 : undefined,\r\n    },\r\n});\r\n\r\nclass SettingsEditor extends React.Component {\r\n    render() {\r\n        return <div className={this.props.classes.logBox}>\r\n            {/*false ? <div className={this.props.classes.toolbox} key=\"toolbox\">\r\n                {this.props.onLayoutChange ?\r\n                    (<IconButton\r\n                        className={this.props.classes.iconButtons}\r\n                        onClick={() => this.props.onLayoutChange()}\r\n                        title={I18n.t('Change layout')}\r\n                    >\r\n                        <img\r\n                            className={this.props.classes.layoutIcon}\r\n                            alt=\"split\"\r\n                            src={this.props.verticalLayout ? IconVerticalSplit : IconHorizontalSplit}\r\n                        />\r\n                    </IconButton>) : null}\r\n            </div> : null*/ }\r\n            <div className={this.props.classes.logBoxInner} key=\"logList\">\r\n                <PresetTabs\r\n                    width={this.props.width}\r\n                    socket={this.props.socket}\r\n                    presetData={this.props.presetData}\r\n                    onChange={this.props.onChange}\r\n                    instances={this.props.instances}\r\n                    systemConfig={this.props.systemConfig}\r\n                    selectedPresetId={this.props.selectedPresetId}\r\n                    selectedPresetChanged={this.props.selectedPresetChanged}\r\n                    savePreset={this.props.savePreset}\r\n                    theme={this.props.theme}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nSettingsEditor.propTypes = {\r\n    socket: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    onLayoutChange: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    verticalLayout: PropTypes.bool,\r\n    selectedPresetId: PropTypes.string,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(SettingsEditor);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\n\r\nimport {IOTextField, IOSelect, IODateTimeField} from './Fields';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IoMdTime as IconTime} from 'react-icons/all';\r\nimport {FiRefreshCw as IconRefresh} from 'react-icons/all';\r\nimport {IoMdArrowDropdown as IconDropDown} from 'react-icons/all';\r\nimport {MdAdd as IconPlus} from 'react-icons/md';\r\n\r\nclass IconAggregate extends React.Component {\r\n    render() {\r\n        return <svg onClick={e => this.props.onClick && this.props.onClick(e)} viewBox=\"0 0 32 32\" width={this.props.width || 20} height={this.props.width || 20} xmlns=\"http://www.w3.org/2000/svg\" className={ this.props.className }>\r\n            <path fill='none' stroke=\"currentColor\" strokeWidth='2' d='M16,9 L9,9 L9,16 L9,16 C9,19.8659932 12.1340068,23 16,23 L16,23 C19.8659932,23 23,19.8659932 23,16 C23,12.1340068 19.8659932,9 16,9 L16,9 Z M8,15 L15,15 L15,8 L15,8 C15,4.13400675 11.8659932,1 8,1 L8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,15 L8,15 Z' transform='rotate(180 12 12)' />        </svg>;\r\n    }\r\n}\r\n\r\nlet styles = theme => ({\r\n    mainDiv: {\r\n        paddingLeft: 40,\r\n    },\r\n    fieldsContainer: {\r\n        '& > div': {\r\n            display: 'flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        }\r\n    },\r\n    hintButton: {\r\n        marginRight: 20,\r\n        float: 'right'\r\n    },\r\n    popOver: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    refreshSelect: {\r\n        display: 'inline-block',\r\n        paddingLeft: 4,\r\n        '& > div:before': {\r\n            borderWidth: 0\r\n        },\r\n        '& > div:hover:before': {\r\n            borderBottom: 0\r\n        },\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    refreshSelectButtonTitle: {\r\n        display: 'inline-flex',\r\n        paddingTop: 6,\r\n    },\r\n    settingsButton: {\r\n        color: 'currentColor',\r\n        fontSize: 16,\r\n        textTransform: 'inherit'\r\n    },\r\n    grow1: {\r\n        flexGrow: 1,\r\n    },\r\n    aggregateIcon: {\r\n        marginTop: 4,\r\n    },\r\n});\r\n\r\nconst RefreshSelect = function (props) {\r\n    return <div className={props.className}>\r\n        <Select\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            renderValue={props.renderValue}\r\n            displayEmpty\r\n        >\r\n            {\r\n                props.options ?\r\n                    Object.keys(props.options).map((key) =>\r\n                        <MenuItem key={key} value={key}>{props.noTranslate ? props.options[key] : I18n.t(props.options[key])}</MenuItem>)\r\n                        : null\r\n            }\r\n        </Select>\r\n    </div>\r\n};\r\n\r\nconst rangeOptions = {\r\n    '10': '10 minutes',\r\n    '30': '30 minutes',\r\n    '60': '1 hour',\r\n    '120': '2 hours',\r\n    '180': '3 hours',\r\n    '360': '6 hours',\r\n    '720': '12 hours',\r\n    '1440': '1 day',\r\n    '2880': '2 days',\r\n    '4320': '3 days',\r\n    '10080': '7 days',\r\n    '20160': '14 days',\r\n    '1m': '1 month',\r\n    '2m': '2 months',\r\n    '3m': '3 months',\r\n    '6m': '6 months',\r\n    '1y': '1 year',\r\n    '2y': '2 years',\r\n};\r\nconst relativeEndOptions = {\r\n    'now': 'now',\r\n    '1minute': 'end of minute',\r\n    '5minutes': 'end of 5 minutes',\r\n    '10minutes': 'end of 10 minutes',\r\n    '30minutes': 'end of 30 minutes',\r\n    '1hour': 'end of hour',\r\n    '2hours': 'end of 2 hours',\r\n    '3hours': 'end of 3 hours',\r\n    '4hours': 'end of 4 hours',\r\n    '6hours': 'end of 6 hours',\r\n    '8hours': 'end of 8 hours',\r\n    '12hours': 'end of 12 hours',\r\n    'today': 'end of day',\r\n    'weekEurope': 'end of sunday',\r\n    'weekUsa': 'end of saturday',\r\n    'month': 'this month',\r\n    'year': 'this year',\r\n};\r\nconst liveOptions = {\r\n    '': 'none',\r\n    '5': '5 seconds',\r\n    '10': '10 seconds',\r\n    '15': '15 seconds',\r\n    '20': '20 seconds',\r\n    '30': '30 seconds',\r\n    '60': '1 minute',\r\n    '120': '2 minutes',\r\n    '300': '5 minutes',\r\n    '600': '10 minutes',\r\n    '900': '15 minutes',\r\n    '1200': '20 minutes',\r\n    '1800': '30 minutes',\r\n    '3600': '1 hour',\r\n    '7200': '2 hours',\r\n    '10800': '3 hours',\r\n    '21600': '6 hours',\r\n    '43200': '12 hours',\r\n    '86400': '1 day',\r\n};\r\n\r\nconst CHART_TYPES = {\r\n    auto: 'Auto (Line or Steps)',\r\n    line: 'Line',\r\n    //bar: 'Bar',\r\n    scatterplot: 'Scatter plot',\r\n    steps: 'Steps',\r\n    spline: 'Spline',\r\n};\r\n\r\nconst AGGREGATES = {\r\n    minmax: 'minmax',\r\n    average: 'average',\r\n    min: 'min',\r\n    max: 'max',\r\n    total: 'total',\r\n    onchange: 'raw',\r\n};\r\n\r\nclass ChartSettings extends React.Component {\r\n    state = {\r\n        timeSpanOpened: false,\r\n        aggregateOpened: false,\r\n        refreshOpened: false\r\n    };\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n        window.localStorage.setItem('Chart.' + name, value);\r\n    };\r\n\r\n    render() {\r\n        return <Toolbar className={this.props.classes.mainDiv} variant=\"dense\">\r\n            <Button\r\n                title={ I18n.t('Time span') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"timeSpanOpenButton\"\r\n                onClick={() => {this.setState({timeSpanOpened: !this.state.timeSpanOpened})}}\r\n            >\r\n                <IconTime/>\r\n                {\r\n                    this.props.presetData.timeType === 'relative' ?\r\n                    I18n.t(rangeOptions[this.props.presetData.range]) + ' ' + I18n.t('to') + ' ' + I18n.t(relativeEndOptions[this.props.presetData.relativeEnd]) :\r\n                    this.props.presetData.start + ' ' + this.props.presetData.start_time + ' - ' + this.props.presetData.end + ' ' + this.props.presetData.end_time\r\n                }\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover className={this.props.classes.popOver}\r\n                open={this.state.timeSpanOpened}\r\n                onClose={()=>{this.setState({timeSpanOpened: false})}}\r\n                anchorEl={()=> document.getElementById('timeSpanOpenButton')}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={relativeEndOptions}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={rangeOptions}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            <Button\r\n                title={ I18n.t('Aggregate') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"aggregateOpenButton\"\r\n                onClick={() => {this.setState({aggregateOpened: !this.state.aggregateOpened})}}\r\n            >\r\n                <IconAggregate className={this.props.classes.aggregateIcon}/>\r\n                {I18n.t(CHART_TYPES[this.props.presetData.chartType])} / {I18n.t(AGGREGATES[this.props.presetData.aggregate])}\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover\r\n                open={this.state.aggregateOpened}\r\n                anchorEl={()=> document.getElementById('aggregateOpenButton')}\r\n                onClose={()=>{this.setState({aggregateOpened: false})}}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"chartType\"\r\n                            label=\"Chart type\"\r\n                            options={CHART_TYPES}\r\n                        />\r\n                        {this.props.presetData.chartType !== 'auto' ? <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"aggregate\"\r\n                            label=\"Aggregate\"\r\n                            options={AGGREGATES}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                            label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        /> : null}\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            {this.props.presetData.timeType === 'relative' ? <RefreshSelect\r\n                className={this.props.classes.refreshSelect}\r\n                minWidth={0} width=\"initial\"\r\n                formData={this.props.presetData}\r\n                updateValue={this.updateField}\r\n                name=\"live\"\r\n                label=\"\"\r\n                title={I18n.t('Auto-refresh')}\r\n                options={liveOptions}\r\n                renderValue={()=>\r\n                    <div className={this.props.classes.refreshSelectButtonTitle}>\r\n                        <IconRefresh/>&nbsp;{I18n.t(liveOptions[this.props.presetData.live])}\r\n                    </div>\r\n                }\r\n            /> : null }\r\n            <div className={this.props.classes.grow1}/>\r\n            <Button variant=\"contained\" color=\"primary\" className={this.props.classes.hintButton} onClick={() => this.props.createPreset(null, null, this.props.selectedChartInstance, this.props.selectedChartId)}>\r\n                <IconPlus className={this.props.classes.buttonIcon}/>\r\n                {I18n.t('Create preset')}\r\n            </Button>\r\n        </Toolbar>;\r\n    }\r\n}\r\n\r\nChartSettings.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    createPreset: PropTypes.func,\r\n    selectedChartId: PropTypes.string,\r\n    selectedChartInstance: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(ChartSettings)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst styles = theme => ({\r\n    darkBackground: {\r\n        stroke: '#3a3a3a !important',\r\n        fill: '#515151 !important',\r\n    },\r\n    iframe: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto',\r\n        border: 0,\r\n        color: theme.palette.primary.main// && console.log(JSON.stringify(theme))\r\n    }\r\n});\r\n\r\n/*function deParam(params, coerce) {\r\n    const obj = {};\r\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\r\n\r\n    // Iterate over all name=value pairs.\r\n    (params || '').replace(/\\+/g, ' ').split('&').forEach(v => {\r\n        const param = v.split('=');\r\n        let key = decodeURIComponent(param[0]);\r\n        let val;\r\n        let i = 0;\r\n\r\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\r\n        // into its component parts.\r\n        let keys = key.split('][');\r\n        let keysLast = keys.length - 1;\r\n\r\n        // If the first keys part contains [ and the last ends with ], then []\r\n        // are correctly balanced.\r\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\r\n            // Remove the trailing ] from the last keys part.\r\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\r\n\r\n            // Split first keys part into two parts on the [ and add them back onto\r\n            // the beginning of the keys array.\r\n            keys = keys.shift().split('[').concat(keys);\r\n\r\n            keysLast = keys.length - 1;\r\n        } else {\r\n            // Basic 'foo' style key.\r\n            keysLast = 0;\r\n        }\r\n\r\n        // Are we dealing with a name=value pair, or just a name?\r\n        if (param.length === 2) {\r\n            val = decodeURIComponent(param[1]);\r\n\r\n            // Coerce values.\r\n            if (coerce) {\r\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\r\n                    : val === 'undefined' ? undefined         // undefined\r\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\r\n                            : val;                                                          // string\r\n            }\r\n\r\n            if (keysLast) {\r\n                let cur = obj;\r\n                // Complex key, build deep object structure based on a few rules:\r\n                // * The 'cur' pointer starts at the object top-level.\r\n                // * [] = array push (n is set to array length), [n] = array if n is\r\n                //   numeric, otherwise object.\r\n                // * If at the last keys part, set the value.\r\n                // * For each keys part, if the current level is undefined create an\r\n                //   object or array based on the type of the next keys part.\r\n                // * Move the 'cur' pointer to the next level.\r\n                // * Rinse & repeat.\r\n                for (; i <= keysLast; i++) {\r\n                    key = keys[i] === '' ? cur.length : keys[i];\r\n                    cur = cur[key] = i < keysLast\r\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\r\n                        : val;\r\n                }\r\n\r\n            } else {\r\n                // Simple key, even simpler rules, since only scalars and shallow\r\n                // arrays are allowed.\r\n\r\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\r\n                    // val is already an array, so push on the next value.\r\n                    obj[key].push(val);\r\n                } else if ({}.hasOwnProperty.call(obj, key)) {\r\n                    // val isn't an array, but since a second value has been specified,\r\n                    // convert val into an array.\r\n                    obj[key] = [obj[key], val];\r\n                } else {\r\n                    // val is a scalar.\r\n                    obj[key] = val;\r\n                }\r\n            }\r\n        } else if (key) {\r\n            // No value was defined, so set something meaningful.\r\n            obj[key] = coerce\r\n                ? undefined\r\n                : '';\r\n        }\r\n    });\r\n\r\n    return obj;\r\n}*/\r\n\r\nclass ChartFrame extends React.Component {\r\n    render() {\r\n        if (window.location.port === '3000') {\r\n            const parts = this.props.src.split('&');\r\n            if (parts[0].includes('data=')) {\r\n                parts[0] = parts[0].replace(/^.*data=/, '');\r\n                parts[0] = decodeURIComponent(parts[0]);\r\n                try {\r\n                    parts[0] = JSON.parse(parts[0]);\r\n                } catch (e) {\r\n\r\n                }\r\n            }\r\n            return <Paper className={this.props.classes.iframe} style={{background: '#333'}}>\r\n                <pre>{parts.join('\\n')}</pre>\r\n                <br/>\r\n                <hr/>\r\n                <br/>\r\n                <pre>{JSON.stringify(parts[0], null, 2)}</pre>\r\n            </Paper>;\r\n        } else {\r\n            return <iframe\r\n                title=\"iobrokerChart\"\r\n                className={this.props.classes.iframe}\r\n                src={this.props.src}>\r\n            </iframe>;\r\n        }\r\n    }\r\n}\r\n\r\nChartFrame.propTypes = {\r\n    src: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(ChartFrame);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {MuiThemeProvider, withStyles} from '@material-ui/core/styles';\r\n\r\nimport ChartSettings from './Components/ChartSettings';\r\nimport ChartFrame from './Components/ChartFrame';\r\n\r\nconst styles = theme => ({\r\n    toolbar: {\r\n        //a: console.log(JSON.stringify(theme)),\r\n        minHeight: theme.mixins.toolbar.minHeight,\r\n        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    editorDiv: {\r\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + 38 + 1}px)`,\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        position: 'relative'\r\n    },\r\n    textButton: {\r\n        marginRight: 10,\r\n        minHeight: 24,\r\n        padding: '6px 16px'\r\n    },\r\n    tabIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        verticalAlign: 'middle',\r\n        marginBottom: 2,\r\n        marginRight: 2,\r\n        borderRadius: 3\r\n    },\r\n    hintIcon: {\r\n        //fontSize: 32,\r\n        padding: '0 8px 0 8px'\r\n    },\r\n    hintText: {\r\n        //fontSize: 18\r\n    },\r\n    tabMenuButton: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        right: 0,\r\n    },\r\n    tabChanged: {\r\n        color: theme.palette.secondary.main\r\n    },\r\n    tabText: {\r\n        maxWidth: 130,\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n    },\r\n    tabChangedIcon: {\r\n        color: '#FF0000',\r\n        fontSize: 16\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 0,\r\n        zIndex: 10,\r\n        padding: 8,\r\n        cursor: 'pointer'\r\n    },\r\n    notRunning: {\r\n        color: '#ffbc00'\r\n    },\r\n    tabButton: {\r\n\r\n    },\r\n    tabButtonWrapper: {\r\n        display: 'inline-block',\r\n    },\r\n    menuIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2,\r\n        marginRight: 5\r\n    },\r\n    container: {\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    heightWithoutToolbar: {\r\n        height: 'calc(100% - 48px)',\r\n    },\r\n    height100: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\nclass MainChart extends React.Component {\r\n    renderToolbar() {\r\n        return this.props.presetMode ? null :\r\n            <ChartSettings\r\n                onChange={this.props.onChange}\r\n                enablePresetMode={this.props.enablePresetMode}\r\n                presetData={this.props.presetData}\r\n                selectedChartId={this.props.selectedChartId}\r\n                selectedChartInstance={this.props.selectedChartInstance}\r\n                socket={this.props.socket}\r\n                createPreset={this.props.createPreset}\r\n            />;\r\n    }\r\n\r\n    getUrlParameters() {\r\n        let url = [];\r\n        /*let translate = {\r\n            'lines': 'l',\r\n            'marks': 'm'\r\n        };\r\n        let translateObject = {\r\n            'lines': {},\r\n            'marks': {\r\n                'lineId': 'l',\r\n                'upperValueOrId': 'v',\r\n                'lowerValueOrId': 'vl',\r\n                'color': 'c',\r\n                'fill': 'f',\r\n                'ol': 't',\r\n                'os': 's',\r\n                'text': 'd',\r\n                'textPosition': 'p',\r\n                'textOffset': 'py',\r\n                'textColor': 'fc',\r\n                'textSize': 'fs',\r\n            },\r\n        };\r\n        for (let k in this.props.presetData) {\r\n            let v = this.props.presetData[k];\r\n            let translateCurrentObject = translateObject[k];\r\n\r\n            if (k === 'chartType' || k === 'aggregate') {\r\n                continue;\r\n            }\r\n\r\n            if (translate[k]) {\r\n                k = translate[k];\r\n            }\r\n            if (Array.isArray(v)) {\r\n                for (let i = 0; i < v.length; i++) {\r\n                    const arrayObject = v[i];\r\n                    for (let k2 in arrayObject) {\r\n                        if (arrayObject.hasOwnProperty(k2)) {\r\n                            let v2 = arrayObject[k2];\r\n                            if (v2 !== undefined && v2 !== null && v2 !== '') {\r\n                                if (!this.props.presetMode && (k2 === 'chartType' || k2 === 'aggregate') && this.props.presetData[k2]) {\r\n                                    v2 = this.props.presetData[k2];\r\n                                }\r\n\r\n                                if (translateCurrentObject[k2]) {\r\n                                    k2 = translateCurrentObject[k2];\r\n                                }\r\n\r\n                                url.push(encodeURIComponent(k + '[' + i + '][' + k2 + ']') + '=' + encodeURIComponent(v2));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else if (v !== undefined && v !== null && v !== '') {\r\n                url.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\r\n            }\r\n        }*/\r\n        // If fast view mode\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        if (this.props.presetMode) {\r\n            delete presetData.chartType;\r\n            delete presetData.aggregate;\r\n        } else {\r\n            if (presetData.chartType) {\r\n                presetData.lines[0].chartType = presetData.chartType;\r\n            }\r\n            if (presetData.aggregate) {\r\n                presetData.lines[0].aggregate = presetData.aggregate;\r\n            }\r\n        }\r\n        url.push('data=' + encodeURIComponent(JSON.stringify(presetData)));\r\n        url.push('noLoader=true');\r\n\r\n        return url.join('&');\r\n    }\r\n\r\n    getUrl() {\r\n        const URL = (window.location.search || '').includes('dev=true') ? 'http://localhost:3000/' : 'chart/';\r\n        return URL + 'index.html#' + this.getUrlParameters();\r\n    }\r\n\r\n    getChartFrame() {\r\n        return <div style={{display: this.props.visible ? 'block' : 'none'}} className={!this.props.presetMode ? this.props.classes.heightWithoutToolbar : this.props.classes.height100}>\r\n            <ChartFrame src={this.getUrl()}\r\n        /></div>;\r\n    }\r\n\r\n    render() {\r\n        return <MuiThemeProvider theme={this.props.theme}>\r\n            <div className={this.props.classes.container}>\r\n                {this.renderToolbar()}\r\n                {this.getChartFrame()}\r\n            </div>\r\n        </MuiThemeProvider>\r\n    }\r\n}\r\n\r\nMainChart.propTypes = {\r\n    onChange: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool,\r\n    runningInstances: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    presetMode: PropTypes.bool,\r\n    selectedPresetId: PropTypes.string,\r\n    selectedChartId: PropTypes.string,\r\n    selectedChartInstance: PropTypes.string,\r\n    enablePresetMode: PropTypes.func,\r\n    createPreset: PropTypes.func,\r\n    theme: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(MainChart);\r\n","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport { withTheme } from '@material-ui/core/styles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport clsx from 'clsx';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n// icons\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdModeEdit as IconEdit} from 'react-icons/md';\r\nimport {RiFolderAddLine as IconFolderAdd} from 'react-icons/ri';\r\nimport {MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdCheck as IconCheck} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {FaScroll as IconScript} from 'react-icons/all';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport {MdMenu as IconMenuClosed} from 'react-icons/md';\r\nimport {MdArrowBack as IconMenuOpened} from 'react-icons/md';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport {BsFolderSymlink as IconMoveToFolder} from 'react-icons/bs';\r\nimport {AiOutlineAreaChart as IconChart} from 'react-icons/ai';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nimport 'react-splitter-layout/lib/index.css';\r\n\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport '@iobroker/adapter-react/index.css';\r\n\r\nimport SettingsEditor from './SettingsEditor';\r\nimport MainChart from './MainChart';\r\nimport getUrlQuery from './utils/getUrlQuery';\r\nimport DefaultPreset from './Components/DefaultPreset';\r\n\r\nconst LEVEL_PADDING = 16;\r\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        background: theme.palette.background.default,\r\n        color: theme.palette.text.primary,\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    },\r\n    leftMenuItem: {\r\n        width: '100%',\r\n    },\r\n    menuDiv: {\r\n        overflow: 'hidden',\r\n    },\r\n    splitterDivs: {\r\n        '&>div': {\r\n            overflow: 'hidden',\r\n            width: '100%',\r\n            height: '100%',\r\n        },\r\n        '& .layout-splitter': {\r\n            background: theme.type === 'dark' ? '#595858' : '#ccc;'\r\n        }\r\n    },\r\n    mainListDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    content: {\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: theme.palette.background.default,\r\n        position: 'relative'\r\n    },\r\n    menuDivWithoutMenu: {\r\n        '&>div:first-child': {\r\n            display: 'none'\r\n        },\r\n        '&>.layout-splitter': {\r\n            display: 'none'\r\n        },\r\n    },\r\n    progress: {\r\n        margin: 100\r\n    },\r\n    menuOpenCloseButton: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        borderRadius: '0 5px 5px 0',\r\n        top: 6,\r\n        paddingTop: 8,\r\n        cursor: 'pointer',\r\n        zIndex: 1,\r\n        height: 25,\r\n        width: 20,\r\n        background: theme.palette.secondary.main,\r\n        color: theme.palette.primary.main,\r\n        paddingLeft: 3,\r\n        '&:hover': {\r\n            color: 'white'\r\n        }\r\n    },\r\n    mainToolbar: {\r\n        background: theme.palette.primary.main,\r\n    },\r\n    noGutters: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n    },\r\n    heightMinusToolbar: {\r\n        height: 'calc(100% - 38px)',\r\n        overflow: 'auto'\r\n    },\r\n    itemIconFolder: {\r\n        cursor: 'pointer'\r\n    },\r\n    buttonsContainer: {\r\n        '& button': {\r\n            whiteSpace: 'nowrap'\r\n        }\r\n    },\r\n    itemIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.primary.light : theme.palette.primary.dark\r\n    },\r\n    folderIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.secondary.dark : theme.palette.secondary.light\r\n    },\r\n    width100: {\r\n        width: '100%',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    itemIconRoot: {\r\n        minWidth: 24,\r\n    },\r\n    listItemSubTitle: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.7,\r\n        fontStyle: 'italic'\r\n    }\r\n});\r\n\r\nfunction getFolderPrefix(presetId) {\r\n    let result = presetId.split('.');\r\n    result.shift();\r\n    result.shift();\r\n    result.pop();\r\n    result = result.join('.');\r\n    return result;\r\n}\r\n\r\nfunction getFolderList(folder) {\r\n    let result = [];\r\n    result.push(folder);\r\n    Object.values(folder.subFolders).forEach(subFolder =>\r\n        result = result.concat(getFolderList(subFolder)));\r\n\r\n    return result;\r\n}\r\n\r\nfunction sortObj(a, b) {\r\n    const aid = typeof a === 'object' ? a._id.replace('system.adapter.', '') : a.replace('system.adapter.', '');\r\n    const bid = typeof b === 'object' ? b._id.replace('system.adapter.', '') : b.replace('system.adapter.', '');\r\n    if (aid > bid) {\r\n        return 1;\r\n    } else if (aid < bid) {\r\n        return -1;\r\n    } else {\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        let settings = {socket: {}};\r\n        const query = getUrlQuery();\r\n        settings.socket.port = query.port || (parseInt(window.location.port) >= 3000 && parseInt(window.location.port) <= 3020 ? 8081 : window.location.port);\r\n        settings.socket.host = query.host || window.location.hostname;\r\n        settings.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'es': require('./i18n/es'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'nl': require('./i18n/nl'),\r\n            'pl': require('./i18n/pl'),\r\n            'pt': require('./i18n/pt'),\r\n            'ru': require('./i18n/ru'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        super(props, settings);\r\n        this.objects = {};\r\n    }\r\n\r\n    onConnectionReady() {\r\n        let opened;\r\n        try {\r\n            opened = JSON.parse(window.localStorage.getItem('Presets.opened')) || [];\r\n        } catch (e) {\r\n            opened = [];\r\n        }\r\n        let chartsOpened;\r\n        try {\r\n            chartsOpened = JSON.parse(window.localStorage.getItem('Charts.opened')) || {};\r\n        } catch (e) {\r\n            chartsOpened = {};\r\n        }\r\n\r\n        const newState = {\r\n            ready: false,\r\n            selectedPresetId: window.localStorage.getItem('Presets.selectedPresetId') || '',\r\n            opened,\r\n            presets: {},\r\n            folders: null,\r\n            presetMode: false,\r\n            chartFolders: chartsOpened,\r\n            search: null,\r\n            addFolderDialog: null,\r\n            addFolderDialogTitle: null,\r\n            editFolderDialog: null,\r\n            editFolderDialogTitle: null,\r\n            changingPreset: '',\r\n            showSearch: null,\r\n            instances: [],\r\n            selectedChartId: null,\r\n            selectedPresetChanged: false,\r\n            deleteDialog: null,\r\n            moveDialog: null,\r\n            newFolder: '',\r\n            selectedPresetData: null,\r\n            loadedPresetData: null,\r\n\r\n            progress: 0,\r\n\r\n            resizing: false,\r\n            selected: null,\r\n            menuOpened: window.localStorage.getItem('App.menuOpened') !== 'false',\r\n            menuSelectId: '',\r\n            logHorzLayout: window.localStorage.getItem('App.logHorzLayout') === 'true',\r\n            confirm: '',\r\n            searchText: '',\r\n        };\r\n\r\n        this.settingsSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.settingsSize')) || 150 : 150;\r\n        this.menuSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.menuSize')) || 500 : 500;\r\n\r\n        this.socket.getSystemConfig()\r\n            .then(systemConfig => {\r\n                newState.systemConfig = systemConfig;\r\n                newState.presetData = DefaultPreset.getDefaultPreset(systemConfig);\r\n                this.setState(newState);\r\n                return Promise.resolve();\r\n            })\r\n            .then(() => this.getAllData())\r\n            .then(() => this.refreshData())\r\n            .then(() => {\r\n                if (window.localStorage.getItem('App.selectedPresetId')) {\r\n                    this.loadPreset(window.localStorage.getItem('App.selectedPresetId'))\r\n                } else if (window.localStorage.getItem('App.selectedChartId')) {\r\n                    this.loadChart(window.localStorage.getItem('App.selectedChartId'), window.localStorage.getItem('App.selectedChartInstance'))\r\n                }\r\n            })\r\n            .catch(e => this.showError(e));\r\n    }\r\n\r\n    getData() {\r\n        let presets = {};\r\n        return new Promise((resolve, reject) =>\r\n            this.socket._socket.emit('getObjectView', 'chart', 'chart', {\r\n                startkey: this.adapterName + '.',\r\n                endkey: this.adapterName + '.\\u9999'\r\n            }, (err, res) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    res && res.rows && res.rows.forEach(preset => presets[preset.value._id] = preset.value);\r\n                    resolve({presets, folders: this.buildTree(presets)});\r\n                }\r\n            }));\r\n    }\r\n\r\n    refreshData(changingPreset) {\r\n        return new Promise(resolve => {\r\n            if (changingPreset) {\r\n                this.setState({changingPreset}, () => resolve());\r\n            } else {\r\n                //this.setState({ready: false}, () => resolve());\r\n                resolve();\r\n            }\r\n        })\r\n            .then(() => this.getData())\r\n            .then(newState => {\r\n                newState.ready = true;\r\n                newState.changingPreset = '';\r\n                //newState.selectedPresetChanged = false;\r\n\r\n                // Fill missing data\r\n                Object.keys(newState.presets).forEach(id => {\r\n                    const presetObj = newState.presets[id];\r\n                    presetObj.common = presetObj.common || {};\r\n                    presetObj.native = presetObj.native || {};\r\n                });\r\n\r\n                if ((newState.selectedPresetId || this.state.selectedPresetId) &&\r\n                    newState.presets[newState.selectedPresetId || this.state.selectedPresetId]) {\r\n                    newState.selectedPresetData = JSON.parse(JSON.stringify(newState.presets[newState.selectedPresetId || this.state.selectedPresetId]));\r\n                } else {\r\n                    newState.selectedPresetData = null;\r\n                }\r\n\r\n                this.setState(newState);\r\n            });\r\n    }\r\n\r\n    getObjects(ids, cb, result) {\r\n        result = result || {};\r\n        if (!ids || !ids.length) {\r\n            cb(result);\r\n        } else {\r\n            const id = ids.shift();\r\n            this.socket.getObject(id)\r\n                .catch(e => {\r\n                    console.error('Cannot read ' + id + ': ' + e);\r\n                    return null;\r\n                })\r\n                .then(obj => {\r\n                    if (obj) {\r\n                        result[id] = obj;\r\n                    }\r\n                    setTimeout(() => this.getObjects(ids, cb, result), 0);\r\n                });\r\n        }\r\n    }\r\n\r\n    getAllCustoms(instances) {\r\n        return new Promise(resolve =>\r\n            this.socket._socket.emit('getObjectView', 'custom', 'state', {}, (err, objs) => {\r\n                // console.log(objs);\r\n                const ids = ((objs && objs.rows) || []).map(item => item.id);\r\n                this.getObjects(ids, objs => {\r\n                    const ids = instances.map(obj => obj._id.substring('system.adapter.'.length));\r\n                    const _instances = {};\r\n                    Object.values(objs).forEach(obj => {\r\n                        const id = obj && obj.common && obj.common.custom && ids.find(id => Object.keys(obj.common.custom).includes(id));\r\n                        if (id) {\r\n                            _instances[id] = _instances[id] || {_id: 'system.adapter.' + id, enabledDP: {}};\r\n                            _instances[id].enabledDP[obj._id] = obj;\r\n                        }\r\n                    });\r\n\r\n                    let chartFolders = {};\r\n\r\n                    const insts = Object.values(_instances).map(obj => {\r\n                        const enabledDP = {};\r\n                        Object.keys(obj.enabledDP).forEach(id => {\r\n                            enabledDP[id] = obj.enabledDP[id];\r\n                            enabledDP[id].group = obj._id;\r\n                        });\r\n                        obj.enabledDP = enabledDP;\r\n                        chartFolders[obj._id] = typeof this.state.chartFolders[obj._id] !== 'undefined' ? this.state.chartFolders[obj._id] : true;\r\n                        return obj;\r\n                    });\r\n\r\n                    insts.sort(sortObj);\r\n\r\n                    let selectedChartId = Object.keys(insts).length && Object.keys(insts[0].enabledDP).length ? Object.keys(insts[0].enabledDP)[0] : null;\r\n\r\n                    this.setState({instances: insts, chartFolders: chartFolders}, () => {\r\n                        if (selectedChartId && !window.localStorage.getItem('App.selectedPresetId') && !window.localStorage.getItem('App.selectedChartId')) {\r\n                            this.loadChart(selectedChartId, insts[0]._id);\r\n                        }\r\n                    });\r\n\r\n                    // console.log(insts);\r\n                    resolve();\r\n                });\r\n            }));\r\n    }\r\n\r\n    getAllData() {\r\n        return this.socket.getAdapterInstances('')\r\n            .then(instances => instances.filter(entry => entry && entry.common && entry.common.getHistory && entry.common.enabled))\r\n            .then(instances => this.getAllCustoms(instances))\r\n    }\r\n\r\n    toggleLogLayout() {\r\n        window.localStorage && window.localStorage.setItem('App.logHorzLayout', this.state.logHorzLayout ? 'false' : 'true');\r\n        this.setState({logHorzLayout: !this.state.logHorzLayout});\r\n    }\r\n\r\n    buildTree(presets) {\r\n        // console.log(presets);\r\n        presets = Object.values(presets);\r\n\r\n        let folders = {subFolders: {}, presets: {}, id: '', prefix: ''};\r\n\r\n        // create missing folders\r\n        presets.forEach((preset) => {\r\n            let id = preset._id;\r\n            const parts = id.split('.');\r\n            parts.shift();\r\n            parts.shift();\r\n            let currentFolder = folders;\r\n            let prefix = '';\r\n            for (let i = 0; i < parts.length - 1; i++) {\r\n                if (prefix) {\r\n                    prefix = prefix + '.';\r\n                }\r\n                prefix = prefix + parts[i];\r\n                if (!currentFolder.subFolders[parts[i]]) {\r\n                    currentFolder.subFolders[parts[i]] = {\r\n                        subFolders: {},\r\n                        presets: {},\r\n                        id: parts[i],\r\n                        prefix,\r\n                    }\r\n                }\r\n                currentFolder = currentFolder.subFolders[parts[i]];\r\n            }\r\n            currentFolder.presets[id] = preset;\r\n        });\r\n\r\n        return folders;\r\n    }\r\n\r\n    findFolder(parent, folder) {\r\n        if (parent.prefix === folder.prefix) {\r\n            return parent;\r\n        }\r\n        for (let index in parent.subFolders) {\r\n            let result = this.findFolder(parent.subFolders[index], folder);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    addFolder(parentFolder, id) {\r\n        let folders = JSON.parse(JSON.stringify(this.state.folders));\r\n        let _parentFolder = this.findFolder(folders, parentFolder);\r\n\r\n        let opened = JSON.parse(JSON.stringify(this.state.opened));\r\n\r\n        _parentFolder.subFolders[id] = {\r\n            presets: {},\r\n            subFolders: {},\r\n            id,\r\n            prefix: _parentFolder.prefix ? _parentFolder.prefix + '.' + id : id\r\n        };\r\n\r\n        opened.push(id);\r\n\r\n        this.setState({folders, opened});\r\n    }\r\n\r\n    addPresetToFolderPrefix = (preset, folderPrefix, noRefresh) => {\r\n        let oldId = preset._id;\r\n        let presetId = preset._id.split('.').pop();\r\n        preset._id = this.adapterName + '.0.' + folderPrefix + (folderPrefix ? '.' : '') + presetId;\r\n\r\n        return this.socket.delObject(oldId)\r\n            .then(() => {\r\n                console.log('Deleted ' + oldId);\r\n                return this.socket.setObject(preset._id, preset)\r\n            })\r\n            .then(() => {\r\n                console.log('Set new ID: ' + preset._id);\r\n                return !noRefresh && this.refreshData(presetId)\r\n            })\r\n            .catch(e => this.showError(e));\r\n    };\r\n\r\n    renameFolder(folder, newName) {\r\n        return new Promise(resolve => this.setState({changingPreset: folder}, () => resolve()))\r\n            .then(() => {\r\n                let newSelectedId;\r\n                let pos;\r\n                // if selected folder opened, replace its ID in this.state.opened\r\n                if ((pos = this.state.opened.indexOf(folder.prefix)) !== -1) {\r\n                    const opened = [...this.state.opened];\r\n                    opened.splice(pos, 1);\r\n                    opened.push(newName);\r\n                    opened.sort();\r\n                    this.setState({opened});\r\n                }\r\n\r\n                let prefix = folder.prefix.split('.');\r\n                prefix[prefix.length - 1] = newName;\r\n                prefix = prefix.join('.');\r\n\r\n                if (Object.keys(folder.presets).find(id => id === this.state.selectedPresetId)) {\r\n                    newSelectedId = 'preset.0.' + prefix + '.' + this.state.selectedPresetId.split('.').pop();\r\n                }\r\n\r\n                const promises = Object.keys(folder.presets).map(presetId =>\r\n                    this.addPresetToFolderPrefix(folder.presets[presetId], prefix, true));\r\n\r\n                return Promise.all(promises)\r\n                    .then(() => this.refreshData(folder))\r\n                    .then(() => newSelectedId && this.setState({selectedPresetId: newSelectedId}));\r\n            });\r\n    }\r\n\r\n    isNameUnique(name) {\r\n        return !Object.keys(this.state.presets).find(id => this.state.presets[id].common.name === name);\r\n    }\r\n\r\n    getNewPresetName(prefix) {\r\n        let index = prefix ? '' : '1';\r\n        prefix = prefix || 'preset_';\r\n\r\n        while(!this.isNameUnique(prefix + index)) {\r\n            if (!index) {\r\n                index = 2;\r\n            } else {\r\n                index++;\r\n            }\r\n        }\r\n\r\n        return prefix + index;\r\n    };\r\n\r\n    createPreset(name, parentId, historyInstance, stateId) {\r\n        return new Promise(resolve => {\r\n            if (stateId) {\r\n                return this.socket.getObject(stateId)\r\n                    .then(obj => resolve(obj));\r\n            } else {\r\n                resolve(null);\r\n            }\r\n        })\r\n            .then(obj => {\r\n                name = (name || (obj && obj.common && obj.common.name ? Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) : '')).trim();\r\n\r\n                name = this.getNewPresetName(name);\r\n\r\n                let template = {\r\n                    common: {\r\n                        name,\r\n                    },\r\n                    native: {\r\n                        url: '',\r\n                        data: DefaultPreset.getDefaultPreset(this.state.systemConfig, historyInstance, obj, I18n.getLanguage()),\r\n                    },\r\n                    type: 'chart'\r\n                };\r\n\r\n                let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\r\n\r\n                this.setState({changingPreset: id}, () =>\r\n                    this.socket.setObject(id, template)\r\n                        .then(() => this.refreshData(id))\r\n                        .then(() => this.loadPreset(id))\r\n                        .catch(e => this.showError(e))\r\n                );\r\n            });\r\n    };\r\n\r\n    deletePreset = (id) => {\r\n        return this.socket.delObject(id)\r\n            .then(() => {\r\n                window.localStorage.setItem('App.selectedPresetId', '');\r\n\r\n                this.setState({\r\n                    selectedPresetId: null,\r\n                    presetData: {},\r\n                    presetMode: false,\r\n                    selectedPresetChanged: false,\r\n                });\r\n\r\n                return this.refreshData(id);\r\n            })\r\n            .catch(e => this.showError(e));\r\n    };\r\n\r\n    toggleChartFolder = id => {\r\n        const chartFolders = JSON.parse(JSON.stringify(this.state.chartFolders));\r\n        chartFolders[id] = !chartFolders[id];\r\n        window.localStorage.setItem('Charts.opened', JSON.stringify(chartFolders));\r\n        const newState = {chartFolders};\r\n\r\n        if (this.state.selectedChartId) {\r\n            let selectedInstance = this.state.instances.find(instance =>\r\n                instance.enabledDP[this.state.selectedChartId]);\r\n\r\n            if (selectedInstance._id === id) {\r\n                let openedChartFolder = null;\r\n                for (let k in this.state.chartFolders) {\r\n                    if (this.state.chartFolders.hasOwnProperty(k) && k !== id && this.state.chartFolders[k]) {\r\n                        openedChartFolder = k;\r\n                        break;\r\n                    }\r\n                }\r\n                if (openedChartFolder) {\r\n                    let openedChart = this.state.instances.find(instance =>\r\n                        instance._id === openedChartFolder);\r\n\r\n                    openedChart = Object.values(openedChart.enabledDP)[0]._id;\r\n                    this.loadChart(openedChart);\r\n                } else {\r\n                    newState.presetData = {};\r\n                    newState.selectedChartId = null;\r\n                    newState.selectedChartInstance = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.setState(newState);\r\n    };\r\n\r\n    renderSimpleHistory() {\r\n        let gIndex = 0;\r\n        return <Droppable droppableId=\"Lines\" isDropDisabled={true}>\r\n            {(provided, snapshot) =>\r\n                <div ref={provided.innerRef}>\r\n                    <List className={ this.props.classes.scroll }>\r\n                        {this.state.instances.map((group, index) => {\r\n                            let opened = this.state.chartFolders[group._id];\r\n                            let ids = null;\r\n                            if (opened) {\r\n                                ids = Object.keys(group.enabledDP)\r\n                                    .filter(id => !this.state.search || id.includes(this.state.search));\r\n                                ids.sort(sortObj);\r\n                            }\r\n\r\n                            return <React.Fragment key={index}>\r\n                                <ListItem\r\n                                    key={index}\r\n                                    classes={ {gutters: this.props.classes.noGutters} }\r\n                                    className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                                >\r\n                                    <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(group._id) }>{ opened ?\r\n                                        <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                                        <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                                    }</ListItemIcon>\r\n                                    <ListItemText primary={group._id.replace('system.adapter.', '')}/>\r\n                                    <ListItemSecondaryAction>\r\n                                        {opened ? <IconButton\r\n                                            onClick={() => this.setState({showAddStateDialog: group._id})}\r\n                                            title={ I18n.t('Enable logging for new state') }\r\n                                        ><IconAdd/></IconButton> : null}\r\n                                        <IconButton onClick={ () => this.toggleChartFolder(group._id) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                                            { opened ? <IconCollapse/> : <IconExpand/> }\r\n                                        </IconButton>\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                                {\r\n                                    ids ? ids.map(id=>\r\n                                            <Draggable\r\n                                                isDragDisabled={!this.state.presetMode}\r\n                                                key={group._id + '_' + id}\r\n                                                draggableId={group._id + '***' + id}\r\n                                                index={gIndex++}>\r\n                                                {(provided, snapshot) =>\r\n                                                    <>\r\n                                                        <div\r\n                                                            ref={provided.innerRef}\r\n                                                            {...provided.draggableProps}\r\n                                                            {...provided.dragHandleProps}\r\n                                                            style={provided.draggableProps.style}\r\n                                                            className=\"drag-items\"\r\n                                                            >\r\n                                                            <ListItem\r\n                                                                key={group._id + '_' + id}\r\n                                                                button\r\n                                                                style={{paddingLeft: LEVEL_PADDING * 2 + this.props.theme.spacing(1)}}\r\n                                                                selected={this.state.selectedChartId === id}\r\n                                                                onClick={() => this.state.presetMode && this.state.selectedPresetChanged ?\r\n                                                                    this.setState({\r\n                                                                        loadChartDialog: id,\r\n                                                                        loadChartDialogInstance: group._id\r\n                                                                    }) :\r\n                                                                    this.loadChart(id, group._id, group.enabledDP[id])\r\n                                                                }\r\n                                                            >\r\n                                                                <ListItemIcon classes={{root: this.props.classes.itemIconRoot}}><IconChart\r\n                                                                    className={this.props.classes.itemIcon}/></ListItemIcon>\r\n                                                                <ListItemText\r\n                                                                    classes={{\r\n                                                                        primary: this.props.classes.listItemTitle,\r\n                                                                        secondary: this.props.classes.listItemSubTitle\r\n                                                                    }}\r\n                                                                    primary={Utils.getObjectNameFromObj(group.enabledDP[id], null, {language: I18n.getLanguage()})}\r\n                                                                    secondary={id.replace('system.adapter.', '')}\r\n                                                                />\r\n                                                            </ListItem>\r\n\r\n                                                        </div>\r\n                                                        {snapshot.isDragging ?\r\n                                                            <div className=\"react-beatiful-dnd-copy\">\r\n                                                                <ListItem\r\n                                                                    key={group._id + '_' + id + 'copy'}\r\n                                                                    style={{paddingLeft: LEVEL_PADDING * 2 + this.props.theme.spacing(1)}}\r\n                                                                    selected={this.state.selectedChartId === id}\r\n                                                                >\r\n                                                                    <ListItemIcon classes={{root: this.props.classes.itemIconRoot}}>\r\n                                                                        <IconChart className={this.props.classes.itemIcon}/>\r\n                                                                    </ListItemIcon>\r\n                                                                    <ListItemText\r\n                                                                        classes={{\r\n                                                                            primary: this.props.classes.listItemTitle,\r\n                                                                            secondary: this.props.classes.listItemSubTitle\r\n                                                                        }}\r\n                                                                        primary={Utils.getObjectNameFromObj(group.enabledDP[id], null, {language: I18n.getLanguage()})}\r\n                                                                        secondary={id.replace('system.adapter.', '')}\r\n                                                                    />\r\n                                                                </ListItem>\r\n                                                            </div>: null}\r\n                                                        </>\r\n                                                }\r\n                                            </Draggable>\r\n                                    ) : null\r\n                                }\r\n                            </React.Fragment>\r\n                            }\r\n                        )}\r\n                        {provided.placeholder}\r\n                    </List>\r\n                </div> }\r\n        </Droppable>;\r\n    }\r\n\r\n    renderTreePreset = (item, level, anySubFolders) => {\r\n        const preset = this.state.presets[item._id];\r\n        if (!preset || (this.state.search && !item.common.name.includes(this.state.search))) {\r\n            return null;\r\n        }\r\n\r\n        level = level || 0;\r\n\r\n        return <ListItem\r\n            classes={ {gutters: this.props.classes.noGutters} }\r\n            style={ {paddingLeft: level * LEVEL_PADDING } }\r\n            key={ item._id }\r\n            selected={item._id === this.state.selectedPresetId}\r\n            button\r\n            onClick={ () =>\r\n                this.state.presetMode && this.state.selectedPresetChanged ?\r\n                this.setState({loadPresetDialog: preset._id}) :\r\n                this.loadPreset(preset._id)\r\n            }>\r\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.itemIconPreset)} }><IconScript className={ this.props.classes.itemIcon }/></ListItemIcon>\r\n            <ListItemText\r\n                classes={ {primary: this.props.classes.listItemTitle, secondary: this.props.classes.listItemSubTitle} }\r\n                primary={ <>\r\n                    { Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}) }\r\n                </>}\r\n                secondary={ Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}, true) }\r\n                />\r\n            <ListItemSecondaryAction>\r\n                {this.state.changingPreset === preset._id ?\r\n                    <CircularProgress size={ 24 }/>\r\n                    :\r\n                    <>\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"Rename\"\r\n                            title={ I18n.t('Rename') }\r\n                            onClick={ (e) => {\r\n                                e.stopPropagation();\r\n                                this.setState({renameDialog: preset._id, renamePresetDialogTitle: item.common.name})\r\n                            }}\r\n                        >\r\n                            <IconEdit/>\r\n                        </IconButton>\r\n                        {level || anySubFolders ?\r\n                            <IconButton size=\"small\" aria-label=\"Move to folder\" title={ I18n.t('Move to folder') } onClick={ () => this.setState({moveDialog: preset._id, newFolder: getFolderPrefix(preset._id)}) }><IconMoveToFolder/></IconButton>\r\n                            :\r\n                            null\r\n                        }\r\n                        <IconButton size=\"small\" aria-label=\"Delete\" title={ I18n.t('Delete') } onClick={ () => this.setState({deleteDialog: preset._id}) }><IconDelete/></IconButton>\r\n                    </>\r\n                }\r\n            </ListItemSecondaryAction>\r\n        </ListItem>;\r\n    };\r\n\r\n    toggleFolder(folder) {\r\n        const opened = [...this.state.opened];\r\n        const pos = opened.indexOf(folder.prefix);\r\n        if (pos === -1) {\r\n            opened.push(folder.prefix);\r\n        } else {\r\n            opened.splice(pos, 1);\r\n\r\n            // If active preset is inside this folder select the first preset\r\n            if (Object.keys(folder.presets).includes(this.state.selectedPresetId)) {\r\n                // To do ask question\r\n                if (this.state.selectedPresetChanged) {\r\n                    this.setState({closeFolderDialog: folder});\r\n                } else {\r\n                    this.setState({\r\n                        selectedPresetId: null,\r\n                        presetData: {},\r\n                        presetMode: false,\r\n                        selectedPresetChanged: false,\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        window.localStorage.setItem('Presets.opened', JSON.stringify(opened));\r\n\r\n        this.setState({opened});\r\n    }\r\n\r\n    renderTree(parent, level) {\r\n        let result = [];\r\n        level = level || 0;\r\n        let opened = this.state.opened ? this.state.opened.includes(parent.prefix) : false;\r\n\r\n        // Show folder item\r\n        parent && parent.id && result.push(<ListItem\r\n            key={ parent.prefix }\r\n            classes={ {gutters: this.props.classes.noGutters } }\r\n            className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n            style={ {paddingLeft: level * LEVEL_PADDING} }\r\n        >\r\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.folderIconPreset)} } onClick={ () => this.toggleFolder(parent) }>{ opened ?\r\n                <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n            }</ListItemIcon>\r\n            <ListItemText>{ parent.id }\r\n                <IconButton onClick={ () => this.setState({editFolderDialog: parent, editFolderDialogTitle: parent.id, editFolderDialogTitleOrigin: parent.id}) }\r\n                            title={ I18n.t('Edit folder name') }\r\n                ><IconEdit/></IconButton>\r\n            </ListItemText>\r\n            <ListItemSecondaryAction>\r\n                {parent && parent.id && opened ? <IconButton\r\n                    onClick={() => this.createPreset(null, parent.id) }\r\n                    title={ I18n.t('Create new preset') }\r\n                ><IconAdd/></IconButton> : null}\r\n                <IconButton onClick={ () => this.toggleFolder(parent) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                    { opened ? <IconCollapse/> : <IconExpand/> }\r\n                </IconButton>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>);\r\n\r\n        if (parent && (opened || !parent.id)) { // root cannot be closed and have id = ''\r\n            const values = Object.values(parent.presets);\r\n            const subFolders = Object.values(parent.subFolders);\r\n\r\n            // add first sub-folders\r\n            result.push(subFolders.sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0)).map(subFolder =>\r\n                this.renderTree(subFolder, level + 1)));\r\n\r\n            // Add as second the presets\r\n            result.push(<ListItem\r\n                key={ 'items_' + parent.prefix }\r\n                classes={ {gutters: this.props.classes.noGutters} }\r\n                className={ this.props.classes.width100 }>\r\n                <List\r\n                    className={ this.props.classes.list }\r\n                    classes={ {root: clsx(this.props.classes.leftMenuItem, this.props.classes.noGutters)} }\r\n                    style={ {paddingLeft: level * LEVEL_PADDING} }\r\n                >\r\n                    { values.length ?\r\n                        values.sort((a, b) => a._id > b._id ? 1 : (a._id < b._id ? -1 : 0)).map(preset => this.renderTreePreset(preset, level, subFolders.length))\r\n                        :\r\n                        (!subFolders.length ? <ListItem classes={ {gutters: this.props.classes.noGutters} }><ListItemText className={ this.props.classes.folderItem}>{ I18n.t('No presets created yet')}</ListItemText></ListItem> : '')\r\n                    }\r\n                </List>\r\n            </ListItem>);\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    savePreset = id => {\r\n        let preset = JSON.parse(JSON.stringify(this.state.presets[id]));\r\n        preset.native.data = JSON.parse(JSON.stringify(this.state.presetData));\r\n        this.setState({loadedPresetData: this.state.presetData, selectedPresetChanged: false});\r\n        this.socket.setObject(id, preset)\r\n            .then(() => this.refreshData())\r\n            .catch(e => this.showError(e));\r\n    };\r\n\r\n    renamePreset(id, newTitle) {\r\n        let preset = JSON.parse(JSON.stringify(this.state.presets[id]));\r\n        preset.common.name = newTitle;\r\n        this.socket.delObject(id);\r\n        let newId = id.split('.');\r\n        newId.splice(-1, 1);\r\n        newId.push(newTitle.replace(FORBIDDEN_CHARS, '_').trim());\r\n        newId = newId.join('.');\r\n        this.socket.setObject(newId, preset)\r\n            .then(() => this.refreshData())\r\n            .then(() => {\r\n                if (this.state.selectedPresetId === id) {\r\n                    this.loadPreset(newId);\r\n                }\r\n            })\r\n            .catch(e => this.showError(e));\r\n    }\r\n\r\n    loadPreset(id) {\r\n        if (!this.state.presets[id]) {\r\n            return;\r\n        }\r\n        let preset = JSON.parse(JSON.stringify(this.state.presets[id]));\r\n\r\n        window.localStorage.setItem('App.selectedPresetId', id);\r\n        window.localStorage.setItem('App.selectedChartId', '');\r\n        window.localStorage.setItem('App.selectedChartInstance', '');\r\n\r\n        this.setState({\r\n            presetData: preset.native.data,\r\n            selectedPresetData: preset.native.data,\r\n            selectedPresetChanged: false,\r\n            presetMode: true,\r\n            selectedChartId: null,\r\n            selectedChartInstance: null,\r\n            selectedPresetId: id\r\n        });\r\n    }\r\n\r\n    loadChartParam(name, defaultValue) {\r\n        return window.localStorage.getItem('Chart.' + name) ? window.localStorage.getItem('Chart.' + name) : defaultValue;\r\n    }\r\n\r\n    loadChart(id, instance) {\r\n        const instances = this.state.instances;\r\n        const inst = instances.find(item => item._id === instance);\r\n        const obj = inst.enabledDP[id];\r\n\r\n        const line = DefaultPreset.getDefaultLine(this.state.systemConfig, instance, obj, I18n.getLanguage());\r\n\r\n        let presetData = {\r\n            marks: [],\r\n            lines: [line/*{\r\n                id,\r\n                instance,\r\n                offset: 0,\r\n                aggregate: 'minmax',\r\n                color: '#1868a8',\r\n                chartType: 'auto',\r\n                thickness: 2,\r\n                shadowsize: 0,\r\n                afterComma: 0,\r\n                ignoreNull: false,\r\n            }*/],\r\n            zoom: true,\r\n            //axeX: 'lines',\r\n            //axeY: 'inside',\r\n            hoverDetail: true,\r\n            aggregate: this.loadChartParam('aggregate', 'minmax'),\r\n            chartType: this.loadChartParam('chartType', 'auto'),\r\n            live: this.loadChartParam('live', '30'),\r\n            timeType: this.loadChartParam('timeType', 'relative'),\r\n            aggregateType: this.loadChartParam('aggregateType', 'step'),\r\n            aggregateSpan: this.loadChartParam('aggregateSpan', 300),\r\n            ticks: this.loadChartParam('ticks', ''),\r\n            range: this.loadChartParam('range', 1440),\r\n            relativeEnd: this.loadChartParam('relativeEnd', 'now'),\r\n            start: this.loadChartParam('start', ''),\r\n            end: this.loadChartParam('end', ''),\r\n            start_time: this.loadChartParam('start_time', ''),\r\n            end_time: this.loadChartParam('end_time', ''),\r\n            noBorder: 'noborder',\r\n            //bg: '#00000000',\r\n            //timeFormat: '',\r\n            //useComma: undefined,\r\n            noedit: false,\r\n            animation: 0\r\n        };\r\n\r\n        window.localStorage.setItem('App.selectedChartId', id);\r\n        window.localStorage.setItem('App.selectedChartInstance', instance);\r\n        window.localStorage.setItem('App.selectedPresetId', '');\r\n\r\n        this.setState({\r\n            presetData,\r\n            presetMode: false,\r\n            selectedChartId: id,\r\n            selectedChartInstance: instance,\r\n            selectedPresetId: null,\r\n            selectedPresetChanged: false\r\n        });\r\n    }\r\n\r\n    enablePresetMode = () => {\r\n        this.setState({presetMode: true, selectedChartId: null, selectedChartInstance: null});\r\n    };\r\n\r\n    renderListToolbar() {\r\n        return <Toolbar key=\"toolbar\" variant=\"dense\" className={ this.props.classes.mainToolbar }>\r\n                <IconButton\r\n                    onClick={ () => this.createPreset() }\r\n                    title={ I18n.t('Create new preset') }\r\n                ><IconAdd/></IconButton>\r\n\r\n                <IconButton\r\n                    onClick={ () => this.setState({addFolderDialog: this.state.folders, addFolderDialogTitle: ''}) }\r\n                    title={ I18n.t('Create new folder') }\r\n                ><IconFolderAdd/></IconButton>\r\n\r\n                <span className={this.props.classes.right}>\r\n                                            <IconButton\r\n                                                onClick={() =>\r\n                                                    this.setState({showSearch: !this.state.showSearch, search: ''})\r\n                                                }>\r\n                                                <SearchIcon/>\r\n                                            </IconButton>\r\n                                        </span>\r\n                {this.state.showSearch ?\r\n                    <TextField\r\n                        value={ this.state.search }\r\n                        className={ this.props.classes.textInput }\r\n                        onChange={ e => this.setState({search: e.target.value}) }\r\n                        InputProps={{\r\n                            endAdornment: this.state.search ?\r\n                                <IconButton\r\n                                    onClick={() => this.setState({ search: '' })}>\r\n                                    <ClearIcon />\r\n                                </IconButton>\r\n                             : undefined,\r\n                        }}\r\n                    /> : null\r\n                }\r\n            </Toolbar>;\r\n    }\r\n\r\n    renderAddFolderDialog() {\r\n        return this.state.addFolderDialog ?\r\n            <Dialog\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={ !!this.state.addFolderDialog }\r\n                onClose={ () => this.setState({addFolderDialog: null}) }\r\n            >\r\n                <DialogTitle>{I18n.t('Create folder')}</DialogTitle>\r\n                <DialogContent className={ this.props.classes.p }>\r\n                    <TextField\r\n                        fullWidth={true}\r\n                        label={ I18n.t('Title') }\r\n                        value={ this.state.addFolderDialogTitle }\r\n                        onChange={ e => this.setState({addFolderDialogTitle: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()})}\r\n                        onKeyPress={e => {\r\n                            if (this.state.addFolderDialogTitle && e.which === 13) {\r\n                                this.addFolder(this.state.addFolderDialog, this.state.addFolderDialogTitle);\r\n                                this.setState({addFolderDialog: null});\r\n                            }\r\n                        }}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={ () => this.setState({addFolderDialog: null}) }>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" disabled={!this.state.addFolderDialogTitle || Object.keys(this.state.folders.subFolders).find(name => name === this.state.addFolderDialogTitle)} onClick={() => {\r\n                        this.addFolder(this.state.addFolderDialog, this.state.addFolderDialogTitle);\r\n                        this.setState({addFolderDialog: null});\r\n                    }} color=\"primary\" autoFocus>\r\n                        <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                        {I18n.t('Create')}\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    }\r\n\r\n    renderRenameFolderDialog() {\r\n        const isUnique = !Object.keys(this.state.folders.subFolders).find(folder => folder.id === this.state.editFolderDialogTitle);\r\n\r\n        return this.state.editFolderDialog ? <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ !!this.state.editFolderDialog }\r\n            onClose={ () => this.setState({editFolderDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Edit folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    fullWidth={true}\r\n                    label={ I18n.t('Title') }\r\n                    value={ this.state.editFolderDialogTitle }\r\n                    onKeyPress={e => {\r\n                        if (this.state.editFolderDialogTitle && e.which === 13) {\r\n                            this.renameFolder(this.state.editFolderDialog, this.state.editFolderDialogTitle)\r\n                                .then(() => this.setState({editFolderDialog: null}));\r\n                        }\r\n                    }}\r\n                    onChange={ e => this.setState({editFolderDialogTitle: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()}) }/>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({editFolderDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.editFolderDialogTitle || this.state.editFolderDialogTitleOrigin === this.state.editFolderDialogTitle || !isUnique}\r\n                    onClick={ () => {\r\n                        this.renameFolder(this.state.editFolderDialog, this.state.editFolderDialogTitle)\r\n                            .then(() => this.setState({editFolderDialog: null}));\r\n                    }}\r\n                    color=\"primary\"\r\n                    autoFocus\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderMoveDialog() {\r\n        if (!this.state.moveDialog) {\r\n            return null;\r\n        }\r\n\r\n        const newFolder = this.state.newFolder === '__root__' ? '' : this.state.newFolder;\r\n        const presetId = this.state.moveDialog;\r\n        const newId = 'preset.0.' + newFolder + (newFolder ? '.' : '') + presetId;\r\n\r\n        const isIdUnique = !Object.keys(this.state.presets).find(id => id === newId);\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"moveDialog\"\r\n            onClose={ () => this.setState({moveDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Move to folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <InputLabel shrink={ true }>{ I18n.t('Folder') }</InputLabel>\r\n                    <Select\r\n                        fullWidth={true}\r\n                        className={ this.props.classes.width100 }\r\n                        value={ this.state.newFolder || '__root__' }\r\n                        onChange={e => this.setState({newFolder: e.target.value}) }\r\n                        onKeyPress={e => e.which === 13 && this.setState({moveDialog: null}, () =>\r\n                                    this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newFolder === '__root__' ? '' : this.state.newFolder))\r\n                        }\r\n                    >\r\n                        { getFolderList(this.state.folders).map(folder =>\r\n                            <MenuItem\r\n                                key={ folder.prefix }\r\n                                value={ folder.prefix || '__root__' }\r\n                            >\r\n                                { folder.prefix ? folder.prefix.replace('.', ' > ') : I18n.t('Root') }\r\n                            </MenuItem>)\r\n                        }\r\n                    </Select>\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({moveDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !isIdUnique }\r\n                    color=\"primary\" onClick={() =>\r\n                        this.setState({moveDialog: null}, () =>\r\n                            this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newFolder === '__root__' ? '' : this.state.newFolder))\r\n                    }\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Move to folder') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderRenameDialog() {\r\n        if (!this.state.renameDialog) {\r\n            return null;\r\n        }\r\n\r\n        const presetId = this.state.renameDialog;\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"renameDialog\"\r\n            onClose={ () => this.setState({renameDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Rename preset') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <TextField\r\n                        fullWidth={true}\r\n                        label={ I18n.t('Name') }\r\n                        value={ this.state.renamePresetDialogTitle }\r\n                        onChange={ e => this.setState({renamePresetDialogTitle: e.target.value})}\r\n                        onKeyPress={e => {\r\n                            if (this.isNameUnique(this.state.renamePresetDialogTitle) && this.state.renamePresetDialogTitle && e.which === 13) {\r\n                                this.setState({renameDialog: null}, () =>\r\n                                    this.renamePreset(presetId, this.state.renamePresetDialogTitle));\r\n                            }\r\n                        }}\r\n                    />\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({renameDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.renamePresetDialogTitle || !this.isNameUnique(this.state.renamePresetDialogTitle) }\r\n                    color=\"primary\" onClick={() =>\r\n                        this.setState({renameDialog: null}, () =>\r\n                            this.renamePreset(presetId, this.state.renamePresetDialogTitle))\r\n                    }\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderDeleteDialog() {\r\n        return this.state.deleteDialog ? <Dialog\r\n            open={ true }\r\n            key=\"deleteDialog\"\r\n            onClose={ () => this.setState({deleteDialog: false}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this preset?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteDialog: false}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deletePreset(this.state.deleteDialog);\r\n                    this.setState({deleteDialog: false});\r\n                }}>\r\n                    <IconDelete className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderLoadChartDialog() {\r\n        return this.state.loadChartDialog ? <Dialog\r\n            maxWidth=\"lg\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"loadChartDialog\"\r\n            onClose={ () => this.setState({loadChartDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for load chart and cancel unsaved changes?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => {\r\n                        this.setState({loadChartDialog: ''});\r\n                    }}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.selectedPresetId);\r\n                        this.loadChart(this.state.loadChartDialog, this.state.loadChartDialogInstance);\r\n                        this.setState({loadChartDialog: ''});\r\n                    }}>\r\n                        <IconSave className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Save current preset and load') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.loadChart(this.state.loadChartDialog, this.state.loadChartDialogInstance);\r\n                        this.setState({loadChartDialog: ''});\r\n                    }}>\r\n                        { I18n.t('Load chart') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderLoadPresetDialog() {\r\n        return this.state.loadPresetDialog ? <Dialog\r\n            maxWidth=\"lg\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"loadPresetDialog\"\r\n            onClose={ () => this.setState({loadPresetDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for load preset and cancel unsaved changes?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => {\r\n                        this.setState({loadPresetDialog: ''});\r\n                    }}>\r\n                        <IconCancel  className={ this.props.classes.buttonIcon }/> { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.selectedPresetId);\r\n                        this.loadPreset(this.state.loadPresetDialog);\r\n                        this.setState({loadPresetDialog: ''});\r\n                    }}>\r\n                        <IconSave className={ this.props.classes.buttonIcon }/> { I18n.t('Save current preset and load') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.loadPreset(this.state.loadPresetDialog);\r\n                        this.setState({loadPresetDialog: ''});\r\n                    }}>\r\n                        { I18n.t('Load preset') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderCloseFolderDialog() {\r\n        return this.state.closeFolderDialog ? <Dialog\r\n            maxWidth=\"lg\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"closeFolderDialog\"\r\n            onClose={ () => this.setState({closeFolderDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for close folder and cancel unsaved changes?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => {\r\n                        this.toggleFolder(this.state.closeFolderDialog);\r\n                        this.setState({closeFolderDialog: ''});\r\n                    }}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/> { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.selectedPresetId);\r\n                        this.setState({\r\n                            selectedPresetId: null,\r\n                            presetData: {},\r\n                            presetMode: false,\r\n                            selectedPresetChanged: false,\r\n                            closeFolderDialog: false,\r\n                        })\r\n                    }}>\r\n                        <IconSave className={ this.props.classes.buttonIcon }/> { I18n.t('Save current preset and close') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.setState({\r\n                            selectedPresetId: null,\r\n                            presetData: {},\r\n                            presetMode: false,\r\n                            selectedPresetChanged: false,\r\n                            closeFolderDialog: false,\r\n                        })\r\n                    }}>\r\n                        { I18n.t('Close folder') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderSavePresetDialog() {\r\n        return this.state.savePresetDialog ? <Dialog\r\n            maxWidth=\"lg\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"savePresetDialog\"\r\n            onClose={ () => this.setState({savePresetDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for rewrite preset and lost previous settings?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => this.setState({savePresetDialog: ''})}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/> { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.savePresetDialog);\r\n                        this.setState({savePresetDialog: ''});\r\n                    }}>\r\n                        <IconSave className={ this.props.classes.buttonIcon }/> { I18n.t('Save preset') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    onUpdatePreset = presetData => {\r\n        this.setState({selectedPresetChanged: JSON.stringify(presetData) !== JSON.stringify(this.state.loadedPresetData)});\r\n        this.setState({presetData})\r\n    };\r\n\r\n    renderMain() {\r\n        const {classes} = this.props;\r\n        return [\r\n            <div className={clsx(classes.content, 'iobVerticalSplitter')} key=\"confirmdialog\">\r\n                <div key=\"confirmdiv\" className={classes.menuOpenCloseButton} onClick={() => {\r\n                    window.localStorage && window.localStorage.setItem('App.menuOpened', this.state.menuOpened ? 'false' : 'true');\r\n                    this.setState({menuOpened: !this.state.menuOpened, resizing: true});\r\n                    setTimeout(() => this.setState({resizing: false}), 300);\r\n                }}>\r\n                    {this.state.menuOpened ? <IconMenuOpened /> : <IconMenuClosed />}\r\n                </div>\r\n                <SplitterLayout\r\n                    key=\"MainSplitter\"\r\n                    vertical={!this.state.logHorzLayout}\r\n                    primaryMinSize={100}\r\n                    secondaryInitialSize={this.settingsSize}\r\n                    //customClassName={classes.menuDiv + ' ' + classes.splitterDivWithoutMenu}\r\n                    onDragStart={() => this.setState({resizing: true})}\r\n                    onSecondaryPaneSizeChange={size => this.settingsSize = parseFloat(size)}\r\n                    onDragEnd={() => {\r\n                        this.setState({resizing: false});\r\n                        window.localStorage && window.localStorage.setItem('App.settingsSize', this.settingsSize.toString());\r\n                    }}\r\n                >\r\n                    { this.state.selectedPresetId || this.state.selectedChartId ? <MainChart\r\n                        key=\"MainChart\"\r\n                        visible={!this.state.resizing}\r\n                        theme={this.state.theme}\r\n                        themeType={this.state.themeType}\r\n                        onChange={this.onUpdatePreset}\r\n                        presetData={this.state.presetData}\r\n                        enablePresetMode={this.enablePresetMode}\r\n                        presetMode={this.state.presetMode}\r\n                        selectedPresetId={this.state.selectedPresetId}\r\n                        selectedChartId={this.state.selectedChartId}\r\n                        selectedChartInstance={this.state.selectedChartInstance}\r\n                        socket={this.socket}\r\n                        createPreset={(id, parent, instance, stateId) => this.createPreset(id, parent, instance, stateId)}\r\n                    /> : null}\r\n                    {\r\n                        this.state.presetMode && this.state.presetData ? <SettingsEditor\r\n                            socket={this.socket}\r\n                            key=\"Editor\"\r\n                            width={window.innerWidth - this.menuSize}\r\n                            theme={this.state.theme}\r\n                            onChange={this.onUpdatePreset}\r\n                            presetData={this.state.presetData}\r\n                            verticalLayout={!this.state.logHorzLayout}\r\n                            onLayoutChange={() => this.toggleLogLayout()}\r\n                            connection={this.socket}\r\n                            selected={this.state.selected}\r\n                            instances={this.state.instances}\r\n                            systemConfig={this.state.systemConfig}\r\n                            selectedPresetId={this.state.selectedPresetId}\r\n                            selectedPresetChanged={this.state.selectedPresetChanged}\r\n                            savePreset={this.savePreset}\r\n                        /> : null\r\n                    }\r\n                </SplitterLayout>\r\n            </div>\r\n        ];\r\n    }\r\n\r\n    renderLeftList() {\r\n        return <div className={this.props.classes.mainListDiv} key=\"mainMenuDiv\">\r\n            {this.renderListToolbar()}\r\n            <div className={ this.props.classes.heightMinusToolbar }>\r\n                <List className={ this.props.classes.scroll }>\r\n                    { this.renderTree(this.state.folders) }\r\n                </List>\r\n                { this.renderSimpleHistory() }\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    onDragEnd = result => {\r\n        const { source, destination, draggableId } = result;\r\n        if (destination && draggableId.includes('***') && source.droppableId === 'Lines') {\r\n            const [instance, stateId] = draggableId.split('***');\r\n            this.socket.getObject(stateId)\r\n                .then(obj => {\r\n                    //const len = this.state.presetData.lines.length;\r\n                    //const color = (obj && obj.common && obj.common.color) || PREDEFINED_COLORS[len % PREDEFINED_COLORS.length];\r\n                    const presetData = JSON.parse(JSON.stringify(this.state.presetData));\r\n                    const newLine = DefaultPreset.getDefaultLine(this.state.systemConfig, instance, obj, I18n.getLanguage());\r\n                    if (!destination) {\r\n                        /*const newLine = {\r\n                            instance,\r\n                            name: (obj && obj.common && obj.common.name ? Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) : '').trim(),\r\n                            color,\r\n                            id: stateId,\r\n                            unit: (obj && obj.common && obj.common.unit) || '',\r\n                            xaxe: !len ? undefined : 'off',\r\n                            chartType: (obj && obj.common && obj.common.type === 'boolean') ? 'steps' : 'line',\r\n                            aggregate: (obj && obj.common && obj.common.type === 'boolean') ? 'onchange' : 'minmax',\r\n                        };*/\r\n                        presetData.lines.push(newLine);\r\n                    } else {\r\n                        presetData.lines.splice(destination.index, 0, newLine);\r\n                    }\r\n\r\n                    this.onUpdatePreset(presetData);\r\n                });\r\n        } else if (destination && source.droppableId === destination.droppableId) {\r\n            const presetData = JSON.parse(JSON.stringify(this.state.presetData));\r\n            const [removed] = presetData.lines.splice(source.index, 1);\r\n            presetData.lines.splice(destination.index, 0, removed);\r\n            this.onUpdatePreset(presetData);\r\n        }\r\n    };\r\n\r\n    renderSelectIdDialog() {\r\n        if (!this.state.showAddStateDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogSelectID\r\n                key={'selectDialog_add'}\r\n                socket={ this.socket }\r\n                dialogName={'Add'}\r\n                type={'state'}\r\n                title={ I18n.t('Enable logging for state')}\r\n                onOk={id => {\r\n                    console.log('Selected ' + id);\r\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\r\n                    if (id) {\r\n                        this.socket.getObject(id)\r\n                            .then(obj => {\r\n                                if (!obj || !obj.common) {\r\n                                    return this.showError(I18n.t('Invalid object'));\r\n                                }\r\n                                if (obj.common.custom && obj.common.custom[instance]) {\r\n                                    return this.showToast(I18n.t('Already enabled'));\r\n                                } else {\r\n                                    obj.common.custom = obj.common.custom || {};\r\n                                    obj.common.custom[instance] = {\r\n                                        enabled: true,\r\n                                    };\r\n                                    this.socket.setObject(id, obj)\r\n                                        .then(() => {\r\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\r\n                                            inst.enabledDP = inst.enabledDP || {};\r\n                                            inst.enabledDP[obj._id] = obj;\r\n                                            this.setState({instances});\r\n                                        });\r\n                                }\r\n                            })\r\n                    }\r\n                    this.setState({showAddStateDialog: false});\r\n                } }\r\n                onClose={ () => this.setState({showAddStateDialog: false}) }\r\n            />;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        if (!this.state.ready) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType}/>\r\n            </MuiThemeProvider>;\r\n        }\r\n\r\n        return (\r\n            <MuiThemeProvider theme={this.state.theme}>\r\n                <React.Fragment>\r\n                    <div className={classes.root} key=\"divSide\">\r\n                        <DragDropContext onDragEnd={this.onDragEnd}>\r\n                            <SplitterLayout\r\n                                key=\"sidemenuwidth\"\r\n                                vertical={false}\r\n                                primaryMinSize={300}\r\n                                primaryIndex={1}\r\n                                secondaryMinSize={300}\r\n                                secondaryInitialSize={this.menuSize}\r\n                                customClassName={classes.splitterDivs + ' ' + (!this.state.menuOpened ? classes.menuDivWithoutMenu : '')}\r\n                                onDragStart={() => this.setState({resizing: true})}\r\n                                onSecondaryPaneSizeChange={size => this.menuSize = parseFloat(size)}\r\n                                onDragEnd={() => {\r\n                                    this.setState({resizing: false});\r\n                                    window.localStorage && window.localStorage.setItem('App.menuSize', this.menuSize.toString());\r\n                                }}\r\n                            >\r\n                                {this.renderLeftList()}\r\n                                {this.renderMain()}\r\n                            </SplitterLayout>\r\n                        </DragDropContext>\r\n                    </div>\r\n                    { this.renderAddFolderDialog() }\r\n                    { this.renderRenameFolderDialog() }\r\n                    { this.renderDeleteDialog() }\r\n                    { this.renderMoveDialog() }\r\n                    { this.renderRenameDialog() }\r\n                    { this.renderLoadChartDialog() }\r\n                    { this.renderLoadPresetDialog() }\r\n                    { this.renderError() }\r\n                    { this.renderToast() }\r\n                    { this.renderSavePresetDialog() }\r\n                    { this.renderCloseFolderDialog() }\r\n                    { this.renderSelectIdDialog() }\r\n                </React.Fragment>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(App)));\r\n","export default function getUrlQuery() {\r\n    const parts = (window.location.search || '').replace(/^\\?/, '').split('&');\r\n    const query = {};\r\n    parts.forEach(item => {\r\n        const [name, val] = item.split('=');\r\n        query[decodeURIComponent(name)] = val !== undefined ? decodeURIComponent(val) : true;\r\n    });\r\n    return query;\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { version } from '../package.json';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nwindow.adapterName = 'echarts';\r\nlet themeName = Utils.getThemeName();\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={_theme => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root')\r\n    );\r\n}\r\n\r\n// if not local development\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://709f116e1de34029921e4f2696d6740f@sentry.iobroker.net/88',\r\n        release: 'iobroker.' + window.adapterName + '@' + version,\r\n        integrations: [new SentryIntegrations.Dedupe()],\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}