{"version":3,"sources":["Components/ColorPicker/transformers.js","Components/ColorPicker/components/PickerDialog.js","Components/ColorPicker/components/ColorPicker.js","Components/ColorPicker/index.js","Components/Fields.js","Components/Line.js","Components/Mark.js","Components/DefaultPreset.js","Components/PresetTabs.js","SettingsEditor.js","Components/ChartSettings.js","Components/ChartFrame.js","MainChart.js","Components/PresetsTree.js","Components/ChartsTree.js","MenuList.js","App.js","utils/getUrlQuery.js","serviceWorker.js","index.js"],"names":["converters","rgba","c","rgb","r","g","b","a","hex","rgba_rgb","rgba_hex","PickerDialog","value","onClick","onChange","className","style","position","zIndex","top","right","bottom","left","color","ColorPicker","convert","name","id","hintText","placeholder","floatingLabelText","label","TextFieldProps","showPicker","setShowPicker","internalValue","setValue","pickerClassName","custom","TextField","e","target","InputProps","undefined","newValue","defaultProps","MakedColorPicker","compose","withState","defaultValue","makeColorPicker","styles","theme","fieldContainer","paddingTop","whiteSpace","checkBoxLabel","fontSize","objectContainer","display","objectField","flex","objectButton","marginTop","paddingLeft","colorPicker","sliderContainer","sliderLabel","sliderRoot","paddingBottom","spacing","IOSelect","props","I18n","t","clsx","classes","FormControl","minWidth","width","InputLabel","shrink","Select","colors","formData","updateValue","renderValue","displayEmpty","options","Object","keys","map","key","MenuItem","noTranslate","withStyles","IOCheckbox","FormControlLabel","control","Checkbox","checked","IOTextField","InputLabelProps","inputProps","min","max","type","title","startAdornment","helperLink","IconButton","size","window","open","endAdornment","IODateTimeField","date","split","IOObjectField","useState","state","setState","fullWidth","showDialog","socket","dialogName","customFilter","selected","onOk","onClose","IOColorPicker","variant","backgroundColor","IOSlider","Typography","Slider","root","parseFloat","step","marks","valueLabelDisplay","WIDTHS","instance","chartType","dataType","buttons","Line","React","Component","constructor","super","updateField","line","JSON","parse","stringify","this","getObject","then","obj","common","Utils","getObjectNameFromObj","language","getLanguage","_name","length","unit","aggregate","catch","console","error","updateLine","index","renderClosedLine","idWidth","visible","windowWidth","padding","lineClosed","provided","dragHandleProps","lineOpenToggle","result","instances","forEach","_id","replace","shortInstanceField","shortIdField","auto","scatterplot","steps","spline","shortChartTypeField","minmax","average","total","onchange","shortDataTypeField","renderColorField","shortColorField","shortNameField","deleteButton","aria-label","deleteLine","onUpdate","noPadding","textColor","isUseBright","onSelectColor","getColor","stopPropagation","renderOpenedLine","xAxisOptions","i","maxLines","presetData","lines","commonYAxis","ownYAxis","deleteButtonFull","shortFields","points","off","leftColor","rightColor","render","Card","card","background","snapshot","isDragging","palette","secondary","light","CardContent","cardContent","opened","borderStyle","borderWidth","marginBottom","borderColor","grey","overflow","margin","paddingRight","borderBottom","opacity","lineHeight","marginLeft","marginRight","shortFieldsLast","LINE_HEIGHT","verticalAlign","shortButtonsField","float","lineId","upperValueOrId","lowerValueOrId","fill","text","Mark","mark","updateMark","lineClosedContainer","markOpenToggle","shortLineIdField","shortUpperValueOrIdField","shortLowerValueOrIdField","shortFillField","shortTextField","deleteMark","renderOpenedCard","flexFlow","flexDirection","height","DEFAULT_PRESET","timeType","relativeEnd","range","aggregateType","aggregateSpan","legend","hoverDetail","zoom","animation","live","ticks","noBorder","window_bg","bg_custom","x_labels_color","y_labels_color","border_color","grid_color","grid_hideX","grid_hideY","border_width","barColor","barLabels","barWidth","barFontSize","barFontColor","titlePos","titleColor","titleSize","legColumns","legBgOpacity","legBg","timeFormat","export","getDefaultLine","systemSettings","isBoolean","trim","defaultHistory","thickness","symbolSize","validTime","yaxe","yticks","getDefaultPreset","preset","useComma","isFloatComma","dateFormat","push","PREDEFINED_COLORS_MARKS","PresetTabs","linesOpened","localStorage","setItem","marksOpened","time","markData","lineData","expandAllLines","collapseAllLines","expandAllMarks","collapseAllMarks","addMark","len","splice","addLine","DefaultPreset","systemConfig","xaxe","selectedTab","getItem","deleteLineDialog","deleteMarkDialog","showColorDialog","colorDialogValue","colorPickerCb","renderDeleteLineDialog","Dialog","DialogTitle","DialogActions","alignRight","buttonsContainer","Button","renderDeleteMarkDialog","showColorPicker","cb","renderColorDialog","renderTabLines","anyClosed","find","l","anyOpened","droppableId","droppableProps","ref","innerRef","isDraggingOver","dark","minHeight","TabPanel","tabContent","Fab","buttonAdd","buttonExpandAll","buttonCollapseAll","draggableId","draggableProps","draggableStyle","userSelect","noContent","dragHint","renderTabMarkings","renderTabTime","group","timeFormatCustom","renderTabOptions","renderTabTitle","renderTabAppearance","Grid","item","sm","xs","TabContext","AppBar","tabsContainer","selectedPresetChanged","autoSave","onAutoSave","noPaddingOnSide","selectedId","buttonSave","savePreset","TabList","event","scrollButtons","Tab","tabsBody","overflowY","fontStyle","SettingsEditor","logBox","logBoxInner","toolbox","boxShadow","iconButtons","layoutIcon","borderRadius","IconAggregate","viewBox","xmlns","stroke","strokeWidth","d","transform","RefreshSelect","rangeOptions","relativeEndOptions","liveOptions","CHART_TYPES","AGGREGATES","ChartSettings","timeSpanOpened","aggregateOpened","refreshOpened","Toolbar","mainDiv","settingsButton","start","start_time","end","end_time","Popover","popOver","anchorEl","document","getElementById","anchorOrigin","vertical","horizontal","transformOrigin","fieldsContainer","aggregateIcon","refreshSelect","refreshSelectButtonTitle","grow1","hintButton","onCreatePreset","buttonIcon","textTransform","flexGrow","ChartFrame","onReceiveMessage","message","data","ready","lastPresetData","refIframe","contentWindow","postMessage","log","createRef","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","location","port","Paper","iframe","el","src","darkBackground","border","primary","main","MainChart","renderToolbar","enablePresetMode","parentId","historyInstance","stateId","getChartFrame","URL","search","includes","heightWithoutToolbar","height100","container","toolbar","mixins","toolbarButtons","editorDiv","textButton","tabIcon","hintIcon","tabMenuButton","tabChanged","tabText","maxWidth","textOverflow","tabChangedIcon","closeButton","cursor","notRunning","tabButton","tabButtonWrapper","menuIcon","getFolderPrefix","presetId","shift","pop","join","Droppable","onDrop","useDrop","accept","drop","isOver","collect","monitor","shallow","isOverAny","children","Draggable","useDrag","drag","FORBIDDEN_CHARS","MenuList","presetsOpened","onPresetChange","presets","changed","native","newState","changingPreset","presetFolders","buildPresetTree","deletePreset","delObject","getAllPresets","onSelectedChanged","onShowError","addPresetToFolderPrefix","folderPrefix","noRefresh","oldId","adapterName","setObject","refreshData","deletePresetDialog","movePresetDialog","newPresetFolder","addPresetFolderDialog","addPresetFolderName","editPresetFolderDialog","editPresetFolderName","subscribeObject","unsubscribeObject","Promise","resolve","reject","_socket","emit","startkey","endkey","err","res","rows","presetObj","renderPresetsTree","parent","level","prefix","reactChildren","values","subFolders","sort","subFolder","ListItem","gutters","noGutters","width100","List","list","leftMenuItem","renderTreePreset","ListItemText","folderItem","depthPx","folder","ListItemIcon","itemIconRoot","folderIconPreset","togglePresetsFolder","itemIcon","itemIconFolder","ListItemSecondaryAction","editFolderDialogTitleOrigin","reorder","renamePresetFolder","newName","newSelectedId","pos","indexOf","promises","all","isNameUnique","parts","currentFolder","findFolder","addFolder","parentFolder","_parentFolder","anySubFolders","listItem","button","itemIconPreset","listItemTitle","listItemSubTitle","CircularProgress","renameDialog","renamePresetDialogTitle","allowedId","renderAddFolderDialog","onClosePresetFolderDialog","DialogContent","p","onKeyPress","which","disabled","autoFocus","renderRenameFolderDialog","isUnique","renderMoveDialog","newId","isIdUnique","getFolderList","concat","renderRenameDialog","renamePreset","renderDeleteDialog","renderSelectIdDialog","showAddStateDialog","showToast","enabled","inst","enabledDP","newTitle","backend","HTML5Backend","scroll","withWidth","content","withTheme","sortObj","aid","bid","ChartsTree","chartsOpened","toggleChartFolder","adapterPromises","getAllEnums","getAllCharts","getEnums","enums","startsWith","members","getAdapterIcon","groupId","instanceId","icon","img","getObjectIcon","getChartIcon","channelID","getParentId","deviceID","adapterID","objs","ids","getObjects","substring","_instances","iconPromises","instanceObj","endsWith","names","statesEnums","types","icons","eID","getEnumsForId","funcIds","filter","roomIds","insts","otherFuncs","otherRooms","selectedChartId","setTimeout","ins","getNewPresetName","onShowToast","renderListItem","dragging","getIcon","multiple","chartsList","Switch","edge","onChangeList","renderListItems","enumId","renderContext","gIndex","LEVEL_PADDING","isDragDisabled","isDropDisabled","groupBy","adapterIcon","alt","showSearch","isIFrame","self","chartList","renderListToolbar","mainToolbar","textInput","href","renderFooter","secondaryColors","FormGroup","row","smallMargin","mainListDiv","heightMinusToolbar","PresetsTree","toast","loadChartParam","App","GenericApp","settings","query","val","decodeURIComponent","getUrlQuery","parseInt","host","hostname","translations","require","isFromCurrentSelection","template","url","loadChartOrPreset","showError","originalPresetData","onDragEnd","source","destination","newLine","removed","onConnectionReady","addPresetDialog","progress","discardChangesConfirmDialog","resizing","menuOpened","menuSelectId","logHorzLayout","settingsSize","menuSize","objects","getSystemConfig","getAdapterInstances","entry","getHistory","results","first","iFirst","k","j","noedit","confirmCB","renderMain","menuOpenCloseButton","primaryMinSize","secondaryInitialSize","onDragStart","onSecondaryPaneSizeChange","toString","innerWidth","verticalLayout","onLayoutChange","toggleLogLayout","connection","Fragment","primaryIndex","secondaryMinSize","customClassName","splitterDivs","menuDivWithoutMenu","removedLine","it","confirmed","renderError","renderToast","themeType","default","fontFamily","menuDiv","Boolean","match","themeName","getThemeName","version","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","onThemeChange","_theme","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.47329595.chunk.js","sourcesContent":["export const DEFAULT_CONVERTER = 'rgba_hex';\r\nexport const converters = {\r\n  rgba: c => `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`,\r\n  rgb: c => `rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})`,\r\n  hex: c => c.hex,\r\n\r\n  rgba_rgb: c => c.rgb.a === 1 ? converters.rgb(c) : converters.rgba(c),\r\n  rgba_hex: c => c.rgb.a === 1 ? converters.hex(c) : converters.rgba(c)\r\n};\r\n\r\nexport default converters;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ChromePicker } from 'react-color'\r\n\r\nconst PickerDialog = ({\r\n  value,\r\n  onClick,\r\n  onChange,\r\n  className\r\n}) => (\r\n  <div style={{ position: 'relative' }}>\r\n    <div style={{ position: 'absolute', zIndex: '2' }}>\r\n      <div\r\n        style={{ position: 'fixed', top: '0px', right: '0px', bottom: '0px', left: '0px' }}\r\n        onClick={onClick}\r\n      />\r\n      <ChromePicker\r\n        color={value}\r\n        onChange={onChange}\r\n        className={className}\r\n      />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nPickerDialog.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  className: PropTypes.any\r\n};\r\n\r\nexport default PickerDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport compose from 'recompose/compose'\r\nimport withState from 'recompose/withState'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport { DEFAULT_CONVERTER, converters } from '../transformers'\r\nimport PickerDialog from './PickerDialog'\r\n\r\nconst ColorPicker = ({\r\n  // ColorPicker\r\n  onChange,\r\n  convert,\r\n\r\n  // Text field\r\n  name,\r\n  id,\r\n  hintText,\r\n  placeholder,\r\n  floatingLabelText,\r\n  label,\r\n  TextFieldProps,\r\n  value,\r\n\r\n  // State\r\n  showPicker,\r\n  setShowPicker,\r\n  internalValue,\r\n  setValue,\r\n  pickerClassName,\r\n\r\n  ...custom\r\n}) => (\r\n  <>\r\n    <TextField\r\n      name={name}\r\n      id={id}\r\n      label={floatingLabelText || label}\r\n      placeholder={hintText || placeholder}\r\n      onClick={() => setShowPicker(true)}\r\n      onChange={e => {\r\n        setValue(e.target.value);\r\n        onChange(e.target.value)\r\n      }}\r\n      InputProps={{ style: { color: value === undefined ? internalValue : value } }}\r\n      {...TextFieldProps}\r\n      {...custom}\r\n    />\r\n    {showPicker && (\r\n      <PickerDialog\r\n        value={value === undefined ? internalValue : value}\r\n        onClick={() => {\r\n          setShowPicker(false);\r\n          onChange(value)\r\n        }}\r\n        onChange={c => {\r\n          const newValue = converters[convert](c);\r\n          setValue(newValue);\r\n          onChange(newValue)\r\n        }}\r\n        className={pickerClassName}\r\n      />\r\n    )}\r\n  </>\r\n);\r\n\r\nColorPicker.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  convert: PropTypes.oneOf(Object.keys(converters)),\r\n  name: PropTypes.string,\r\n  id: PropTypes.string,\r\n  hintText: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  label: PropTypes.string,\r\n  floatingLabelText: PropTypes.string,\r\n  TextFieldProps: PropTypes.shape(TextField.propTypes),\r\n  showPicker: PropTypes.bool,\r\n  setShowPicker: PropTypes.func,\r\n  internalValue: PropTypes.string,\r\n  setValue: PropTypes.func,\r\n  pickerClassName: PropTypes.any\r\n};\r\n\r\nColorPicker.defaultProps = {\r\n  convert: DEFAULT_CONVERTER\r\n};\r\n\r\nconst makeColorPicker = compose(\r\n  withState('showPicker', 'setShowPicker', false),\r\n  withState('internalValue', 'setValue', ({ defaultValue }) => defaultValue)\r\n);\r\n\r\nconst MakedColorPicker = makeColorPicker(ColorPicker);\r\n\r\nconst ColorPickerField = ({ input: { value, onChange, ...restInput }, meta: { touched, error }, ...restProps }) => (\r\n  <MakedColorPicker\r\n    value={value}\r\n    onChange={onChange}\r\n    errorText={touched && error}\r\n    {...restInput}\r\n    {...restProps}\r\n  />\r\n);\r\n\r\nColorPickerField.propTypes = {\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n};\r\n\r\nexport default MakedColorPicker\r\n\r\nexport {\r\n  ColorPickerField\r\n}\r\n","import ColorPicker from './components/ColorPicker'\r\nexport default ColorPicker\r\n","import React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport IconSelectID from '@material-ui/icons/Subject';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport ColorPicker from './ColorPicker';\r\nimport ClearIcon from \"@material-ui/icons/Close\";\r\nimport HelpIcon from \"@material-ui/icons/Help\";\r\n\r\nconst styles = theme => ({\r\n    fieldContainer: {\r\n        paddingTop: 10,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    checkBoxLabel: {\r\n        fontSize: '0.8rem'\r\n    },\r\n    objectContainer: {display: 'flex'},\r\n    objectField: {flex: 1},\r\n    objectButton: {\r\n        marginTop: 'auto',\r\n        paddingLeft: 0\r\n    },\r\n    colorPicker: {\r\n        left: -200,\r\n        top: 60,\r\n        position: 'relative'\r\n    },\r\n    sliderContainer: {\r\n        position: 'relative',\r\n        //height: theme.spacing(3),\r\n    },\r\n    sliderLabel: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        fontSize: 'small'\r\n    },\r\n    sliderRoot: {\r\n        paddingBottom: 0,\r\n        paddingTop: theme.spacing(2),\r\n    }\r\n});\r\n\r\nlet IOSelect = function (props) {\r\n    const label = I18n.t(props.label);\r\n    return <div className={clsx(props.classes.fieldContainer, props.className)}>\r\n        <FormControl style={{minWidth: props.minWidth || 200, width: props.width}}>\r\n            <InputLabel shrink={true}>{ label }</InputLabel>\r\n            <Select\r\n                label={label}\r\n                style={{color: props.colors ? props.colors[props.formData[props.name]] || undefined : undefined}}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n                value={props.formData[props.name] || ''}\r\n                renderValue={props.renderValue}\r\n                displayEmpty\r\n            >{\r\n                props.options ?\r\n                    Object.keys(props.options).map(key =>\r\n                        <MenuItem key={key} value={key} style={{color: props.colors ? props.colors[key] || undefined : undefined}}>{\r\n                            props.noTranslate ? props.options[key] : (props.options[key] !== '' && props.options[key] !== null && props.options[key] !== undefined? I18n.t(props.options[key]) : '')\r\n                        }</MenuItem>)\r\n                     : null\r\n            }\r\n            </Select>\r\n        </FormControl>\r\n    </div>;\r\n};\r\nIOSelect.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    options: PropTypes.object,\r\n    colors: PropTypes.object,\r\n};\r\nIOSelect = withStyles(styles)(IOSelect);\r\nexport {IOSelect};\r\n\r\nlet IOCheckbox = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <FormControlLabel style={{paddingTop: 10}} label={<span className={props.classes.checkBoxLabel}>{I18n.t(props.label)}</span>} control={\r\n            <Checkbox onChange={e => {\r\n                props.updateValue(props.name, e.target.checked)\r\n            }} checked={props.formData[props.name] || false}/>\r\n        }/>\r\n    </div>;\r\n};\r\nIOCheckbox.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOCheckbox = withStyles(styles)(IOCheckbox);\r\nexport {IOCheckbox};\r\n\r\nlet IOTextField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField\r\n            style={{width: props.formData[props.name] ? (props.width ? props.width - 30 : 'calc(100% - 30px)') : (props.width || '100%')}}\r\n            label={I18n.t(props.label)}\r\n            InputLabelProps={{shrink: true}}\r\n            inputProps={{min: props.min, max: props.max}}\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            type={props.type}\r\n            title={props.title || ''}\r\n            InputProps={{\r\n                startAdornment: props.helperLink ? <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => window.open(props.helperLink,'_blank')}>\r\n                    <HelpIcon />\r\n                </IconButton> : undefined,\r\n\r\n                endAdornment: props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n        />\r\n    </div>;\r\n};\r\nIOTextField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    type: PropTypes.string,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    helperLink: PropTypes.string,\r\n    width: PropTypes.number,\r\n};\r\nIOTextField = withStyles(styles)(IOTextField);\r\nexport {IOTextField};\r\n\r\nlet IODateTimeField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField type=\"datetime-local\" label={I18n.t(props.label)} InputLabelProps={{shrink: true}} onChange={e => {\r\n            let date = e.target.value.split('T');\r\n            props.updateValue(props.name, date[0], date[1]);\r\n        }} value={props.formData[props.name] ? props.formData[props.name] + 'T' + props.formData[props.name + '_time'] : ''}/>\r\n    </div>;\r\n};\r\nIODateTimeField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIODateTimeField = withStyles(styles)(IODateTimeField);\r\nexport {IODateTimeField};\r\n\r\nlet IOObjectField = function (props) {\r\n    let [state, setState] = useState({});\r\n\r\n    return <div className={props.classes.fieldContainer} style={{width: props.width}}>\r\n        <div className={props.classes.objectContainer}>\r\n            <TextField\r\n                className={props.classes.objectField}\r\n                label={I18n.t(props.label)}\r\n                fullWidth={true}\r\n                InputLabelProps={{shrink: true}}\r\n                value={props.formData[props.name] || ''}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n            />\r\n            <IconButton size=\"small\" onClick={() => setState({showDialog: true})} className={props.classes.objectButton}>\r\n                <IconSelectID/>\r\n            </IconButton>\r\n        </div>\r\n        {state.showDialog ? <DialogSelectID\r\n                key={'selectDialog_' + props.name}\r\n                socket={ props.socket }\r\n                dialogName={props.name}\r\n                customFilter={props.customFilter}\r\n                title={ I18n.t('Select for ') + props.label}\r\n                selected={ props.formData[props.name] }\r\n                onOk={e => {\r\n                    props.updateValue(props.name, e);\r\n                    setState({showDialog: false});\r\n                } }\r\n                onClose={ () => setState({showDialog: false}) }\r\n            /> : null\r\n        }\r\n    </div>;\r\n};\r\nIOObjectField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    customFilter: PropTypes.object,\r\n};\r\nIOObjectField = withStyles(styles)(IOObjectField);\r\nexport {IOObjectField};\r\n\r\nlet IOColorPicker = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <ColorPicker\r\n            variant=\"standard\"\r\n            label={I18n.t(props.label)}\r\n            pickerClassName={props.classes.colorPicker}\r\n            inputProps={{\r\n                style: {backgroundColor: props.formData[props.name]}\r\n            }}\r\n            InputProps={{\r\n                endAdornment: props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n            onChange={color => props.updateValue(props.name, color)}\r\n            InputLabelProps={{shrink: true}}\r\n            value={props.formData[props.name] || ''}\r\n        />\r\n    </div>;\r\n};\r\nIOColorPicker.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOColorPicker = withStyles(styles)(IOColorPicker);\r\nexport {IOColorPicker};\r\n\r\nlet IOSlider = function (props) {\r\n    return <div className={clsx(props.classes.fieldContainer, props.classes.sliderContainer)}>\r\n        <Typography className={props.classes.sliderLabel}>{props.label}</Typography>\r\n        <Slider\r\n            classes={{root: props.classes.sliderRoot}}\r\n            value={parseFloat(props.formData[props.name] || props.min || 0) || 0}\r\n            //getAriaValueText={(props.formData[props.name] || '').toString()}\r\n            step={parseFloat(props.step || (((props.max || 1) - (props.min || 0)) / 10)) || 0.1}\r\n            marks\r\n            onChange={(e, value) => props.updateValue(props.name, value)}\r\n            min={parseFloat(props.min || 0)}\r\n            max={parseFloat(props.max || 1)}\r\n            valueLabelDisplay=\"auto\"\r\n        />\r\n    </div>;\r\n};\r\nIOSlider.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    step: PropTypes.number,\r\n    formData: PropTypes.object,\r\n};\r\nIOSlider = withStyles(styles)(IOSlider);\r\nexport {IOSlider};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdMenu as IconDrag} from 'react-icons/md';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/fa';\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IOObjectField, IOSlider} from './Fields';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nconst WIDTHS = {\r\n    instance: 100,\r\n    id: 200,\r\n    chartType: 120,\r\n    dataType: 110,\r\n    color: 100,\r\n    name: 200,\r\n    buttons: 50 + 50 + 16\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n        }\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: '0px',\r\n        paddingBottom: 0,\r\n    },\r\n    shortInstanceField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.instance,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortIdField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.id,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortDataTypeField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.dataType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n    },\r\n    shortChartTypeField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.chartType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.color,\r\n        width: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortNameField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.name,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    fullWidth: {\r\n        width: '100%',\r\n        minWidth: 200\r\n    }\r\n});\r\n\r\nclass Line extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            width: this.props.width\r\n        };\r\n    }\r\n    updateField = (name, value) => {\r\n        let line = JSON.parse(JSON.stringify(this.props.line));\r\n        line[name] = value;\r\n\r\n        if (name === 'id') {\r\n            // If ID changed => read unit and name\r\n            if (this.props.line.id !== value) {\r\n                return this.props.socket.getObject(value)\r\n                    .then(obj => {\r\n                        if (obj && obj.common && obj.common.name) {\r\n                            name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                        } else {\r\n                            let _name = value.split('.');\r\n                            name = _name.length ? _name[_name.length - 1] : '';\r\n                        }\r\n                        if (obj && obj.common && obj.common.unit) {\r\n                            line.unit = obj.common.unit;\r\n                        }\r\n                        if (obj && obj.common && (obj.common.type === 'boolean' || obj.common.type === 'number')) {\r\n                            line.chartType = 'auto';\r\n                            line.aggregate = '';\r\n                        }\r\n                    })\r\n                    .catch(e => {\r\n                        console.error(e);\r\n                        let _name = value.split('.');\r\n                        name = _name.length ? _name[_name.length - 1] : '';\r\n                    })\r\n                    .then(() => {\r\n                        line.name = name;\r\n                        this.props.updateLine(this.props.index, line);\r\n                    });\r\n            }\r\n        }\r\n        this.props.updateLine(this.props.index, line);\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.width !== state.width) {\r\n            return {width: props.width};\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderClosedLine() {\r\n        const visible = {};\r\n\r\n        const windowWidth = this.props.width - 95;\r\n        const padding = 8;\r\n\r\n        let idWidth;\r\n        if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6) {\r\n            idWidth = `calc(100% - ${WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n            visible.name = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.buttons + padding * 5) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + padding * 5}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.buttons + padding * 4) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + padding * 4}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.buttons + padding * 3) {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + padding * 3}px)`;\r\n            visible.chartType = true;\r\n        } else {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + padding * 2}px)`;\r\n        }\r\n\r\n        return <div className={this.props.classes.lineClosed}>\r\n            {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n            <IconButton\r\n                title={ I18n.t('Edit') }\r\n                onClick={() => this.props.lineOpenToggle(this.props.index)}>\r\n                <IconFolderClosed/>\r\n            </IconButton>\r\n            <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"instance\"\r\n                label=\"Instance\"\r\n                noTranslate={true}\r\n                options={(() => {\r\n                    let result = {};\r\n                    this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                    return result;\r\n                })()}\r\n                minWidth={WIDTHS.instance}\r\n                classes={{fieldContainer: this.props.classes.shortInstanceField}}\r\n            />\r\n            <IOObjectField\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"id\"\r\n                width={idWidth}\r\n                label=\"ID\"\r\n                customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : true}}}\r\n                classes={{fieldContainer: this.props.classes.shortIdField}}\r\n                socket={this.props.socket}\r\n            />\r\n            {visible.chartType ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.chartType}\r\n                name=\"chartType\"\r\n                label=\"Chart type\"\r\n                options={{\r\n                    auto: 'Auto',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortChartTypeField}}\r\n            /> : null}\r\n            {visible.dataType && this.props.line.chartType !== 'auto' ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.dataType}\r\n                name=\"aggregate\"\r\n                label=\"Type\"\r\n                options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortDataTypeField}}\r\n            /> : null}\r\n            {visible.color ? this.renderColorField(this.props.line, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField, true) : null}\r\n            {visible.name ? <IOTextField\r\n                width={WIDTHS.name}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"name\"\r\n                label=\"Name\"\r\n                classes={{fieldContainer: this.props.classes.shortNameField}}\r\n            /> : null}\r\n            <IconButton\r\n                className={this.props.classes.deleteButton}\r\n                aria-label=\"Delete\"\r\n                title={I18n.t('Delete')}\r\n                onClick={() => this.props.deleteLine(this.props.index)}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className, noPadding) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: noPadding ? 0 : 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderOpenedLine() {\r\n        const xAxisOptions = {\r\n            '': I18n.t('own axis')\r\n        };\r\n        for (let i = 0; i < this.props.maxLines; i++) {\r\n            if (i !== this.props.index) {\r\n                if (this.props.presetData.lines[i].commonYAxis === undefined || this.props.presetData.lines[i].commonYAxis === '') {\r\n                    xAxisOptions[i] = I18n.t('From line %s', i + 1);\r\n                }\r\n            }\r\n        }\r\n        const ownYAxis = this.props.line.commonYAxis === '' || this.props.line.commonYAxis === undefined;\r\n        return <>\r\n            <div>\r\n                {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.lineOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Line')} {this.props.index + 1}{this.props.line.name ? ' - ' + this.props.line.name : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteLine(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <IOSelect\r\n                    formData={this.props.line}\r\n                    updateValue={this.updateField}\r\n                    name=\"instance\"\r\n                    label=\"Instance\"\r\n                    noTranslate={true}\r\n                    options={(() => {\r\n                        let result = {};\r\n                        this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                        return result;\r\n                    })()}\r\n                />\r\n                <IOObjectField\r\n                    formData={this.props.line}\r\n                    classes={{objectContainer: this.props.classes.fullWidth}}\r\n                    updateValue={this.updateField}\r\n                    name=\"id\"\r\n                    label=\"ID\"\r\n                    width=\"calc(100% - 250px)\"\r\n                    customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : true}}}\r\n                    socket={this.props.socket}/>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Main')}</p>\r\n                {this.renderColorField(this.props.line, this.updateField, 'Color', 'color')}\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"chartType\" label=\"Chart type\" options={{\r\n                    auto: 'Auto (Line or Steps)',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}/>\r\n                {this.props.line.chartType !== 'auto' ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"aggregate\" label=\"Type\" options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}/> : null }\r\n                {(this.props.line.chartType !== 'auto' && this.props.line.chartType === 'scatterplot') || this.props.line.points ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> : null }\r\n                {this.props.line.chartType !== 'scatterplot' ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"validTime\" label=\"Valid time (sec)\" min={0} type=\"number\" title={I18n.t('If the current value is not older than X seconds, assume it is still the same.')}/> : null }\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Texts')}</p>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"name\" label=\"Name\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"unit\" label=\"Unit\" />\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Line and area')}</p>\r\n                <IOSlider formData={this.props.line} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\" />\r\n                <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"points\" label=\"Show points\"/>\r\n                {this.props.line.points && this.props.line.chartType !== 'scatterplot' ?\r\n                    <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> :\r\n                    null\r\n                }\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"thickness\" label=\"L - Line thickness\" min={1} type=\"number\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"shadowsize\" label=\"S - Shadow size\" min={0} type=\"number\"/>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Axis')}</p>\r\n                {!this.props.index ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"xaxe\" label=\"X Axis position\" options={{\r\n                    '': 'bottom',\r\n                    'top': 'top',\r\n                    'off': 'off',\r\n                    /*off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    topColor: 'top colored',\r\n                    bottomColor: 'bottom colored',*/\r\n                }}/> : null }\r\n                {!this.props.index ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"xticks\" label=\"X-Axis ticks\" type=\"number\"/> : null }\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"offset\" label=\"X-Offset\" options={{\r\n                    '0': '0 seconds',\r\n                    '10': '10 seconds',\r\n                    '30': '30 seconds',\r\n                    '60': '60 seconds',\r\n                    '120': '2 minutes',\r\n                    '180': '3 minutes',\r\n                    '240': '4 minutes',\r\n                    '300': '5 minutes',\r\n                    '600': '10 minutes',\r\n                    '900': '15 minutes',\r\n                    '1800': '30 minutes',\r\n                    '2700': '45 minutes',\r\n                    '3600': '1 hour',\r\n                    '7200': '2 hours',\r\n                    '21600': '6 hours',\r\n                    '43200': '12 hours',\r\n                    '86400': '1 day',\r\n                    '172800': '2 days',\r\n                    '259200': '3 days',\r\n                    '345600': '4 days',\r\n                    '604800': '1 week',\r\n                    '1209600': '2 weeks',\r\n                    '1m': '1 month',\r\n                    '2m': '2 months',\r\n                    '3m': '3 months',\r\n                    '6m': '6 months',\r\n                    '1y': '1 year',\r\n                    '2y': '2 years',\r\n                }}/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yOffset\" label=\"Y-Offset\" type=\"number\"/>\r\n\r\n                <br/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"commonYAxis\" label=\"Common Y Axis\" noTranslate={true} options={xAxisOptions}/>\r\n\r\n                {ownYAxis ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"yaxe\" label=\"Y Axis position\" options={{\r\n                    '': '',\r\n                    off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    leftColor: 'left colored',\r\n                    rightColor: 'right colored',\r\n                }}/> : null}\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"min\" label=\"Min\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"max\" label=\"Max\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yticks\" label=\"Y-Axis ticks\" type=\"number\"/> : null }\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Others')}</p>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"ignoreNull\" label=\"NULL as\" options={{\r\n                    'false': 'default',\r\n                    'true': 'ignore null values',\r\n                    '0': 'use 0 instead of null values',\r\n                }}/>\r\n                {/*<IOTextField formData={this.props.line} updateValue={this.updateField} name=\"smoothing\" label=\"Smoothing\" type=\"number\" min={0}/>*/}\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"afterComma\" label=\"Digits after comma\" type=\"number\" min={0}/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                    'solid': 'solid',\r\n                    'dashed': 'dashed',\r\n                    'dotted': 'dotted',\r\n                }}/>\r\n            </div>\r\n            {/*<div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                            <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"dashes\" label=\"Dashes\"/>\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"dashLength\" label=\"Dashes length\" min={1} type=\"number\"/> : null}\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"spaceLength\" label=\"Space length\" min={1} type=\"number\"/> : null}\r\n                        </div>*/}\r\n        </>\r\n    }\r\n\r\n    render() {\r\n        return <Card\r\n            className={this.props.classes.card}\r\n            style={{background: this.props.snapshot.isDragging ? this.props.theme.palette.secondary.light : undefined}}\r\n        >\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ? this.renderOpenedLine() : this.renderClosedLine()}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nLine.propTypes = {\r\n    line: PropTypes.object,\r\n    maxLines: PropTypes.number,\r\n    socket: PropTypes.object,\r\n    updateLine: PropTypes.func,\r\n    provided: PropTypes.object,\r\n    snapshot: PropTypes.object,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    lineOpenToggle: PropTypes.func,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    onSelectColor: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Line);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField, IOSelect, IOObjectField, IOSlider} from './Fields';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nconst WIDTHS = {\r\n    lineId: 100,\r\n    upperValueOrId: 100,\r\n    lowerValueOrId: 100,\r\n    color: 100,\r\n    fill: 100,\r\n    text: 200,\r\n    buttons: 100\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n            paddingRight: 20\r\n        },\r\n        paddingRight: 20\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        },\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: 0,\r\n        paddingBottom: 0,\r\n        position: 'relaitve',\r\n    },\r\n    shortLineIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lineId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortUpperValueOrIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.upperValueOrId,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortLowerValueOrIdField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lowerValueOrId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortFillField: {\r\n        display: 'inline-flex',\r\n        width: WIDTHS.fill,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    sliderRoot: {\r\n        marginTop: 10,\r\n    },\r\n    shortTextField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.text,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    lineClosed: {\r\n        display: 'inline-flex',\r\n        flexFlow: 'column wrap',\r\n        overflow: 'hidden',\r\n        flexDirection: 'row',\r\n        flex: 1,\r\n        height: LINE_HEIGHT\r\n    },\r\n    lineClosedContainer: {\r\n        display: 'flex'\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 40,\r\n    },\r\n});\r\n\r\nclass Mark extends React.Component {\r\n    state = {\r\n        /*\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        */\r\n      };\r\n\r\n    updateField = (name, value) => {\r\n        const mark = JSON.parse(JSON.stringify(this.props.mark));\r\n        mark[name] = value;\r\n        this.props.updateMark(this.props.index, mark);\r\n    };\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderClosedLine(lines, colors) {\r\n        return <div className={this.props.classes.lineClosedContainer}>\r\n            <div className={this.props.classes.lineClosed}>\r\n                <IconButton\r\n                    title={ I18n.t('Edit') }\r\n                    onClick={() => this.props.markOpenToggle(this.props.index)}>\r\n                    <IconFolderClosed/>\r\n                </IconButton>\r\n                <IOSelect\r\n                    noTranslate={true}\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lineId\"\r\n                    label=\"Line ID\"\r\n                    options={lines}\r\n                    colors={colors}\r\n                    classes={{fieldContainer: this.props.classes.shortLineIdField}}\r\n                    minWidth={WIDTHS.lineId}\r\n                />\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"upperValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortUpperValueOrIdField}}\r\n                        minWidth={WIDTHS.upperValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"lowerValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortLowerValueOrIdField}}\r\n                        minWidth={WIDTHS.lowerValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    this.renderColorField(this.props.mark, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField) : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== ''  &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' &&\r\n                 this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== ''?\r\n                    <IOSlider\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        minWidth={WIDTHS.dataType}\r\n                        classes={{fieldContainer: this.props.classes.shortFillField, sliderRoot: this.props.classes.sliderRoot}}\r\n                        name=\"fill\"\r\n                        label=\"Fill (from 0 to 1)\"\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOTextField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"text\"\r\n                        label=\"Text\"\r\n                        classes={{fieldContainer: this.props.classes.shortTextField}}\r\n                        minWidth={WIDTHS.fill}\r\n                    /> : null}\r\n            </div>\r\n            <IconButton\r\n                style={{ marginLeft: 5 }} aria-label=\"Delete\" title={I18n.t('Delete')}\r\n                onClick={()=>{\r\n                    this.props.deleteMark(this.props.index);\r\n                }}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>\r\n    }\r\n\r\n    renderOpenedCard(lines, colors) {\r\n        return <>\r\n            <div>\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.markOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Mark')} {this.props.index + 1}{this.props.mark.text ? ' - ' + this.props.mark.text : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteMark(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Limits')}</p>\r\n                <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineId\" noTranslate={true} label=\"Line ID\" options={lines} colors={colors}/>\r\n\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"upperValueOrId\" label=\"Upper value or ID\" socket={this.props.socket} /> : null }\r\n\r\n                {this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"lowerValueOrId\" label=\"Lower value or ID\" socket={this.props.socket} /> : null }\r\n            </div>\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={this.props.classes.shortFields}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Style')}</p>\r\n                    {this.renderColorField(this.props.mark, this.updateField, 'Color', 'color')}\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"ol\" label=\"L Line thickness\" type=\"number\"/>\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"os\" label=\"S Shadow size\" type=\"number\"/>\r\n\r\n                    <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                        'solid': 'solid',\r\n                        'dashed': 'dashed',\r\n                        'dotted': 'dotted',\r\n                    }}/>\r\n\r\n                    {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') &&\r\n                    (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                        <IOSlider formData={this.props.mark} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\"/> : null}\r\n                </div> : null}\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Label')}</p>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"text\" label=\"Text\"/>\r\n                    {this.props.mark.text ?\r\n                        <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"textPosition\" label=\"Text position\" options={{\r\n                            'l': 'Left',\r\n                            'r': 'Right',\r\n                        }}/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textOffset\" label=\"Text offset\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textSize\" label=\"Text size\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? this.renderColorField(this.props.mark, this.updateField, 'Text color', 'textColor') : null}\r\n                </div> : null }\r\n        </>;\r\n    }\r\n\r\n    render() {\r\n        let lines = {};\r\n        let colors = {};\r\n        this.props.presetData.lines.forEach((line, index) => {\r\n            lines[index] = index + ' - ' + (line.id || I18n.t('No ID yet'));\r\n            colors[index] = line.color;\r\n        });\r\n        return <Card className={this.props.classes.card}>\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ? this.renderOpenedCard(lines, colors) : this.renderClosedLine(lines, colors)}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nMark.propTypes = {\r\n    mark: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    updateMark: PropTypes.func,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    markOpenToggle: PropTypes.func,\r\n    onSelectColor: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Mark);","import Utils from \"@iobroker/adapter-react/Components/Utils\";\r\n\r\nconst DEFAULT_PRESET = {\r\n    lines:[\r\n        /*\r\n        {\r\n            'id':'system.adapter.admin.0.cpu',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#FF0000',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'name':'Line 1',\r\n            'xaxe':'off',\r\n            'ignoreNull':'false',\r\n            'afterComma':'2',\r\n            'dashes':'true',\r\n            'dashLength':'10',\r\n            'spaceLength':'10',\r\n            'min':'-0.1',\r\n            'max':'1',\r\n            'points':'true',\r\n            'fill':'4',\r\n            'unit':'2',\r\n            'yaxe':'left',\r\n            'yOffset':'1',\r\n            'xticks':'2',\r\n            'yticks':'3',\r\n            'smoothing':'4'\r\n        },\r\n        {\r\n            'id':'system.adapter.admin.0.memHeapTotal',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#00FF00',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'min':'-0.1',\r\n            'points':'false'\r\n        },\r\n        {\r\n            'id':'system.adapter.admin.0.memRss',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#0000FF',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'xaxe':'off',\r\n            'min':'-0.1'\r\n        }\r\n        */\r\n    ],\r\n    marks: [\r\n        /*\r\n        {\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        }\r\n        */\r\n    ],\r\n    timeType: 'relative',\r\n    relativeEnd: '30minutes',\r\n    range: '120',\r\n    aggregateType: 'count',\r\n    aggregateSpan: 300,\r\n    legend: 'ne',\r\n    hoverDetail: true,\r\n    zoom: true,\r\n    animation: 0,\r\n    live: '15',\r\n    ticks: '',\r\n    width: '100%',\r\n    height: '100%',\r\n    noBorder: 'noborder',\r\n    window_bg: '',\r\n    bg_custom: '',\r\n    x_labels_color: '',\r\n    y_labels_color: '',\r\n    border_color: '',\r\n    grid_color: '',\r\n    grid_hideX: false,\r\n    grid_hideY: false,\r\n    border_width: '',\r\n    barColor: '',\r\n    barLabels: 'topover',\r\n    barWidth: '',\r\n    barFontSize: '',\r\n    barFontColor: '',\r\n    title: '',\r\n    titlePos: '',\r\n    titleColor: '',\r\n    titleSize: '',\r\n    legColumns: '',\r\n    legBgOpacity: '',\r\n    legBg: '',\r\n    timeFormat: '',\r\n    export: true,\r\n};\r\n\r\nfunction getDefaultLine(systemSettings, instance, obj, language) {\r\n    const isBoolean = obj && obj.common && obj.common.type === 'boolean';\r\n\r\n    const line = {\r\n        name:       ((obj && obj.common && obj.common.name && Utils.getObjectNameFromObj(obj, null, {language})) || '').trim(),\r\n        id:         obj ? obj._id : '',\r\n        instance:   instance || systemSettings.common.defaultHistory,\r\n        thickness:  2,\r\n        chartType:  isBoolean ? 'steps'    : 'line',\r\n        aggregate:  isBoolean ? 'onchange' : 'minmax',\r\n        isBoolean:  isBoolean,\r\n        symbolSize: 3,\r\n        validTime:  35, // 35 seconds\r\n    };\r\n\r\n    if (obj && obj.common && obj.common.color) {\r\n        line.color = obj.common.color;\r\n    }\r\n    if (obj && obj.common && obj.common.unit) {\r\n        line.unit = obj.common.unit;\r\n    }\r\n    if (isBoolean) {\r\n        line.yaxe = 'off';\r\n        line.min = '0';\r\n        line.yticks = 1;\r\n        line.fill = 0.3;\r\n        line.symbolSize = 1;\r\n    }\r\n\r\n    return line;\r\n}\r\n\r\nfunction getDefaultPreset(systemSettings, instance, obj, language) {\r\n    const preset = JSON.parse(JSON.stringify(DEFAULT_PRESET));\r\n\r\n    preset.useComma = systemSettings.common.isFloatComma || false;\r\n\r\n    if (systemSettings.common.dateFormat) {\r\n        //preset.timeFormat = 'HH:mm:ss ' + systemSettings.common.dateFormat;\r\n    }\r\n\r\n    preset.lines.push(getDefaultLine(systemSettings, instance, obj, language));\r\n\r\n    return preset;\r\n}\r\nexport default {\r\n    getDefaultPreset,\r\n    getDefaultLine\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { ChromePicker } from 'react-color'\r\n\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TabList from '@material-ui/lab/TabList';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport TabPanel from '@material-ui/lab/TabPanel';\r\nimport TabContext from '@material-ui/lab/TabContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\nimport {MdFullscreen as IconNewWindow} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IODateTimeField} from './Fields';\r\nimport Line from './Line';\r\nimport Mark from './Mark';\r\nimport DefaultPreset from './DefaultPreset';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nconst styles = theme => ({\r\n    tabsBody: {\r\n        overflowY: 'auto',\r\n        flex: 1\r\n    },\r\n    tabsContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    tabContent: {\r\n        paddingTop: theme.spacing(1),\r\n        position: 'relative',\r\n        minHeight: 'calc(100% - 32px)'\r\n    },\r\n    buttonAdd: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n        zIndex: 3,\r\n    },\r\n    buttonExpandAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonCollapseAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42 * 2,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonSave: {\r\n        color: theme.type === 'dark' ? '#CC0000' : '#CC0000'\r\n    },\r\n    noContent : {\r\n        padding: theme.spacing(1),\r\n        height: 64,\r\n        verticalAlign: 'middle',\r\n        lineHeight: '64px',\r\n        width: '100%',\r\n    },\r\n    dragHint: {\r\n        paddingLeft: theme.spacing(1),\r\n        fontSize: 10,\r\n        fontStyle: 'italic',\r\n        opacity: 0.8,\r\n    },\r\n    marginTop: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    noPaddingOnSide: {\r\n        //paddingRight: 0,\r\n        //paddingLeft: 0,\r\n    },\r\n    group: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n});\r\n\r\nconst PREDEFINED_COLORS_MARKS = [\r\n    '#144578',\r\n    '#1868A8',\r\n    '#665191',\r\n    '#a05195',\r\n    '#d45087',\r\n    '#f95d6a',\r\n    '#ff7c43',\r\n    '#ffa600',\r\n];\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: 'none',\r\n    width: '100%',\r\n    // change background colour if dragging\r\n    background: isDragging ? 'lightgreen' : 'grey',\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n});\r\n\r\nclass PresetTabs extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            presetData: DefaultPreset.getDefaultPreset(this.props.systemConfig),\r\n            selectedTab: window.localStorage.getItem('App.echarts.presetTabs.selectedTab') !== null ? window.localStorage.getItem('App.echarts.presetTabs.selectedTab') : '0',\r\n            linesOpened: window.localStorage.getItem('App.echarts.Lines.opened') !== null ? JSON.parse(window.localStorage.getItem('App.echarts.Lines.opened')) : [],\r\n            marksOpened: window.localStorage.getItem('App.echarts.Marks.opened') !== null ? JSON.parse(window.localStorage.getItem('App.echarts.Marks.opened')) : [],\r\n            deleteLineDialog: null,\r\n            deleteMarkDialog: null,\r\n            showColorDialog: false,\r\n            colorDialogValue: '',\r\n        };\r\n        this.colorPickerCb = null;\r\n    }\r\n\r\n    lineOpenToggle = index => {\r\n        let linesOpened = JSON.parse(JSON.stringify(this.state.linesOpened));\r\n        linesOpened[index] = !this.state.linesOpened[index];\r\n        this.setState({linesOpened});\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify(linesOpened));\r\n    };\r\n\r\n    markOpenToggle = index => {\r\n        let marksOpened = JSON.parse(JSON.stringify(this.state.marksOpened));\r\n        marksOpened[index] = !this.state.marksOpened[index];\r\n        this.setState({marksOpened});\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify(marksOpened));\r\n    };\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    updateMark = (index, markData) => {\r\n        let marks = JSON.parse(JSON.stringify(this.props.presetData.marks));\r\n        marks[index] = markData;\r\n        this.updateField('marks', marks);\r\n    };\r\n\r\n    updateLine = (index, lineData) => {\r\n        let lines = JSON.parse(JSON.stringify(this.props.presetData.lines));\r\n        lines[index] = lineData;\r\n        this.updateField('lines', lines);\r\n    };\r\n\r\n    expandAllLines = () => {\r\n        const linesOpened = this.props.presetData.lines.map(() => true);\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify(linesOpened));\r\n        this.setState({linesOpened});\r\n    };\r\n\r\n    collapseAllLines = () => {\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify([]));\r\n        this.setState({linesOpened: []});\r\n    };\r\n\r\n    expandAllMarks = () => {\r\n        const marksOpened = this.props.presetData.marks.map(() => true);\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened});\r\n    };\r\n\r\n    collapseAllMarks = () => {\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened: []});\r\n    };\r\n\r\n    addMark = () => {\r\n        const len = this.props.presetData.marks.length;\r\n        const color = PREDEFINED_COLORS_MARKS[len % PREDEFINED_COLORS_MARKS.length];\r\n        let presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.push({color});\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    deleteMark = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.splice(index, 1);\r\n        const marksOpened = [...this.state.marksOpened];\r\n        marksOpened.splice(index, 1);\r\n        this.setState({marksOpened}, () =>\r\n            this.props.onChange(presetData));\r\n    };\r\n\r\n    addLine = () => {\r\n        const len = this.props.presetData.lines.length;\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        const line = DefaultPreset.getDefaultLine(this.props.systemConfig);\r\n        line.xaxe = !len ? undefined : 'off';\r\n        presetData.lines.push(line);\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    deleteLine = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.lines.splice(index, 1);\r\n        const linesOpened = [...this.state.linesOpened];\r\n        linesOpened.splice(index, 1);\r\n        this.setState({linesOpened}, () => this.props.onChange(presetData));\r\n    };\r\n\r\n    renderDeleteLineDialog() {\r\n        return this.state.deleteLineDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteLineDialog\"\r\n            onClose={ () => this.setState({deleteLineDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this line?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteLineDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteLine(this.state.deleteLineDialog);\r\n                    this.setState({deleteLineDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderDeleteMarkDialog() {\r\n        return this.state.deleteMarkDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteMarkDialog\"\r\n            onClose={ () => this.setState({deleteMarkDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this mark?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteMarkDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteMark(this.state.deleteMarkDialog);\r\n                    this.setState({deleteMarkDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    showColorPicker(value, cb) {\r\n        this.colorPickerCb = cb;\r\n        this.setState({colorDialogValue: value, showColorDialog: true});\r\n    }\r\n\r\n    renderColorDialog() {\r\n        return <Dialog onClose={() => {\r\n            this.colorPickerCb = null;\r\n            this.setState({showColorDialog: false});\r\n        }} open={this.state.showColorDialog}>\r\n            {/*<DialogTitle id=\"simple-dialog-title\">Set backup account</DialogTitle>*/}\r\n            <ChromePicker\r\n                color={this.state.colorDialogValue}\r\n                onChange={value => {\r\n                    this.setState({colorDialogValue: value}, () =>\r\n                        this.colorPickerCb(value));\r\n                }}\r\n            />\r\n        </Dialog>;\r\n    }\r\n\r\n    renderTabLines() {\r\n        const anyClosed = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => !this.state.linesOpened[i]);\r\n        const anyOpened = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => this.state.linesOpened[i]);\r\n\r\n        return <Droppable droppableId=\"droppable\">\r\n            {(provided, snapshot) =>\r\n                <div\r\n                    {...provided.droppableProps}\r\n                    ref={provided.innerRef}\r\n                    style={{\r\n                        background: snapshot.isDraggingOver ? this.props.theme.palette.secondary.dark : undefined,\r\n                        width: '100%',\r\n                        minHeight: '100%',\r\n                    }}\r\n                >\r\n                    <TabPanel value=\"0\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Fab onClick={this.addLine} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd}         title={I18n.t('Add line to chart')}><IconAdd/></Fab>\r\n                        {anyClosed ? <Fab onClick={this.expandAllLines}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all lines')}><IconExpand/></Fab> : null}\r\n                        {anyOpened ? <Fab onClick={this.collapseAllLines} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all lines')}><IconCollapse/></Fab> : null}\r\n                        {this.props.presetData.lines.length ? this.props.presetData.lines.map((line, index) =>\r\n                            <Draggable key={line.id + '_' + index} draggableId={line.id + '_' + index} index={index}>\r\n                                {(provided, snapshot) =>\r\n                                    <div\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        style={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\r\n                                    >\r\n                                        <Line\r\n                                            provided={provided}\r\n                                            snapshot={snapshot}\r\n                                            theme={this.props.theme}\r\n                                            instances={this.props.instances}\r\n                                            line={line}\r\n                                            presetData={this.props.presetData}\r\n                                            width={this.props.width}\r\n                                            updateLine={this.updateLine}\r\n                                            deleteLine={index => this.setState({deleteLineDialog: index})}\r\n                                            index={index}\r\n                                            key={index}\r\n                                            socket={this.props.socket}\r\n                                            opened={typeof this.state.linesOpened[index] !== 'undefined' && this.state.linesOpened[index] === true}\r\n                                            lineOpenToggle={this.lineOpenToggle}\r\n                                            maxLines={this.props.presetData.lines.length}\r\n                                            onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            </Draggable>)\r\n                        :\r\n                            <div className={this.props.classes.noContent}>\r\n                                {I18n.t('Create a new line with a \"+\" on the right.')}\r\n                            </div>\r\n                        }\r\n                        <div className={this.props.classes.dragHint}>{I18n.t('You can drag and drop simple lines from the left list.')}</div>\r\n                    </TabPanel>\r\n                </div>}\r\n            </Droppable>;\r\n    }\r\n\r\n    renderTabMarkings() {\r\n        const anyClosed = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) => !this.state.marksOpened[i]);\r\n        const anyOpened = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) =>  this.state.marksOpened[i]);\r\n\r\n        return <TabPanel value=\"1\" classes={{root: this.props.classes.tabContent}}>\r\n            <Fab onClick={this.addMark} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd} title={I18n.t('Add marking line to chart')}>\r\n                <IconAdd/>\r\n            </Fab>\r\n            {anyClosed ? <Fab onClick={this.expandAllMarks}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all markings')}><IconExpand/></Fab> : null}\r\n            {anyOpened ? <Fab onClick={this.collapseAllMarks} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all markings')}><IconCollapse/></Fab> : null}\r\n            {\r\n                this.props.presetData.marks.length ?\r\n                    this.props.presetData.marks.map((mark, index) => <Mark\r\n                        mark={mark}\r\n                        presetData={this.props.presetData}\r\n                        updateMark={this.updateMark}\r\n                        deleteMark={(index) => {this.setState({deleteMarkDialog: index})}}\r\n                        index={index}\r\n                        key={index}\r\n                        socket={this.props.socket}\r\n                        opened={typeof this.state.marksOpened[index] !== 'undefined' && this.state.marksOpened[index] === true}\r\n                        markOpenToggle={this.markOpenToggle}\r\n                        onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                    />) :\r\n                    <div className={this.props.classes.noContent}>\r\n                        {I18n.t('You can create a new markings with a \"+\" on the right.')}\r\n                    </div>\r\n            }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTime() {\r\n        return <TabPanel value=\"2\" classes={{root: this.props.classes.tabContent}}>\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Type')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                    </div>\r\n                    <div className={this.props.classes.group}>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Relative')}</p>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={{\r\n                                    'now': 'now',\r\n                                    '1minute': 'end of minute',\r\n                                    '5minutes': 'end of 5 minutes',\r\n                                    '10minutes': 'end of 10 minutes',\r\n                                    '30minutes': 'end of 30 minutes',\r\n                                    '1hour': 'end of hour',\r\n                                    '2hours': 'end of 2 hours',\r\n                                    '3hours': 'end of 3 hours',\r\n                                    '4hours': 'end of 4 hours',\r\n                                    '6hours': 'end of 6 hours',\r\n                                    '8hours': 'end of 8 hours',\r\n                                    '12hours': 'end of 12 hours',\r\n                                    'today': 'end of day',\r\n                                    'weekEurope': 'end of sunday',\r\n                                    'weekUsa': 'end of saturday',\r\n                                    'month': 'this month',\r\n                                    'year': 'this year',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={{\r\n                                    '10': '10 minutes',\r\n                                    '30': '30 minutes',\r\n                                    '60': '1 hour',\r\n                                    '120': '2 hours',\r\n                                    '180': '3 hours',\r\n                                    '360': '6 hours',\r\n                                    '720': '12 hours',\r\n                                    '1440': '1 day',\r\n                                    '2880': '2 days',\r\n                                    '4320': '3 days',\r\n                                    '10080': '7 days',\r\n                                    '20160': '14 days',\r\n                                    '1m': '1 month',\r\n                                    '2m': '2 months',\r\n                                    '3m': '3 months',\r\n                                    '6m': '6 months',\r\n                                    '1y': '1 year',\r\n                                    '2y': '2 years',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"live\" label=\"Live update every\" options={{\r\n                                    '': 'none',\r\n                                    '5': '5 seconds',\r\n                                    '10': '10 seconds',\r\n                                    '15': '15 seconds',\r\n                                    '20': '20 seconds',\r\n                                    '30': '30 seconds',\r\n                                    '60': '1 minute',\r\n                                    '120': '2 minutes',\r\n                                    '300': '5 minutes',\r\n                                    '600': '10 minutes',\r\n                                    '900': '15 minutes',\r\n                                    '1200': '20 minutes',\r\n                                    '1800': '30 minutes',\r\n                                    '3600': '1 hour',\r\n                                    '7200': '2 hours',\r\n                                    '10800': '3 hours',\r\n                                    '21600': '6 hours',\r\n                                    '43200': '12 hours',\r\n                                    '86400': '1 day',\r\n                                }}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    {/*<div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                        <IOObjectField socket={this.props.socket} formData={this.props.presetData} updateValue={this.updateField} name=\"ticks\" label=\"Use X-ticks from\" />\r\n                    </div>*/}\r\n                {this.props.presetData.lines.find(line => line.aggregate !== 'onchange') ?\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Aggregate')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                                     label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        />\r\n                    </div> : null }\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Time format')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label=\"Custom time format\" name=\"timeFormatCustom\" />\r\n                {!this.props.presetData.timeFormatCustom ?\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" options={{\r\n                        '': 'Default',\r\n                        'HH:mm DD.MM': 'HH:MM dd.mm',\r\n                        'HH:mm DD.MM.': 'HH:MM dd.mm.',\r\n                        'HH:mm <br/> DD.MM': 'HH:MM / dd.mm',\r\n                        'HH:mm <br/> DD.MM.': 'HH:MM / dd.mm.',\r\n                        'HH:mm <br/> DD.MM.YY': 'HH:MM / dd.mm.yy',\r\n                        'HH:mm:ss DD.MM.YY': 'HH:MM:SS dd.mm.yy',\r\n                        'HH:mm DD.MM.YY': 'HH:MM dd.mm.yy',\r\n                        'hh:mm:ss MM/DD/YY a': 'HH:MM:SS mm/dd/yy am (US)',\r\n                        'HH:mm:ss DD/MM/YY': 'HH:MM:SS dd/mm/yy (UK)',\r\n                        'HH:mm:ss MM.DD.YY': 'HH:MM:SS mm.dd.yy',\r\n                        'HH:mm ddd': 'HH:MM dow',\r\n                        'HH:mm:ss ddd': 'HH:MM:SS dow',\r\n                        'HH:mm MM.DD': 'HH:MM mm.dd',\r\n                        'HH:mm:ss': 'HH:MM:SS',\r\n                        'HH:mm': 'HH:MM',\r\n                        'DD.MM': 'dd.mm',\r\n                        'DD.MM.': 'dd.mm.',\r\n                        'MM/DD': 'mm/dd',\r\n                        'DD': 'dd',\r\n                        'MM': 'mm',\r\n                        'YY': 'y',\r\n                        'HH': 'HH',\r\n                        'mm': 'MM',\r\n                        'ddd': 'dow',\r\n                        'DD.MM.YY': 'dd.mm.yy',\r\n                    }}/> :\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" helperLink=\"https://momentjs.com/docs/#/displaying/format/\"/>\r\n                }\r\n                {/*<IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Animation\" name=\"animation\" options={{\r\n                                '0': 'no',\r\n                                '300': '300ms',\r\n                                '500': '500ms',\r\n                                '1000': '1 second',\r\n                                '2000': '2 seconds',\r\n                                '3000': '3 seconds',\r\n                                '5000': '5 seconds',\r\n                                '10000': '10 seconds',\r\n                            }}/>*/}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabOptions() {\r\n        return <TabPanel value=\"3\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Legend')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Show legend\" name=\"legend\" options={{\r\n                    '': 'none',\r\n                    'nw': 'Top, left',\r\n                    'ne': 'Top, right',\r\n                    'sw': 'Bottom, left',\r\n                    'se': 'Bottom, right',\r\n                }}/>\r\n                {this.props.presetData.legend ?\r\n                <>\r\n                    {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend columns\" name=\"legColumns\" min=\"1\" type=\"number\" />*/}\r\n                    {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend opacity (0-1)\" name=\"legBgOpacity\" />*/}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Legend text color', 'legColor')}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Legend background', 'legBg')}\r\n                </> : null}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Options')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hover details'} name=\"hoverDetail\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Use comma'} name=\"useComma\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Enable zoom and pan'} name=\"zoom\" />\r\n                {/*<IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide edit button'} name=\"noedit\" />*/}\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Show export button'} name=\"export\" />\r\n                {this.props.presetData.export ? this.renderColorField(this.props.presetData, this.updateField, 'Export button color', 'exportColor') : null}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTitle() {\r\n        return <TabPanel value=\"4\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Title')}</p>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"title\" label=\"Title\"/>\r\n                {this.props.presetData.title ?\r\n                    <>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"titlePos\" label=\"Title position\" options={{\r\n                            '': 'default',\r\n                            'top:35;left:65': 'Top, left, inside',\r\n                            'top:35;right:5': 'Top, right, inside',\r\n                            'top:35;left:50': 'Top, center, inside',\r\n                            'top:50;left:65': 'Middle, left, inside',\r\n                            'top:50;right:5': 'Middle, right, inside',\r\n                            'bottom:5;left:65': 'Bottom, left, inside',\r\n                            'bottom:5;right:5': 'Bottom, right, inside',\r\n                            'bottom:5;left:50': 'Bottom, center, inside',\r\n                            /*'top:5;right:-5': 'Top, right, outside',\r\n                            'top:50;right:-5': 'Middle, right, outside',\r\n                            'bottom:5;right:-5': 'Bottom, right, outside',\r\n                            'bottom:-5;left:50': 'Bottom, center, outside',*/\r\n                        }}/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Title color', 'titleColor')}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"titleSize\" label=\"Title size\" min={0} type=\"number\" />\r\n                    </>\r\n                    : null}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabAppearance() {\r\n        return <TabPanel value=\"5\" classes={{root: this.props.classes.tabContent}}>\r\n                {/*<h4>{I18n.t('Appearance')}</h4>*/}\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Theme')}</p>\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"theme\" label=\"Theme\" noTranslate={true} options={{\r\n                        '': 'auto',\r\n                        'default': 'default',\r\n                        'dark': 'dark',\r\n                        'dark-bold': 'dark-bold',\r\n                        'dark-blue': 'dark-blue',\r\n                        'gray': 'gray',\r\n                        'vintage': 'vintage',\r\n                        'macarons': 'macarons',\r\n                        'infographic': 'infographic',\r\n                        'shine': 'shine',\r\n                        'roma': 'roma',\r\n                        'azul': 'azul',\r\n                        'bee-inspired': '',\r\n                        'blue': 'blue',\r\n                        'royal': 'royal',\r\n                        'tech-blue': 'tech-blue',\r\n                        'red': 'red',\r\n                        'red-velvet': 'red-velvet',\r\n                        'green': 'green',\r\n                    }}/>\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Chart size')}</p>\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"width\"  label=\"Width\"  classes={{fieldContainer: this.props.classes.marginTop}}/>\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"height\" label=\"Height\" classes={{fieldContainer: this.props.classes.marginTop}} />\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Backgrounds')}</p>\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Window background', 'window_bg', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Chart background', 'bg_custom', undefined, this.props.classes.marginTop)}\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Labels')}</p>\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'X labels color', 'x_labels_color', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'X ticks color', 'x_ticks_color', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Y labels color', 'y_labels_color', undefined, this.props.classes.marginTop)}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Y ticks color', 'y_ticks_color', undefined, this.props.classes.marginTop)}\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Grid')}</p>\r\n                    <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideX\" label=\"Hide X grid\" />\r\n                    <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideY\" label=\"Hide Y grid\" />\r\n                    {!this.props.presetData.grid_hideX || !this.props.presetData.grid_hideY ?\r\n                        this.renderColorField(this.props.presetData, this.updateField, 'Grid color', 'grid_color')\r\n                        : null }\r\n                </div>\r\n                <div className={this.props.classes.group}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Border')}</p>\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"noBorder\" label=\"Border\" options={{\r\n                        '': 'With border',\r\n                        'noborder': 'Without border',\r\n                    }}/>\r\n                    {this.props.presetData.noBorder !== 'noborder' ?\r\n                        <>\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_width\" label=\"Border width\" min=\"0\" type=\"number\"/>\r\n                            {this.props.presetData.border_width ? this.renderColorField(this.props.presetData, this.updateField, 'Border color', 'border_color') : null}\r\n                            {this.props.presetData.border_width ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"border_style\" label=\"Border style\" options={{\r\n                                'solid':  'solid',\r\n                                'dotted': 'dotted',\r\n                                'dashed': 'dashed',\r\n                                'double': 'double',\r\n                                'groove': 'groove',\r\n                                'ridge':  'ridge',\r\n                                'inset':  'inset',\r\n                                'outset': 'outset',\r\n                            }}/> : null}\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_padding\" label=\"Border padding\" min=\"0\" type=\"number\"/>\r\n\r\n                        </> : null}\r\n                </div>\r\n                {\r\n                    !!this.props.presetData.lines.find(line => line.chartType === 'bar') ?\r\n                        <Grid item sm={6} xs={12}>\r\n                            <h4>{I18n.t('Bar settings')}</h4>\r\n                            {this.renderColorField(this.props.presetData, this.updateField, 'Fill color', 'barColor')}\r\n                            <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"barLabels\" label=\"Show labels\" options={{\r\n                                '': 'none',\r\n                                'topover': 'top over',\r\n                                'topunder': 'top under',\r\n                                'bottom': 'bottom',\r\n                                'middle': 'middle',\r\n                            }}/>\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barWidth\" label=\"Bars width\" min=\"0\" type=\"number\"/>\r\n                            <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barFontSize\" label=\"Label font size\" min=\"0\" type=\"number\"/>\r\n                            {this.renderColorField(this.props.presetData, this.updateField, 'Label color', 'barFontColor')}\r\n                        </Grid>\r\n                        : null\r\n                }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name] || ''}\r\n                onClick={() =>\r\n                    this.setState({['_c_' + name]: formData[name]}, () =>\r\n                        this.showColorPicker(this.state['_' + name], color =>\r\n                            this.setState({['_c_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))}\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_c_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_c_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <TabContext value={this.state.selectedTab}>\r\n            <AppBar position=\"static\" className={this.props.classes.tabsContainer}>\r\n                {this.props.selectedPresetChanged || this.props.autoSave ? <Checkbox\r\n                    checked={!!this.props.autoSave}\r\n                    title={I18n.t('Auto save')}\r\n                    onChange={e => this.props.onAutoSave(e.target.checked)}\r\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                /> : null}\r\n                {!this.props.selectedPresetChanged ? <IconButton\r\n                    classes={{root: this.props.classes.noPaddingOnSide}}\r\n                    onClick={ () => window.open('chart/index.html?preset=' + this.props.selectedId, 'own-preset-echarts') }\r\n                    title={ I18n.t('Open chart in own window') }\r\n                ><IconNewWindow/></IconButton> : null}\r\n                {!this.props.autoSave && this.props.selectedPresetChanged ? <IconButton\r\n                    classes={{root: this.props.classes.noPaddingOnSide}}\r\n                    className={this.props.classes.buttonSave}\r\n                    onClick={() => this.props.savePreset()}\r\n                >\r\n                    <IconSave/>\r\n                </IconButton> : null}\r\n                <TabList\r\n                    onChange={(event, newValue)=>{\r\n                        window.localStorage.setItem('App.echarts.presetTabs.selectedTab', newValue);\r\n                        this.setState({selectedTab: newValue})\r\n                    }}\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"on\"\r\n                >\r\n                    <Tab label={I18n.t('Data')} value=\"0\"/>\r\n                    <Tab label={I18n.t('Markings')} value=\"1\"/>\r\n                    <Tab label={I18n.t('Time')} value=\"2\"/>\r\n                    <Tab label={I18n.t('Options')} value=\"3\"/>\r\n                    <Tab label={I18n.t('Title')} value=\"4\"/>\r\n                    <Tab label={I18n.t('Appearance')} value=\"5\"/>\r\n                </TabList>\r\n            </AppBar>\r\n            <div className={this.props.classes.tabsBody}>\r\n                {this.state.selectedTab === '0' ? this.renderTabLines()      : null}\r\n                {this.state.selectedTab === '1' ? this.renderTabMarkings()   : null}\r\n                {this.state.selectedTab === '2' ? this.renderTabTime()       : null}\r\n                {this.state.selectedTab === '3' ? this.renderTabOptions()    : null}\r\n                {this.state.selectedTab === '4' ? this.renderTabTitle()      : null}\r\n                {this.state.selectedTab === '5' ? this.renderTabAppearance() : null}\r\n            </div>\r\n            {this.renderDeleteLineDialog()}\r\n            {this.renderDeleteMarkDialog()}\r\n            {this.renderColorDialog()}\r\n        </TabContext>\r\n    }\r\n}\r\n\r\nPresetTabs.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    selectedId: PropTypes.string,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    systemConfig: PropTypes.object,\r\n    onAutoSave: PropTypes.func,\r\n    autoSave: PropTypes.bool,\r\n};\r\n\r\nexport default withStyles(styles)(PresetTabs)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n//import IconButton from '@material-ui/core/IconButton';\r\n\r\n//import I18n from '@iobroker/adapter-react/i18n';\r\nimport {withStyles} from '@material-ui/core/styles/index';\r\n\r\nimport PresetTabs from './Components/PresetTabs';\r\n\r\n// replace later with MdHorizontalSplit and MdVerticalSplit\r\n//const IconVerticalSplit   = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAACFJREFUeAFjAIJRwP////8PYIKWHCigNQdKj/pn1D+jAABTG16wVQqVpQAAAABJRU5ErkJggg==';\r\n//const IconHorizontalSplit = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAABtJREFUeAFjAIJRwP8fCj7QkENn/4z6Z5QzCgBjbWaoyx1PqQAAAABJRU5ErkJggg==';\r\n\r\nconst TOOLBOX_WIDTH = 0;//34;\r\n\r\nconst styles = theme => ({\r\n    logBox: {\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    },\r\n    logBoxInner: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\r\n        height: '100%',\r\n        marginLeft: TOOLBOX_WIDTH,\r\n        overflow: 'none',\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    toolbox: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        marginLeft: 2,\r\n        width: TOOLBOX_WIDTH,\r\n        height: '100%',\r\n        boxShadow: '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    iconButtons: {\r\n        width: 32,\r\n        height: 32,\r\n        padding: 4\r\n    },\r\n    layoutIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        background: theme.palette.type === 'dark' ? '#9d9d9d' : undefined,\r\n        borderRadius: theme.palette.type === 'dark' ? 30 : undefined,\r\n    },\r\n});\r\n\r\nclass SettingsEditor extends React.Component {\r\n    render() {\r\n        return <div className={this.props.classes.logBox}>\r\n            {/*false ? <div className={this.props.classes.toolbox} key=\"toolbox\">\r\n                {this.props.onLayoutChange ?\r\n                    (<IconButton\r\n                        className={this.props.classes.iconButtons}\r\n                        onClick={() => this.props.onLayoutChange()}\r\n                        title={I18n.t('Change layout')}\r\n                    >\r\n                        <img\r\n                            className={this.props.classes.layoutIcon}\r\n                            alt=\"split\"\r\n                            src={this.props.verticalLayout ? IconVerticalSplit : IconHorizontalSplit}\r\n                        />\r\n                    </IconButton>) : null}\r\n            </div> : null*/ }\r\n            <div className={this.props.classes.logBoxInner} key=\"logList\">\r\n                <PresetTabs\r\n                    width={this.props.width}\r\n                    socket={this.props.socket}\r\n                    presetData={this.props.presetData}\r\n                    selectedId={this.props.selectedId}\r\n                    onChange={this.props.onChange}\r\n                    instances={this.props.instances}\r\n                    systemConfig={this.props.systemConfig}\r\n                    selectedPresetChanged={this.props.selectedPresetChanged}\r\n                    savePreset={this.props.savePreset}\r\n                    theme={this.props.theme}\r\n                    onAutoSave={autoSave => this.props.onAutoSave(autoSave)}\r\n                    autoSave={this.props.autoSave}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nSettingsEditor.propTypes = {\r\n    socket: PropTypes.object,\r\n    selectedId: PropTypes.string,\r\n    presetData: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    onLayoutChange: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    verticalLayout: PropTypes.bool,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    onAutoSave: PropTypes.func,\r\n    autoSave: PropTypes.bool,\r\n};\r\n\r\nexport default withStyles(styles)(SettingsEditor);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\n\r\nimport {IOTextField, IOSelect, IODateTimeField} from './Fields';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IoMdTime as IconTime} from 'react-icons/all';\r\nimport {FiRefreshCw as IconRefresh} from 'react-icons/all';\r\nimport {IoMdArrowDropdown as IconDropDown} from 'react-icons/all';\r\nimport {MdAdd as IconPlus} from 'react-icons/md';\r\n\r\nclass IconAggregate extends React.Component {\r\n    render() {\r\n        return <svg onClick={e => this.props.onClick && this.props.onClick(e)} viewBox=\"0 0 32 32\" width={this.props.width || 20} height={this.props.width || 20} xmlns=\"http://www.w3.org/2000/svg\" className={ this.props.className }>\r\n            <path fill='none' stroke=\"currentColor\" strokeWidth='2' d='M16,9 L9,9 L9,16 L9,16 C9,19.8659932 12.1340068,23 16,23 L16,23 C19.8659932,23 23,19.8659932 23,16 C23,12.1340068 19.8659932,9 16,9 L16,9 Z M8,15 L15,15 L15,8 L15,8 C15,4.13400675 11.8659932,1 8,1 L8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,15 L8,15 Z' transform='rotate(180 12 12)' />        </svg>;\r\n    }\r\n}\r\n\r\nlet styles = theme => ({\r\n    mainDiv: {\r\n        paddingLeft: 40,\r\n    },\r\n    fieldsContainer: {\r\n        '& > div': {\r\n            display: 'flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        }\r\n    },\r\n    hintButton: {\r\n        marginRight: 20,\r\n        float: 'right'\r\n    },\r\n    popOver: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    refreshSelect: {\r\n        display: 'inline-block',\r\n        paddingLeft: 4,\r\n        '& > div:before': {\r\n            borderWidth: 0\r\n        },\r\n        '& > div:hover:before': {\r\n            borderBottom: 0\r\n        },\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    refreshSelectButtonTitle: {\r\n        display: 'inline-flex',\r\n        paddingTop: 6,\r\n    },\r\n    settingsButton: {\r\n        color: 'currentColor',\r\n        fontSize: 16,\r\n        textTransform: 'inherit'\r\n    },\r\n    grow1: {\r\n        flexGrow: 1,\r\n    },\r\n    aggregateIcon: {\r\n        marginTop: 4,\r\n    },\r\n});\r\n\r\nconst RefreshSelect = function (props) {\r\n    return <div className={props.className}>\r\n        <Select\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            renderValue={props.renderValue}\r\n            displayEmpty\r\n        >\r\n            {\r\n                props.options ?\r\n                    Object.keys(props.options).map((key) =>\r\n                        <MenuItem key={key} value={key}>{props.noTranslate ? props.options[key] : I18n.t(props.options[key])}</MenuItem>)\r\n                        : null\r\n            }\r\n        </Select>\r\n    </div>\r\n};\r\n\r\nconst rangeOptions = {\r\n    '10': '10 minutes',\r\n    '30': '30 minutes',\r\n    '60': '1 hour',\r\n    '120': '2 hours',\r\n    '180': '3 hours',\r\n    '360': '6 hours',\r\n    '720': '12 hours',\r\n    '1440': '1 day',\r\n    '2880': '2 days',\r\n    '4320': '3 days',\r\n    '10080': '7 days',\r\n    '20160': '14 days',\r\n    '1m': '1 month',\r\n    '2m': '2 months',\r\n    '3m': '3 months',\r\n    '6m': '6 months',\r\n    '1y': '1 year',\r\n    '2y': '2 years',\r\n};\r\nconst relativeEndOptions = {\r\n    'now': 'now',\r\n    '1minute': 'end of minute',\r\n    '5minutes': 'end of 5 minutes',\r\n    '10minutes': 'end of 10 minutes',\r\n    '30minutes': 'end of 30 minutes',\r\n    '1hour': 'end of hour',\r\n    '2hours': 'end of 2 hours',\r\n    '3hours': 'end of 3 hours',\r\n    '4hours': 'end of 4 hours',\r\n    '6hours': 'end of 6 hours',\r\n    '8hours': 'end of 8 hours',\r\n    '12hours': 'end of 12 hours',\r\n    'today': 'end of day',\r\n    'weekEurope': 'end of sunday',\r\n    'weekUsa': 'end of saturday',\r\n    'month': 'this month',\r\n    'year': 'this year',\r\n};\r\nconst liveOptions = {\r\n    '': 'none',\r\n    '5': '5 seconds',\r\n    '10': '10 seconds',\r\n    '15': '15 seconds',\r\n    '20': '20 seconds',\r\n    '30': '30 seconds',\r\n    '60': '1 minute',\r\n    '120': '2 minutes',\r\n    '300': '5 minutes',\r\n    '600': '10 minutes',\r\n    '900': '15 minutes',\r\n    '1200': '20 minutes',\r\n    '1800': '30 minutes',\r\n    '3600': '1 hour',\r\n    '7200': '2 hours',\r\n    '10800': '3 hours',\r\n    '21600': '6 hours',\r\n    '43200': '12 hours',\r\n    '86400': '1 day',\r\n};\r\n\r\nconst CHART_TYPES = {\r\n    auto: 'Auto (Line or Steps)',\r\n    line: 'Line',\r\n    //bar: 'Bar',\r\n    scatterplot: 'Scatter plot',\r\n    steps: 'Steps',\r\n    spline: 'Spline',\r\n};\r\n\r\nconst AGGREGATES = {\r\n    minmax: 'minmax',\r\n    average: 'average',\r\n    min: 'min',\r\n    max: 'max',\r\n    total: 'total',\r\n    onchange: 'raw',\r\n};\r\n\r\nclass ChartSettings extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timeSpanOpened: false,\r\n            aggregateOpened: false,\r\n            refreshOpened: false\r\n        };\r\n    }\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n        window.localStorage.setItem('App.echarts.__' + name, value);\r\n    };\r\n\r\n    render() {\r\n        return <Toolbar className={this.props.classes.mainDiv} variant=\"dense\">\r\n            <Button\r\n                title={ I18n.t('Time span') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"timeSpanOpenButton\"\r\n                onClick={() => {this.setState({timeSpanOpened: !this.state.timeSpanOpened})}}\r\n            >\r\n                <IconTime/>\r\n                {\r\n                    this.props.presetData.timeType === 'relative' ?\r\n                    I18n.t(rangeOptions[this.props.presetData.range]) + ' ' + I18n.t('to') + ' ' + I18n.t(relativeEndOptions[this.props.presetData.relativeEnd]) :\r\n                    this.props.presetData.start + ' ' + this.props.presetData.start_time + ' - ' + this.props.presetData.end + ' ' + this.props.presetData.end_time\r\n                }\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover className={this.props.classes.popOver}\r\n                open={this.state.timeSpanOpened}\r\n                onClose={()=>{this.setState({timeSpanOpened: false})}}\r\n                anchorEl={()=> document.getElementById('timeSpanOpenButton')}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={relativeEndOptions}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={rangeOptions}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            <Button\r\n                title={ I18n.t('Aggregate') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"aggregateOpenButton\"\r\n                onClick={() => {this.setState({aggregateOpened: !this.state.aggregateOpened})}}\r\n            >\r\n                <IconAggregate className={this.props.classes.aggregateIcon}/>\r\n                {CHART_TYPES[this.props.presetData.chartType] ? I18n.t(CHART_TYPES[this.props.presetData.chartType]) : ''}\r\n                /\r\n                {AGGREGATES[this.props.presetData.aggregate] ? I18n.t(AGGREGATES[this.props.presetData.aggregate]) : ''}\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover\r\n                open={this.state.aggregateOpened}\r\n                anchorEl={()=> document.getElementById('aggregateOpenButton')}\r\n                onClose={()=>{this.setState({aggregateOpened: false})}}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"chartType\"\r\n                            label=\"Chart type\"\r\n                            options={CHART_TYPES}\r\n                        />\r\n                        {this.props.presetData.chartType !== 'auto' ? <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"aggregate\"\r\n                            label=\"Aggregate\"\r\n                            options={AGGREGATES}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                            label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        /> : null}\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            {this.props.presetData.timeType === 'relative' ? <RefreshSelect\r\n                className={this.props.classes.refreshSelect}\r\n                minWidth={0} width=\"initial\"\r\n                formData={this.props.presetData}\r\n                updateValue={this.updateField}\r\n                name=\"live\"\r\n                label=\"\"\r\n                title={I18n.t('Auto-refresh')}\r\n                options={liveOptions}\r\n                renderValue={()=>\r\n                    <div className={this.props.classes.refreshSelectButtonTitle}>\r\n                        <IconRefresh/>&nbsp;{I18n.t(liveOptions[this.props.presetData.live])}\r\n                    </div>\r\n                }\r\n            /> : null }\r\n            <div className={this.props.classes.grow1}/>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={this.props.classes.hintButton}\r\n                onClick={() => this.props.onCreatePreset(true)}\r\n            >\r\n                <IconPlus className={this.props.classes.buttonIcon}/>\r\n                {I18n.t('Create preset')}\r\n            </Button>\r\n        </Toolbar>;\r\n    }\r\n}\r\n\r\nChartSettings.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    onCreatePreset: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(ChartSettings)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst styles = theme => ({\r\n    darkBackground: {\r\n        stroke: '#3a3a3a !important',\r\n        fill: '#515151 !important',\r\n    },\r\n    iframe: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto',\r\n        border: 0,\r\n        color: theme.palette.primary.main// && console.log(JSON.stringify(theme))\r\n    }\r\n});\r\n\r\n/*function deParam(params, coerce) {\r\n    const obj = {};\r\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\r\n\r\n    // Iterate over all name=value pairs.\r\n    (params || '').replace(/\\+/g, ' ').split('&').forEach(v => {\r\n        const param = v.split('=');\r\n        let key = decodeURIComponent(param[0]);\r\n        let val;\r\n        let i = 0;\r\n\r\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\r\n        // into its component parts.\r\n        let keys = key.split('][');\r\n        let keysLast = keys.length - 1;\r\n\r\n        // If the first keys part contains [ and the last ends with ], then []\r\n        // are correctly balanced.\r\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\r\n            // Remove the trailing ] from the last keys part.\r\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\r\n\r\n            // Split first keys part into two parts on the [ and add them back onto\r\n            // the beginning of the keys array.\r\n            keys = keys.shift().split('[').concat(keys);\r\n\r\n            keysLast = keys.length - 1;\r\n        } else {\r\n            // Basic 'foo' style key.\r\n            keysLast = 0;\r\n        }\r\n\r\n        // Are we dealing with a name=value pair, or just a name?\r\n        if (param.length === 2) {\r\n            val = decodeURIComponent(param[1]);\r\n\r\n            // Coerce values.\r\n            if (coerce) {\r\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\r\n                    : val === 'undefined' ? undefined         // undefined\r\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\r\n                            : val;                                                          // string\r\n            }\r\n\r\n            if (keysLast) {\r\n                let cur = obj;\r\n                // Complex key, build deep object structure based on a few rules:\r\n                // * The 'cur' pointer starts at the object top-level.\r\n                // * [] = array push (n is set to array length), [n] = array if n is\r\n                //   numeric, otherwise object.\r\n                // * If at the last keys part, set the value.\r\n                // * For each keys part, if the current level is undefined create an\r\n                //   object or array based on the type of the next keys part.\r\n                // * Move the 'cur' pointer to the next level.\r\n                // * Rinse & repeat.\r\n                for (; i <= keysLast; i++) {\r\n                    key = keys[i] === '' ? cur.length : keys[i];\r\n                    cur = cur[key] = i < keysLast\r\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\r\n                        : val;\r\n                }\r\n\r\n            } else {\r\n                // Simple key, even simpler rules, since only scalars and shallow\r\n                // arrays are allowed.\r\n\r\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\r\n                    // val is already an array, so push on the next value.\r\n                    obj[key].push(val);\r\n                } else if ({}.hasOwnProperty.call(obj, key)) {\r\n                    // val isn't an array, but since a second value has been specified,\r\n                    // convert val into an array.\r\n                    obj[key] = [obj[key], val];\r\n                } else {\r\n                    // val is a scalar.\r\n                    obj[key] = val;\r\n                }\r\n            }\r\n        } else if (key) {\r\n            // No value was defined, so set something meaningful.\r\n            obj[key] = coerce\r\n                ? undefined\r\n                : '';\r\n        }\r\n    });\r\n\r\n    return obj;\r\n}*/\r\n\r\nclass ChartFrame extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.ready = false;\r\n        this.refIframe = React.createRef();\r\n        this.lastPresetData = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('message', this.onReceiveMessage, false);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('message', this.onReceiveMessage, false);\r\n    }\r\n\r\n    onReceiveMessage = message => {\r\n        if (message && message.data === 'chartReady') {\r\n            this.ready = true;\r\n            this.lastPresetData = JSON.stringify(this.props.presetData);\r\n            this.refIframe.contentWindow.postMessage(this.lastPresetData);\r\n            console.log('Received ready from iframe');\r\n        }\r\n    };\r\n\r\n    render() {\r\n        if (window.location.port === '3000') {\r\n            return <Paper className={this.props.classes.iframe} style={{background: '#333'}}>\r\n                <pre>{JSON.stringify(this.props.presetData, null, 2)}</pre>\r\n            </Paper>;\r\n        } else {\r\n            if (this.lastPresetData !== JSON.stringify(this.props.presetData) && this.ready) {\r\n                this.lastPresetData = JSON.stringify(this.props.presetData);\r\n                this.refIframe.contentWindow.postMessage(this.lastPresetData);\r\n            }\r\n\r\n            return <iframe ref={el => this.refIframe = el}\r\n                title=\"iobrokerChart\"\r\n                className={this.props.classes.iframe}\r\n                src={this.props.src}>\r\n            </iframe>;\r\n        }\r\n    }\r\n}\r\n\r\nChartFrame.propTypes = {\r\n    src: PropTypes.string,\r\n    presetData: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(ChartFrame);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {MuiThemeProvider, withStyles} from '@material-ui/core/styles';\r\n\r\nimport ChartSettings from './Components/ChartSettings';\r\nimport ChartFrame from './Components/ChartFrame';\r\n\r\nconst styles = theme => ({\r\n    toolbar: {\r\n        //a: console.log(JSON.stringify(theme)),\r\n        minHeight: theme.mixins.toolbar.minHeight,\r\n        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    editorDiv: {\r\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + 38 + 1}px)`,\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        position: 'relative'\r\n    },\r\n    textButton: {\r\n        marginRight: 10,\r\n        minHeight: 24,\r\n        padding: '6px 16px'\r\n    },\r\n    tabIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        verticalAlign: 'middle',\r\n        marginBottom: 2,\r\n        marginRight: 2,\r\n        borderRadius: 3\r\n    },\r\n    hintIcon: {\r\n        //fontSize: 32,\r\n        padding: '0 8px 0 8px'\r\n    },\r\n    hintText: {\r\n        //fontSize: 18\r\n    },\r\n    tabMenuButton: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        right: 0,\r\n    },\r\n    tabChanged: {\r\n        color: theme.palette.secondary.main\r\n    },\r\n    tabText: {\r\n        maxWidth: 130,\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n    },\r\n    tabChangedIcon: {\r\n        color: '#FF0000',\r\n        fontSize: 16\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 0,\r\n        zIndex: 10,\r\n        padding: 8,\r\n        cursor: 'pointer'\r\n    },\r\n    notRunning: {\r\n        color: '#ffbc00'\r\n    },\r\n    tabButton: {\r\n\r\n    },\r\n    tabButtonWrapper: {\r\n        display: 'inline-block',\r\n    },\r\n    menuIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2,\r\n        marginRight: 5\r\n    },\r\n    container: {\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    heightWithoutToolbar: {\r\n        height: 'calc(100% - 48px)',\r\n    },\r\n    height100: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\nclass MainChart extends React.Component {\r\n    renderToolbar() {\r\n        return this.props.selectedId && typeof this.props.selectedId === 'string' ? null :\r\n            <ChartSettings\r\n                onChange={this.props.onChange}\r\n                enablePresetMode={this.props.enablePresetMode}\r\n                presetData={this.props.presetData}\r\n                onCreatePreset={(name, parentId, historyInstance, stateId) => this.props.onCreatePreset(name, parentId, historyInstance, stateId)}\r\n            />;\r\n    }\r\n\r\n    getChartFrame() {\r\n        const URL = (window.location.search || '').includes('dev=true') ? 'http://localhost:3000/' : 'chart/';\r\n\r\n        return <div style={{display: this.props.visible ? 'block' : 'none'}} className={typeof this.props.selectedId !== 'string' ? this.props.classes.heightWithoutToolbar : this.props.classes.height100}>\r\n            <ChartFrame\r\n                src={URL + 'index.html?edit=1'}\r\n                presetData={this.props.presetData}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <MuiThemeProvider theme={this.props.theme}>\r\n            <div className={this.props.classes.container}>\r\n                {this.renderToolbar()}\r\n                {this.getChartFrame()}\r\n            </div>\r\n        </MuiThemeProvider>\r\n    }\r\n}\r\n\r\nMainChart.propTypes = {\r\n    onChange: PropTypes.func.isRequired,\r\n    onCreatePreset: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool,\r\n    runningInstances: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    chartsList: PropTypes.array,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.object]),\r\n    theme: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(MainChart);\r\n","import React, {Component} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport withWidth from \"@material-ui/core/withWidth\";\r\nimport {withStyles, withTheme} from \"@material-ui/core/styles\";\r\nimport clsx from 'clsx';\r\nimport { useDrag, useDrop, DndProvider as DragDropContext  } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend'\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n// icons\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdModeEdit as IconEdit} from 'react-icons/md';\r\nimport {MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdCheck as IconCheck} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {FaScroll as IconScript} from 'react-icons/all';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport {BsFolderSymlink as IconMoveToFolder} from 'react-icons/bs';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nfunction getFolderPrefix(presetId) {\r\n    let result = presetId.split('.');\r\n    result.shift();\r\n    result.shift();\r\n    result.pop();\r\n    result = result.join('.');\r\n    return result;\r\n}\r\n\r\nfunction getFolderList(folder) {\r\n    let result = [];\r\n    result.push(folder);\r\n    Object.values(folder.subFolders).forEach(subFolder =>\r\n        result = result.concat(getFolderList(subFolder)));\r\n\r\n    return result;\r\n}\r\n\r\nexport const Droppable = (props) => {\r\n    const { onDrop} = props;\r\n\r\n    const [{ isOver, isOverAny}, drop] = useDrop({\r\n        accept: ['script'],\r\n        drop: e => isOver ? onDrop(e) : undefined,\r\n        collect: monitor => ({\r\n            isOver: monitor.isOver({ shallow: true }),\r\n            isOverAny: monitor.isOver(),\r\n        }),\r\n    });\r\n\r\n    return <div ref={drop} className={clsx(isOver && 'js-folder-dragover', isOverAny && 'js-folder-dragging')}>\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\nexport const Draggable = (props) => {\r\n    const { name } = props;\r\n    const [{ opacity }, drag] = useDrag({\r\n        item: {\r\n            name,\r\n            type: 'script'\r\n        },\r\n        collect: (monitor) => ({\r\n            opacity: monitor.isDragging() ? 0.3 : 1,\r\n        }),\r\n    });\r\n    return <div ref={drag} style={{ opacity }}>\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\nconst LEVEL_PADDING = 16;\r\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\r\n\r\nconst styles = theme => ({\r\n    noGutters: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        width: '100%'\r\n    },\r\n    changed: {\r\n        position: 'relative',\r\n        '&:after': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            top: 2,\r\n            right: 2,\r\n            width: 5,\r\n            height: 5,\r\n            borderRadius: 5,\r\n            background: theme.type === 'dark' ? '#CC0000' : '#CC0000',\r\n        }\r\n    },\r\n    itemIcon: {\r\n        width: 32,\r\n        height: 32,\r\n        marginRight: 4,\r\n    },\r\n    itemIconFolder: {\r\n        cursor: 'pointer'\r\n    },\r\n    buttonsContainer: {\r\n        '& button': {\r\n            whiteSpace: 'nowrap'\r\n        }\r\n    },\r\n    itemIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.primary.light : theme.palette.primary.dark\r\n    },\r\n    folderIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.secondary.dark : theme.palette.secondary.light\r\n    },\r\n    width100: {\r\n        width: '100%',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    itemIconRoot: {\r\n        minWidth: 24,\r\n    },\r\n    listItemSubTitle: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.7,\r\n        fontStyle: 'italic'\r\n    }\r\n});\r\n\r\nclass MenuList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let presetsOpened;\r\n        try {\r\n            presetsOpened = JSON.parse(window.localStorage.getItem('App.echarts.presets.opened')) || [];\r\n        } catch (e) {\r\n            presetsOpened = [];\r\n        }\r\n\r\n        this.state = {\r\n            presetsOpened,\r\n\r\n            presets: {},\r\n            presetFolders: null,\r\n            changingPreset: '',\r\n\r\n            deletePresetDialog: null,\r\n            movePresetDialog: null,\r\n            newPresetFolder: '',\r\n            addPresetFolderDialog: null,\r\n            addPresetFolderName: null,\r\n            editPresetFolderDialog: null,\r\n            editPresetFolderName: null,\r\n        };\r\n\r\n        this.getAllPresets()\r\n            .then(newState => this.setState(newState));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeObject(this.props.adapterName  + '.0.*', this.onPresetChange);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeObject(this.props.adapterName  + '.0.*', this.onPresetChange);\r\n    }\r\n\r\n    onPresetChange = (id, obj) => {\r\n        const presets = JSON.parse(JSON.stringify(this.state.presets));\r\n        let changed = false;\r\n        if (obj) {\r\n            obj.common = obj.common || {};\r\n            obj.native = obj.native || {};\r\n            if (JSON.stringify(obj) !== JSON.stringify(presets[id])) {\r\n                presets[id] = obj;\r\n                changed = true;\r\n            }\r\n        } else if (presets[id]) {\r\n            delete presets[id];\r\n            changed = true;\r\n        }\r\n\r\n        if (changed) {\r\n            const newState = {presets, changingPreset: '', presetFolders: this.buildPresetTree(presets)};\r\n            this.setState(newState);\r\n        }\r\n    };\r\n\r\n    getAllPresets(newState) {\r\n        newState = newState || {};\r\n        let presets = {};\r\n        return new Promise((resolve, reject) =>\r\n            this.props.socket._socket.emit('getObjectView', 'chart', 'chart', {\r\n                startkey: this.props.adapterName + '.',\r\n                endkey: this.props.adapterName + '.\\u9999'\r\n            }, (err, res) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    res && res.rows && res.rows.forEach(preset => presets[preset.value._id] = preset.value);\r\n                    newState.presets = presets;\r\n                    newState.changingPreset = '';\r\n\r\n                    // fill missing info\r\n                    Object.keys(newState.presets).forEach(id => {\r\n                        const presetObj = newState.presets[id];\r\n                        presetObj.common = presetObj.common || {};\r\n                        presetObj.native = presetObj.native || {};\r\n                    });\r\n\r\n                    newState.presetFolders = this.buildPresetTree(presets);\r\n                    resolve(newState);\r\n                }\r\n            }));\r\n    }\r\n\r\n    renderPresetsTree(parent, level) {\r\n        let result = [];\r\n        level = level || 0;\r\n        let presetsOpened = this.state.presetsOpened && parent ? this.state.presetsOpened.includes(parent.prefix) : false;\r\n\r\n        //const depthPx = level * LEVEL_PADDING;\r\n\r\n        const reactChildren = [];\r\n        if (parent && (presetsOpened || !parent.id)) { // root cannot be closed and have id = ''\r\n            const values     = Object.values(parent.presets);\r\n            const subFolders = Object.values(parent.subFolders);\r\n\r\n            // add first sub-folders\r\n            reactChildren.push(subFolders.sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0)).map(subFolder =>\r\n                this.renderPresetsTree(subFolder, level + 1)));\r\n\r\n            // Add as second the presets\r\n            const preset = <ListItem\r\n                key={ 'items_' + parent.prefix }\r\n                classes={ {gutters: this.props.classes.noGutters} }\r\n                className={ this.props.classes.width100 }>\r\n                <List\r\n                    className={ this.props.classes.list }\r\n                    classes={ {root: clsx(this.props.classes.leftMenuItem, this.props.classes.noGutters)} }\r\n                    //style={ {paddingLeft: depthPx} }\r\n                >\r\n                    { values.length ?\r\n                        values.sort((a, b) => a._id > b._id ? 1 : (a._id < b._id ? -1 : 0)).map(preset => this.renderTreePreset(preset, level, subFolders.length))\r\n                        :\r\n                        (!subFolders.length ? <ListItem classes={ {gutters: this.props.classes.noGutters} }><ListItemText className={ this.props.classes.folderItem}>{ I18n.t('No presets created yet')}</ListItemText></ListItem> : '')\r\n                    }\r\n                </List>\r\n            </ListItem>;\r\n\r\n            reactChildren.push(preset);\r\n        }\r\n\r\n        // Show folder item\r\n        if (parent && parent.id) {\r\n            const depthPx = level * LEVEL_PADDING;\r\n\r\n            const folder = <ListItem\r\n                key={ parent.prefix }\r\n                classes={ {gutters: this.props.classes.noGutters } }\r\n                className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                style={ {paddingLeft: depthPx} }\r\n            >\r\n                <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.folderIconPreset)} } onClick={ () => this.togglePresetsFolder(parent) }>{ presetsOpened ?\r\n                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                }</ListItemIcon>\r\n                <ListItemText>{ parent.id }</ListItemText>\r\n                <ListItemSecondaryAction>\r\n                    {parent && parent.id && presetsOpened ? <IconButton\r\n                        onClick={() => this.props.onCreatePreset(null, parent.id)}\r\n                        title={ I18n.t('Create new preset') }\r\n                    ><IconAdd/></IconButton> : null}\r\n                    <IconButton\r\n                        onClick={() => this.setState({editPresetFolderDialog: parent, editPresetFolderName: parent.id, editFolderDialogTitleOrigin: parent.id})}\r\n                        title={I18n.t('Edit folder name')}\r\n                    ><IconEdit/></IconButton>\r\n                    <IconButton onClick={ () => this.togglePresetsFolder(parent) } title={ presetsOpened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                        { presetsOpened ? <IconCollapse/> : <IconExpand/> }\r\n                    </IconButton>\r\n                </ListItemSecondaryAction>\r\n            </ListItem>;\r\n\r\n            if (this.props.reorder) {\r\n                result.push(folder);\r\n                result.push(reactChildren);\r\n            } else {\r\n                result.push(<Droppable key={'droppable_' + parent.prefix}\r\n                                       onDrop={e => {\r\n                                           console.log('Drop ' + e.name + ' to '+  parent.prefix)\r\n                                           /*this.onDragFinish(e.name, item.id)*/\r\n                                       }}\r\n                >\r\n                    {folder}\r\n                    {reactChildren || null}\r\n                </Droppable>);\r\n            }\r\n        } else {\r\n            reactChildren.forEach(r => result.push(r));\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    renamePresetFolder(folder, newName) {\r\n        return new Promise(resolve => this.setState({changingPreset: folder}, () => resolve()))\r\n            .then(() => {\r\n                let newSelectedId;\r\n                let pos;\r\n                // if selected folder opened, replace its ID in this.state.opened\r\n                if ((pos = this.state.presetsOpened.indexOf(folder.prefix)) !== -1) {\r\n                    const presetsOpened = [...this.state.presetsOpened];\r\n                    presetsOpened.splice(pos, 1);\r\n                    presetsOpened.push(newName);\r\n                    presetsOpened.sort();\r\n                    this.setState({presetsOpened});\r\n                }\r\n\r\n                let prefix = folder.prefix.split('.');\r\n                prefix[prefix.length - 1] = newName;\r\n                prefix = prefix.join('.');\r\n\r\n                if (Object.keys(folder.presets).find(id => id === this.props.selectedId)) {\r\n                    newSelectedId = 'preset.0.' + prefix + '.' + this.props.selectedId.split('.').pop();\r\n                }\r\n\r\n                const promises = Object.keys(folder.presets).map(presetId =>\r\n                    this.addPresetToFolderPrefix(folder.presets[presetId], prefix, true));\r\n\r\n                return Promise.all(promises)\r\n                    .then(() => this.getAllPresets())\r\n                    .then(newState =>\r\n                        this.setState(newState, () =>\r\n                            this.props.onSelectedChanged(newSelectedId)));\r\n            });\r\n    }\r\n\r\n    isNameUnique(name) {\r\n        return !Object.keys(this.state.presets).find(id => this.state.presets[id].common.name === name);\r\n    }\r\n\r\n    buildPresetTree(presets) {\r\n        // console.log(presets);\r\n        presets = Object.values(presets);\r\n\r\n        let presetFolders = {subFolders: {}, presets: {}, id: '', prefix: ''};\r\n\r\n        // create missing folders\r\n        presets.forEach((preset) => {\r\n            let id = preset._id;\r\n            const parts = id.split('.');\r\n            parts.shift();\r\n            parts.shift();\r\n            let currentFolder = presetFolders;\r\n            let prefix = '';\r\n            for (let i = 0; i < parts.length - 1; i++) {\r\n                if (prefix) {\r\n                    prefix = prefix + '.';\r\n                }\r\n                prefix = prefix + parts[i];\r\n                if (!currentFolder.subFolders[parts[i]]) {\r\n                    currentFolder.subFolders[parts[i]] = {\r\n                        subFolders: {},\r\n                        presets: {},\r\n                        id: parts[i],\r\n                        prefix,\r\n                    }\r\n                }\r\n                currentFolder = currentFolder.subFolders[parts[i]];\r\n            }\r\n            currentFolder.presets[id] = preset;\r\n        });\r\n\r\n        return presetFolders;\r\n    }\r\n\r\n    findFolder(parent, folder) {\r\n        if (parent.prefix === folder.prefix) {\r\n            return parent;\r\n        }\r\n        for (let index in parent.subFolders) {\r\n            let result = this.findFolder(parent.subFolders[index], folder);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    addFolder(parentFolder, id) {\r\n        let presetFolders = JSON.parse(JSON.stringify(this.state.presetFolders));\r\n        parentFolder = parentFolder || presetFolders;\r\n        let _parentFolder = this.findFolder(presetFolders, parentFolder);\r\n\r\n        let presetsOpened = JSON.parse(JSON.stringify(this.state.presetsOpened));\r\n\r\n        _parentFolder.subFolders[id] = {\r\n            presets: {},\r\n            subFolders: {},\r\n            id,\r\n            prefix: _parentFolder.prefix ? _parentFolder.prefix + '.' + id : id\r\n        };\r\n\r\n        presetsOpened.push(id);\r\n\r\n        return new Promise(resolve =>\r\n            this.setState({presetFolders, presetsOpened}, () => resolve()));\r\n    }\r\n\r\n    renderTreePreset(item, level, anySubFolders) {\r\n        const preset = this.state.presets[item._id];\r\n        if (!preset || (this.props.search && !item.common.name.includes(this.props.search))) {\r\n            return null;\r\n        }\r\n\r\n        level = level || 0;\r\n\r\n        const listItem = <ListItem\r\n            classes={ {gutters: clsx(this.props.classes.noGutters, this.props.selectedId === preset._id && this.props.selectedPresetChanged && this.props.classes.changed)} }\r\n            style={ {paddingLeft: level * LEVEL_PADDING } }\r\n            key={ item._id }\r\n            selected={this.props.selectedId === item._id}\r\n            button\r\n            onClick={() => this.props.onSelectedChanged(preset._id)}\r\n        >\r\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.itemIconPreset)} }><IconScript className={ this.props.classes.itemIcon }/></ListItemIcon>\r\n            <ListItemText\r\n                classes={ {primary: this.props.classes.listItemTitle, secondary: this.props.classes.listItemSubTitle} }\r\n                primary={ <>\r\n                    { Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}) }\r\n                </>}\r\n                secondary={ Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}, true) }\r\n            />\r\n            <ListItemSecondaryAction>\r\n                {this.state.changingPreset === preset._id ?\r\n                    <CircularProgress size={ 24 }/>\r\n                    :\r\n                    <>\r\n                        {this.props.selectedId !== preset._id || !this.props.selectedPresetChanged ? <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"Rename\"\r\n                            title={ I18n.t('Rename') }\r\n                            onClick={ (e) => {\r\n                                e.stopPropagation();\r\n                                this.setState({renameDialog: preset._id, renamePresetDialogTitle: item.common.name})\r\n                            }}\r\n                        >\r\n                            <IconEdit/>\r\n                        </IconButton> : null }\r\n                        {level || anySubFolders ?\r\n                            <IconButton\r\n                                size=\"small\"\r\n                                aria-label=\"Move to folder\"\r\n                                title={ I18n.t('Move to folder') }\r\n                                onClick={ () => this.setState({movePresetDialog: preset._id, newPresetFolder: getFolderPrefix(preset._id)}) }>\r\n                                <IconMoveToFolder/>\r\n                            </IconButton> : null}\r\n                        <IconButton size=\"small\" aria-label=\"Delete\" title={ I18n.t('Delete') } onClick={ () => this.setState({deletePresetDialog: preset._id}) }><IconDelete/></IconButton>\r\n                    </>\r\n                }\r\n            </ListItemSecondaryAction>\r\n        </ListItem>;\r\n\r\n        if (this.props.reorder) {\r\n            return <Draggable key={'draggable_' + item._id} name={item._id}>{listItem}</Draggable>;\r\n        } else {\r\n            return  listItem;\r\n        }\r\n\r\n    }\r\n\r\n    togglePresetsFolder(folder) {\r\n        const presetsOpened = [...this.state.presetsOpened];\r\n        const pos = presetsOpened.indexOf(folder.prefix);\r\n        if (pos === -1) {\r\n            presetsOpened.push(folder.prefix);\r\n        } else {\r\n            presetsOpened.splice(pos, 1);\r\n\r\n            // If active preset is inside this folder select the first preset\r\n            if (Object.keys(folder.presets).includes(this.props.selectedId)) {\r\n                return this.props.onSelectedChanged(null, allowedId => {\r\n                    if (allowedId !== false) {\r\n                        window.localStorage.setItem('App.echarts.presets.opened', JSON.stringify(presetsOpened));\r\n                        this.setState({presetsOpened});\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        window.localStorage.setItem('App.echarts.presets.opened', JSON.stringify(presetsOpened));\r\n\r\n        this.setState({presetsOpened});\r\n    }\r\n\r\n    renderAddFolderDialog() {\r\n        return this.props.addPresetFolderDialog ?\r\n            <Dialog\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={ true }\r\n                onClose={ () => this.props.onClosePresetFolderDialog()}\r\n            >\r\n                <DialogTitle>{I18n.t('Create folder')}</DialogTitle>\r\n                <DialogContent className={ this.props.classes.p }>\r\n                    <TextField\r\n                        fullWidth={true}\r\n                        label={ I18n.t('Title') }\r\n                        value={ this.state.addPresetFolderName }\r\n                        onChange={ e => this.setState({addPresetFolderName: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()})}\r\n                        onKeyPress={e => {\r\n                            if (this.state.addPresetFolderName && e.which === 13) {\r\n                                this.addFolder(null, this.state.addPresetFolderName)\r\n                                    .then(() => this.props.onClosePresetFolderDialog());\r\n                            }\r\n                        }}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => this.props.onClosePresetFolderDialog()}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        disabled={!this.state.addPresetFolderName || Object.keys(this.state.presetFolders.subFolders).find(name => name === this.state.addPresetFolderName)}\r\n                        onClick={() =>\r\n                            this.addFolder(null, this.state.addPresetFolderName)\r\n                                .then(() => this.props.onClosePresetFolderDialog())\r\n                        }\r\n                        color=\"primary\" autoFocus\r\n                    >\r\n                        <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                        {I18n.t('Create')}\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    }\r\n\r\n    renderRenameFolderDialog() {\r\n        if (!this.state.editPresetFolderDialog) {\r\n            return null;\r\n        }\r\n\r\n        const isUnique = !Object.keys(this.state.presetFolders.subFolders).find(folder => folder.id === this.state.editPresetFolderName);\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ !!this.state.editPresetFolderDialog }\r\n            onClose={ () => this.setState({editPresetFolderDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Edit folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    fullWidth={true}\r\n                    label={ I18n.t('Title') }\r\n                    value={ this.state.editPresetFolderName }\r\n                    onKeyPress={e => {\r\n                        if (this.state.editPresetFolderName && e.which === 13) {\r\n                            this.renamePresetFolder(this.state.editPresetFolderDialog, this.state.editPresetFolderName)\r\n                                .then(() => this.setState({editPresetFolderDialog: null}));\r\n                        }\r\n                    }}\r\n                    onChange={ e => this.setState({editPresetFolderName: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()}) }/>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({editPresetFolderDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.editPresetFolderName || this.state.editFolderDialogTitleOrigin === this.state.editPresetFolderName || !isUnique}\r\n                    onClick={ () => {\r\n                        this.renamePresetFolder(this.state.editPresetFolderDialog, this.state.editPresetFolderName)\r\n                            .then(() => this.setState({editPresetFolderDialog: null}));\r\n                    }}\r\n                    color=\"primary\"\r\n                    autoFocus\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderMoveDialog() {\r\n        if (!this.state.movePresetDialog) {\r\n            return null;\r\n        }\r\n\r\n        const newPresetFolder = this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder;\r\n        const presetId = this.state.movePresetDialog;\r\n        const newId = 'preset.0.' + newPresetFolder + (newPresetFolder ? '.' : '') + presetId;\r\n\r\n        const isIdUnique = !Object.keys(this.state.presets).find(id => id === newId);\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"movePresetDialog\"\r\n            onClose={ () => this.setState({movePresetDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Move to folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <InputLabel shrink={ true }>{ I18n.t('Folder') }</InputLabel>\r\n                    <Select\r\n                        fullWidth={true}\r\n                        className={ this.props.classes.width100 }\r\n                        value={ this.state.newPresetFolder || '__root__' }\r\n                        onChange={e => this.setState({newPresetFolder: e.target.value}) }\r\n                        onKeyPress={e => e.which === 13 && this.setState({movePresetDialog: null}, () =>\r\n                            this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder))\r\n                        }\r\n                    >\r\n                        { getFolderList(this.state.presetFolders).map(folder =>\r\n                            <MenuItem\r\n                                key={ folder.prefix }\r\n                                value={ folder.prefix || '__root__' }\r\n                            >\r\n                                { folder.prefix ? folder.prefix.replace('.', ' > ') : I18n.t('Root') }\r\n                            </MenuItem>)\r\n                        }\r\n                    </Select>\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({movePresetDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !isIdUnique }\r\n                    color=\"primary\" onClick={() =>\r\n                    this.setState({movePresetDialog: null}, () =>\r\n                        this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder))\r\n                }\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Move to folder') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderRenameDialog() {\r\n        if (!this.state.renameDialog) {\r\n            return null;\r\n        }\r\n\r\n        const presetId = this.state.renameDialog;\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"renameDialog\"\r\n            onClose={ () => this.setState({renameDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Rename preset') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <TextField\r\n                        fullWidth={true}\r\n                        label={ I18n.t('Name') }\r\n                        value={ this.state.renamePresetDialogTitle }\r\n                        onChange={ e => this.setState({renamePresetDialogTitle: e.target.value})}\r\n                        onKeyPress={e => {\r\n                            if (this.isNameUnique(this.state.renamePresetDialogTitle) && this.state.renamePresetDialogTitle && e.which === 13) {\r\n                                this.setState({renameDialog: null}, () =>\r\n                                    this.renamePreset(presetId, this.state.renamePresetDialogTitle));\r\n                            }\r\n                        }}\r\n                    />\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({renameDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.renamePresetDialogTitle || !this.isNameUnique(this.state.renamePresetDialogTitle) }\r\n                    color=\"primary\" onClick={() =>\r\n                    this.setState({renameDialog: null}, () =>\r\n                        this.renamePreset(presetId, this.state.renamePresetDialogTitle))\r\n                }\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderDeleteDialog() {\r\n        return this.state.deletePresetDialog ? <Dialog\r\n            open={ true }\r\n            key=\"deletePresetDialog\"\r\n            onClose={ () => this.setState({deletePresetDialog: false}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this preset?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deletePresetDialog: false}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deletePreset(this.state.deletePresetDialog);\r\n                    this.setState({deletePresetDialog: false});\r\n                }}>\r\n                    <IconDelete className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderSelectIdDialog() {\r\n        if (!this.state.showAddStateDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogSelectID\r\n                key={'selectDialog_add'}\r\n                socket={ this.props.socket }\r\n                dialogName={'Add'}\r\n                type={'state'}\r\n                title={ I18n.t('Enable logging for state')}\r\n                onOk={id => {\r\n                    console.log('Selected ' + id);\r\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\r\n                    if (id) {\r\n                        this.props.socket.getObject(id)\r\n                            .then(obj => {\r\n                                if (!obj || !obj.common) {\r\n                                    return this.props.onShowError(I18n.t('Invalid object'));\r\n                                }\r\n                                if (obj.common.custom && obj.common.custom[instance]) {\r\n                                    return this.showToast(I18n.t('Already enabled'));\r\n                                } else {\r\n                                    obj.common.custom = obj.common.custom || {};\r\n                                    obj.common.custom[instance] = {\r\n                                        enabled: true,\r\n                                    };\r\n                                    this.props.socket.setObject(id, obj)\r\n                                        .then(() => {\r\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\r\n                                            inst.enabledDP = inst.enabledDP || {};\r\n                                            inst.enabledDP[obj._id] = obj;\r\n                                            this.setState({instances});\r\n                                        });\r\n                                }\r\n                            })\r\n                    }\r\n                    this.setState({showAddStateDialog: false});\r\n                } }\r\n                onClose={ () => this.setState({showAddStateDialog: false}) }\r\n            />;\r\n        }\r\n    }\r\n\r\n    deletePreset = id => {\r\n        return this.props.socket.delObject(id)\r\n            .then(() => {\r\n                this.getAllPresets()\r\n                    .then(newState =>\r\n                        this.setState(newState, () =>\r\n                            this.props.onSelectedChanged(null)));\r\n            })\r\n            .catch(e => this.props.onShowError(e));\r\n    };\r\n\r\n    renamePreset(id, newTitle) {\r\n        let preset;\r\n        return this.props.socket.getObject(id)\r\n            .then(obj => {\r\n                preset = obj;\r\n                preset.common.name = newTitle;\r\n                let newId = id.split('.');\r\n                newId.splice(-1, 1);\r\n                newId.push(newTitle.replace(FORBIDDEN_CHARS, '_').trim());\r\n                newId = newId.join('.');\r\n\r\n                preset._id = newId;\r\n                return this.props.socket.delObject(id);\r\n            })\r\n            .then(() => this.props.socket.setObject(preset._id, preset))\r\n            .then(() => this.getAllPresets())\r\n            .then(newState => {\r\n                if (id === this.props.selectedId) {\r\n                    this.setState(newState, () =>\r\n                        this.props.onSelectedChanged(preset._id));\r\n                } else {\r\n                    this.setState(newState);\r\n                }\r\n            })\r\n            .catch(e => this.props.onShowError(e));\r\n    }\r\n\r\n    addPresetToFolderPrefix = (preset, folderPrefix, noRefresh) => {\r\n        let oldId = preset._id;\r\n        let presetId = preset._id.split('.').pop();\r\n        preset._id = this.props.adapterName + '.0.' + folderPrefix + (folderPrefix ? '.' : '') + presetId;\r\n\r\n        return this.props.socket.delObject(oldId)\r\n            .then(() => {\r\n                console.log('Deleted ' + oldId);\r\n                return this.props.socket.setObject(preset._id, preset)\r\n            })\r\n            .then(() => {\r\n                console.log('Set new ID: ' + preset._id);\r\n                return !noRefresh && this.refreshData(presetId)\r\n            })\r\n            .catch(e => this.props.onShowError(e));\r\n    };\r\n\r\n    render() {\r\n        return <DragDropContext backend={HTML5Backend}>\r\n            <List className={ this.props.classes.scroll }>\r\n                { this.renderPresetsTree(this.state.presetFolders) }\r\n                { this.renderAddFolderDialog() }\r\n                { this.renderRenameFolderDialog() }\r\n                { this.renderDeleteDialog() }\r\n                { this.renderMoveDialog() }\r\n                { this.renderRenameDialog() }\r\n            </List>\r\n        </DragDropContext>;\r\n    }\r\n}\r\n\r\nMenuList.propTypes = {\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object,\r\n    addPresetFolderDialog: PropTypes.bool,\r\n    onClosePresetFolderDialog: PropTypes.func,\r\n    onCreatePreset: PropTypes.func,\r\n    search: PropTypes.string,\r\n    reorder: PropTypes.bool,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onShowError: PropTypes.func,\r\n    onSelectedChanged: PropTypes.func.isRequired,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.string\r\n    ]),\r\n    systemConfig: PropTypes.object,\r\n    selectedPresetChanged: PropTypes.bool,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(MenuList)));\r\n","import React, {Component} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport withWidth from \"@material-ui/core/withWidth\";\r\nimport {withStyles, withTheme} from \"@material-ui/core/styles\";\r\nimport clsx from 'clsx';\r\nimport { Droppable, Draggable } from \"react-beautiful-dnd\";\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\n// icons\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport {AiOutlineAreaChart as IconChart} from 'react-icons/ai';\r\nimport {FaWaveSquare as IconBooleanChart} from 'react-icons/fa';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nfunction sortObj(a, b) {\r\n    const aid = typeof a === 'object' ? a._id.replace('system.adapter.', '') : a.replace('system.adapter.', '');\r\n    const bid = typeof b === 'object' ? b._id.replace('system.adapter.', '') : b.replace('system.adapter.', '');\r\n    if (aid > bid) {\r\n        return 1;\r\n    } else if (aid < bid) {\r\n        return -1;\r\n    } else {\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction getEnumsForId(enums, id) {\r\n    const result = [];\r\n    Object.keys(enums).forEach(eID => {\r\n        const en = enums[eID];\r\n        if (en.common.members.includes(id) && !result.includes(eID)) {\r\n            result.push(eID);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nconst LEVEL_PADDING = 16;\r\n\r\nconst styles = theme => ({\r\n    noGutters: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        width: '100%'\r\n    },\r\n    itemIconFolder: {\r\n        cursor: 'pointer'\r\n    },\r\n    width100: {\r\n        width: '100%',\r\n    },\r\n    itemIcon: {\r\n        width: 32,\r\n        height: 32,\r\n        marginRight: 4,\r\n    },\r\n    itemIconRoot: {\r\n        minWidth: 24,\r\n    },\r\n    listItemSubTitle: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.7,\r\n        fontStyle: 'italic'\r\n    },\r\n    adapterIcon: {\r\n        width: 20,\r\n        height: 20,\r\n        borderRadius: 2,\r\n    }\r\n});\r\n\r\nclass ChartsTree extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let chartsOpened;\r\n        try {\r\n            chartsOpened = JSON.parse(window.localStorage.getItem('App.echarts.opened')) || {};\r\n        } catch (e) {\r\n            chartsOpened = {};\r\n        }\r\n\r\n        this.state = {\r\n            instances: [], // chart folders\r\n            chartsOpened\r\n        };\r\n\r\n        this.adapterPromises = {};\r\n\r\n        this.getAllEnums()\r\n            .then(newState => this.getAllCharts(newState))\r\n            .then(newState => this.setState(newState, () =>\r\n                this.props.selectedId && this.props.onSelectedChanged(this.props.selectedId)));\r\n    }\r\n\r\n    getAllEnums(newState) {\r\n        newState = newState || {};\r\n        return this.props.socket.getEnums()\r\n            .then(enums => {\r\n                newState.enums = [];\r\n                Object.keys(enums).forEach(id => {\r\n                    if ((id.startsWith('enum.functions.') || id.startsWith('enum.rooms.')) && enums[id] && enums[id].common && enums[id].common.members && enums[id].common.members.length)  {\r\n                        newState.enums[id] = {\r\n                            common: {\r\n                                members: [...enums[id].common.members],\r\n                                name: Utils.getObjectNameFromObj(enums[id], null, {language: I18n.getLanguage()}),\r\n                            }\r\n                        };\r\n                    }\r\n                });\r\n                return newState;\r\n            });\r\n    }\r\n\r\n    getAdapterIcon(groupId, id) {\r\n        const p = id.split('.');\r\n\r\n        if (p.length < 2 || (p[0] === '0_userdata')) {\r\n            return Promise.resolve();\r\n        } else {\r\n            let instanceId;\r\n            if (p[0] === 'system') {\r\n                p.splice(4);\r\n                instanceId = p.join('.')\r\n            } else {\r\n                p.splice(2);\r\n                instanceId = 'system.adapter.' + p.join('.')\r\n            }\r\n\r\n            this.adapterPromises[instanceId] = this.adapterPromises[instanceId] || this.props.socket.getObject(instanceId);\r\n\r\n            return this.adapterPromises[instanceId]\r\n                .then(obj => {\r\n                    if (obj && obj.common && obj.common.icon) {\r\n                        return Promise.resolve({groupId, id, img: Utils.getObjectIcon(obj)});\r\n                    } else {\r\n                        return Promise.resolve();\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    getChartIcon(groupId, obj) {\r\n        if (!obj) {\r\n            return Promise.resolve();\r\n        } else\r\n        if (obj.common && obj.common.icon) {\r\n            return Promise.resolve({groupId, id: obj._id, img: Utils.getObjectIcon(obj)});\r\n        } else {\r\n            // try to read parent\r\n            const id = obj._id;\r\n            const channelID = Utils.getParentId(obj._id);\r\n            if (channelID && channelID.split('.').length > 2) {\r\n                return this.props.socket.getObject(channelID)\r\n                    .then(obj => {\r\n                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                            return Promise.resolve({groupId, id, img: Utils.getObjectIcon(obj)});\r\n                        } else {\r\n                            const deviceID = Utils.getParentId(channelID);\r\n                            if (deviceID && deviceID.split('.').length > 2) {\r\n                                return this.props.socket.getObject(deviceID)\r\n                                    .then(obj => {\r\n                                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                                            return Promise.resolve({\r\n                                                groupId,\r\n                                                id,\r\n                                                img: Utils.getObjectIcon(obj)\r\n                                            });\r\n                                        } else {\r\n                                            const adapterID = Utils.getParentId(deviceID);\r\n                                            if (adapterID && adapterID.split('.').length > 2) {\r\n                                                return this.props.socket.getObject(adapterID)\r\n                                                    .then(obj => {\r\n                                                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                                                            return Promise.resolve({\r\n                                                                groupId,\r\n                                                                id,\r\n                                                                img: Utils.getObjectIcon(obj)\r\n                                                            });\r\n                                                        } else {\r\n                                                            // get Adapter Icon\r\n                                                            if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                                                                return Promise.resolve({\r\n                                                                    groupId,\r\n                                                                    id,\r\n                                                                    img: Utils.getObjectIcon(obj)\r\n                                                                });\r\n                                                            } else {\r\n                                                                return this.getAdapterIcon(groupId, id);\r\n                                                            }\r\n                                                        }\r\n                                                    });\r\n                                            } else {\r\n                                                return this.getAdapterIcon(groupId, id);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            } else {\r\n                                return this.getAdapterIcon(groupId, id);\r\n                            }\r\n                        }\r\n                    });\r\n            } else {\r\n                return this.getAdapterIcon(groupId, id);\r\n            }\r\n        }\r\n    }\r\n\r\n    getAllCharts(newState) {\r\n        newState = newState || {};\r\n        return new Promise(resolve =>\r\n            this.props.socket._socket.emit('getObjectView', 'custom', 'state', {}, (err, objs) => {\r\n                // console.log(objs);\r\n                const ids = ((objs && objs.rows) || []).map(item => item.id);\r\n                this.getObjects(ids, objs => {\r\n                    const ids = this.props.instances.map(obj => obj._id.substring('system.adapter.'.length));\r\n                    const _instances = {};\r\n                    newState.enums = newState.enums || this.state.enums;\r\n                    const iconPromises = [];\r\n                    Object.values(objs).forEach(obj => {\r\n                        const id = obj && obj.common && obj.common.custom && ids.find(id => Object.keys(obj.common.custom).includes(id));\r\n                        if (id) {\r\n                            const instanceObj = this.props.instances.find(obj => obj._id.endsWith(id));\r\n                            _instances[id] = _instances[id] || {_id: 'system.adapter.' + id, enabledDP: {}, names: {}, statesEnums: {}, icon: instanceObj.common.icon, name: instanceObj.common.name || '', types: {}, icons: {}};\r\n                            _instances[id].enabledDP[obj._id] = obj;\r\n                            _instances[id].names[obj._id] = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                            _instances[id].types[obj._id] = obj.common.type === 'boolean' ? 'boolean' : 'number';\r\n                            _instances[id].statesEnums[obj._id] = getEnumsForId(newState.enums, obj._id);\r\n                            iconPromises.push(this.getChartIcon(id, obj));\r\n                        }\r\n                    });\r\n\r\n                    let chartsOpened = JSON.parse(JSON.stringify(this.state.chartsOpened));\r\n                    const funcIds = Object.keys(newState.enums).filter(id => id.startsWith('enum.functions.'));\r\n                    const roomIds = Object.keys(newState.enums).filter(id => id.startsWith('enum.rooms.'));\r\n\r\n                    const insts = Object.values(_instances).map(obj => {\r\n                        const enabledDP = {};\r\n                        Object.keys(obj.enabledDP).forEach(id => {\r\n                            enabledDP[id] = obj.enabledDP[id];\r\n                            enabledDP[id].group = obj._id;\r\n                        });\r\n                        obj.enabledDP = enabledDP;\r\n                        chartsOpened[obj._id] = chartsOpened[obj._id] !== undefined ? (this.state.chartsOpened[obj._id] || false) : true;\r\n\r\n                        // Build for every instance the list of enums\r\n                        Object.keys(newState.enums).forEach(eID => {\r\n                            if (Object.keys(enabledDP).find(id => newState.enums[eID].common.members.includes(id))) {\r\n                                obj.enums = obj.enums || [];\r\n                                if (!obj.enums.includes(eID)) {\r\n                                    obj.enums.push(eID);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        // Collect all enum-loss IDs in enum\r\n                        const otherFuncs = {common: {members: [], name: I18n.t('Others')}};\r\n                        const otherRooms = {common: {members: [], name: I18n.t('Others')}};\r\n                        Object.keys(enabledDP).forEach(id => {\r\n                            if (!funcIds.find(eID => newState.enums[eID].common.members.includes(id))) {\r\n                                otherFuncs.common.members.push(id);\r\n                            }\r\n                            if (!roomIds.find(eID => newState.enums[eID].common.members.includes(id))) {\r\n                                otherRooms.common.members.push(id);\r\n                            }\r\n                        });\r\n                        if (otherFuncs.common.members.length) {\r\n                            obj.enums = obj.enums || [];\r\n                            obj.enums.push('enum.functions.' + obj._id);\r\n                            newState.enums['enum.functions.' + obj._id] = otherFuncs;\r\n                        }\r\n                        if (otherRooms.common.members.length) {\r\n                            obj.enums = obj.enums || [];\r\n                            obj.enums.push('enum.rooms.' + obj._id);\r\n                            newState.enums['enum.rooms.' + obj._id] = otherRooms;\r\n                        }\r\n\r\n                        obj.enums && obj.enums.sort((a, b) => newState.enums[a].common.name > newState.enums[b].common.name ? 1 : (newState.enums[a].common.name < newState.enums[b].common.name ? -1 : 0));\r\n\r\n                        return obj;\r\n                    });\r\n\r\n                    insts.sort(sortObj);\r\n\r\n                    if (!this.props.selectedId) {\r\n                        // find first chart\r\n                        let selectedChartId = Object.keys(insts).length && Object.keys(insts[0].enabledDP).length ? Object.keys(insts[0].enabledDP)[0] : null;\r\n                        if (selectedChartId) {\r\n                            setTimeout(() => this.props.onSelectedChanged({id: selectedChartId, instance: insts[0]._id}), 500);\r\n                        }\r\n                    }\r\n                    newState.instances = insts;\r\n                    newState.chartsOpened = chartsOpened;\r\n\r\n                    // update icons asynchronous\r\n                    setTimeout(() => {\r\n                        Promise.all(iconPromises)\r\n                            .then(result => {\r\n                                const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                let changed = false;\r\n                                result.forEach(res => {\r\n                                    if (res && res.groupId) {\r\n                                        const inst = instances.find(ins => ins._id === 'system.adapter.' + res.groupId);\r\n                                        if (inst) {\r\n                                            inst.icons[res.id] = res.img;\r\n                                            changed = true;\r\n                                        }\r\n                                    }\r\n                                });\r\n                                changed && this.setState({instances});\r\n                            });\r\n                    }, 100);\r\n\r\n                    resolve(newState);\r\n                });\r\n            }));\r\n    }\r\n\r\n    getObjects(ids, cb, result) {\r\n        result = result || {};\r\n        if (!ids || !ids.length) {\r\n            cb(result);\r\n        } else {\r\n            const id = ids.shift();\r\n            this.props.socket.getObject(id)\r\n                .catch(e => {\r\n                    console.error('Cannot read ' + id + ': ' + e);\r\n                    return null;\r\n                })\r\n                .then(obj => {\r\n                    if (obj) {\r\n                        result[id] = obj;\r\n                    }\r\n                    setTimeout(() => this.getObjects(ids, cb, result), 0);\r\n                });\r\n        }\r\n    }\r\n\r\n    getNewPresetName(prefix) {\r\n        let index = prefix ? '' : '1';\r\n        prefix = prefix || 'preset_';\r\n\r\n        while(!this.isNameUnique(prefix + index)) {\r\n            if (!index) {\r\n                index = 2;\r\n            } else {\r\n                index++;\r\n            }\r\n        }\r\n\r\n        return prefix + index;\r\n    };\r\n\r\n    toggleChartFolder = id => {\r\n        const chartsOpened = JSON.parse(JSON.stringify(this.state.chartsOpened));\r\n        chartsOpened[id] = !chartsOpened[id];\r\n        window.localStorage.setItem('App.echarts.opened', JSON.stringify(chartsOpened));\r\n        const newState = {chartsOpened};\r\n\r\n        let loadChart = null;\r\n\r\n        if (!chartsOpened[id]) {\r\n            const instance = id.split('///')[0];\r\n            if (this.props.selectedId && typeof this.props.selectedId === 'object' && this.props.selectedId.instance === instance) {\r\n                // TODO: Take next nearest opened chart folder\r\n            }\r\n        }\r\n\r\n        this.setState(newState, () => this.props.onSelectedChanged(loadChart));\r\n    };\r\n\r\n    renderSelectIdDialog() {\r\n        if (!this.state.showAddStateDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogSelectID\r\n                key={'selectDialog_add'}\r\n                socket={ this.props.socket }\r\n                dialogName={'Add'}\r\n                type={'state'}\r\n                title={ I18n.t('Enable logging for state')}\r\n                onOk={id => {\r\n                    console.log('Selected ' + id);\r\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\r\n                    if (id) {\r\n                        this.props.socket.getObject(id)\r\n                            .then(obj => {\r\n                                if (!obj || !obj.common) {\r\n                                    return this.props.onShowError(I18n.t('Invalid object'));\r\n                                }\r\n                                if (obj.common.custom && obj.common.custom[instance]) {\r\n                                    return this.props.onShowToast(I18n.t('Already enabled'));\r\n                                } else {\r\n                                    obj.common.custom = obj.common.custom || {};\r\n                                    obj.common.custom[instance] = {\r\n                                        enabled: true,\r\n                                    };\r\n                                    this.props.socket.setObject(id, obj)\r\n                                        .then(() => {\r\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\r\n                                            inst.enabledDP = inst.enabledDP || {};\r\n                                            inst.enabledDP[obj._id] = obj;\r\n                                            this.setState({instances});\r\n                                        });\r\n                                }\r\n                            })\r\n                    }\r\n                    this.setState({showAddStateDialog: false});\r\n                } }\r\n                onClose={ () => this.setState({showAddStateDialog: false}) }\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderListItem(group, id, dragging, level) {\r\n        const instance = group._id;\r\n        return <ListItem\r\n            key={instance + '_' + id}\r\n            classes={ {gutters: this.props.classes.noGutters} }\r\n            button\r\n            style={{paddingLeft: LEVEL_PADDING * level + this.props.theme.spacing(1)}}\r\n            selected={\r\n                this.props.selectedId &&\r\n                typeof this.props.selectedId === 'object' &&\r\n                this.props.selectedId.id === id &&\r\n                this.props.selectedId.instance === instance\r\n            }\r\n            onClick={dragging ? undefined : () => this.props.onSelectedChanged({id, instance})}\r\n        >\r\n            <ListItemIcon classes={{root: this.props.classes.itemIconRoot}}>\r\n                {group.types[id] === 'boolean' ?\r\n                    <IconBooleanChart className={this.props.classes.itemIcon}/>\r\n                    :\r\n                    <IconChart className={this.props.classes.itemIcon}/>\r\n                }\r\n            </ListItemIcon>\r\n            <ListItemText\r\n                classes={{\r\n                    primary: this.props.classes.listItemTitle,\r\n                    secondary: this.props.classes.listItemSubTitle\r\n                }}\r\n                primary={\r\n                    <span>\r\n                        {Utils.getIcon({icon: group.icons[id], prefix: '../../'}, {width: 20, height: 20, borderRadius: 2})}\r\n                        {group.names[id]}\r\n                    </span>\r\n                }\r\n                secondary={id.replace('system.adapter.', '')}\r\n            />\r\n            {!dragging && this.props.multiple && this.props.chartsList ? <ListItemSecondaryAction>\r\n                <Switch\r\n                    edge=\"end\"\r\n                    onChange={e => {\r\n                        const chartsList = JSON.parse(JSON.stringify(this.props.chartsList));\r\n                        const item = chartsList.find(item => item.id === id && item.instance === instance);\r\n                        if (e.target.checked && !item) {\r\n                            chartsList.push({id, instance});\r\n                            chartsList.sort((a, b) => {\r\n                                if (a.instance > b.instance) {\r\n                                    return 1;\r\n                                } else if (a.instance < b.instance) {\r\n                                    return -1;\r\n                                } else {\r\n                                    if (a.id > b.id) {\r\n                                        return 1;\r\n                                    } else if (a.id < b.id) {\r\n                                        return -1;\r\n                                    } else {\r\n                                        return 0;\r\n                                    }\r\n                                }\r\n                            });\r\n                            // if no charts selected => select this one\r\n                            if (typeof this.props.selectedId !== 'object') {\r\n                                this.props.onSelectedChanged({id, instance}, () =>\r\n                                    this.props.onChangeList(chartsList));\r\n                            } else {\r\n                                this.props.onChangeList(chartsList);\r\n                            }\r\n                        } else if (!e.target.checked && item) {\r\n                            chartsList.splice(chartsList.indexOf(item), 1);\r\n                            this.props.onChangeList(chartsList);\r\n                        }\r\n                    }}\r\n                    checked={!!this.props.chartsList.find(item => item.id === id && item.instance === instance)}\r\n                /> </ListItemSecondaryAction>: null}\r\n        </ListItem>\r\n    }\r\n\r\n    renderListItems(group, ids, enumId, renderContext) {\r\n        renderContext.gIndex = renderContext.gIndex || 0;\r\n\r\n        if (!ids || !ids.length) {\r\n            return null;\r\n        }\r\n        const instance = group._id;\r\n\r\n        if (!enumId) {\r\n            return ids.map(id=>\r\n                <Draggable\r\n                    isDragDisabled={!this.props.selectedId || typeof this.props.selectedId === 'object'}\r\n                    key={instance + '_' + id}\r\n                    draggableId={instance + '***' + id}\r\n                    index={renderContext.gIndex++}>\r\n                    {(provided, snapshot) =>\r\n                        [\r\n                            <div\r\n                                key={instance + '_' + id + '_item'}\r\n                                ref={provided.innerRef}\r\n                                {...provided.draggableProps}\r\n                                {...provided.dragHandleProps}\r\n                                style={provided.draggableProps.style}\r\n                                className=\"drag-items\"\r\n                            >\r\n                                {this.renderListItem(group, id, false, 2)}\r\n                            </div>,\r\n                            snapshot.isDragging ?\r\n                                <div className=\"react-beatiful-dnd-copy\" key={instance + '_' + id + '_dnd'}>\r\n                                    {this.renderListItem(group, id, true)}\r\n                                </div>: null\r\n                        ]\r\n                    }\r\n                </Draggable>\r\n            );\r\n        }  else {\r\n            const key = instance + '///' + enumId;\r\n            const opened = this.state.chartsOpened[key];\r\n            if (opened) {\r\n                ids = ids.filter(id => this.state.enums[enumId].common.members.includes(id));\r\n            }\r\n            return [\r\n                <ListItem\r\n                    key={key}\r\n                    style={{paddingLeft: LEVEL_PADDING * 2 + this.props.theme.spacing(1)}}\r\n                    classes={ {gutters: this.props.classes.noGutters} }\r\n                    className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                >\r\n                    <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(key) }>{ opened ?\r\n                        <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                        <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                    }</ListItemIcon>\r\n                    <ListItemText primary={this.state.enums[enumId].common.name}/>\r\n                    <ListItemSecondaryAction>\r\n                        <IconButton onClick={ () => this.toggleChartFolder(key) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                            { opened ? <IconCollapse/> : <IconExpand/> }\r\n                        </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>,\r\n                opened ? <List key={key + '_LIST'}>\r\n                    {ids.map(id=>\r\n                        <Draggable\r\n                            isDragDisabled={!this.props.selectedId || typeof this.props.selectedId === 'object'}\r\n                            key={instance + '_' + id}\r\n                            draggableId={instance + '***' + id}\r\n                            index={renderContext.gIndex++}>\r\n                            {(provided, snapshot) =>\r\n                                [\r\n                                    <div\r\n                                        key={instance + '_' + id + '_item'}\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        {...provided.dragHandleProps}\r\n                                        style={provided.draggableProps.style}\r\n                                        className=\"drag-items\"\r\n                                    >\r\n                                        {this.renderListItem(group, id, false, 3)}\r\n                                    </div>,\r\n                                    snapshot.isDragging ?\r\n                                        <div className=\"react-beatiful-dnd-copy\" key={instance + '_' + id + '_dnd'}>\r\n                                            {this.renderListItem(group, id, true)}\r\n                                        </div>: null\r\n                                ]\r\n                            }\r\n                        </Draggable>\r\n                    )}\r\n                </List> : null\r\n            ]\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const renderContext = {gIndex: 0};\r\n        return [\r\n            this.renderSelectIdDialog(),\r\n            <Droppable droppableId=\"Lines\" isDropDisabled={true} key=\"charts\">\r\n                {(provided, snapshot) =>\r\n                    <div ref={provided.innerRef} key=\"chartListDiv\">\r\n                        <List className={ this.props.classes.scroll } key=\"chartList\">\r\n                            {\r\n                                this.state.instances.map(group => {\r\n                                    let opened = this.state.chartsOpened[group._id];\r\n                                    let children = null;\r\n\r\n                                    // if instance opened\r\n                                    if (opened) {\r\n                                        // no groupBy\r\n                                        const ids = Object.keys(group.enabledDP)\r\n                                            .filter(id => !this.props.search || id.includes(this.props.search) || group.names[id].includes(this.props.search));\r\n\r\n                                        if (!this.props.groupBy) {\r\n                                            ids.sort(sortObj);\r\n                                            children = this.renderListItems(group, ids, null, renderContext);\r\n                                        } else {\r\n                                            children = (group.enums || []).filter(id => id.startsWith('enum.' + this.props.groupBy + '.')).map(eID =>\r\n                                                this.renderListItems(group, ids, eID, renderContext));\r\n                                        }\r\n                                    }\r\n\r\n                                    return [\r\n                                        <ListItem\r\n                                            key={group._id}\r\n                                            classes={ {gutters: this.props.classes.noGutters} }\r\n                                            className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                                        >\r\n                                            <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(group._id) }>\r\n                                                { opened ?\r\n                                                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                                                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                                                }\r\n                                            </ListItemIcon>\r\n                                            <ListItemText primary={\r\n                                                <span>\r\n                                                    <img className={ this.props.classes.adapterIcon } alt=\"\" src={`../../adapter/${group.name}/${group.icon}`}/>\r\n                                                    {group._id.replace('system.adapter.', '')}\r\n                                                </span>\r\n                                            }/>\r\n                                                <ListItemSecondaryAction>\r\n                                                {opened ? <IconButton\r\n                                                        onClick={() => this.setState({showAddStateDialog: group._id})}\r\n                                                        title={ I18n.t('Enable logging for new state') }\r\n                                                    ><IconAdd/></IconButton> : null}\r\n                                                <IconButton onClick={ () => this.toggleChartFolder(group._id) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                                                    { opened ? <IconCollapse/> : <IconExpand/> }\r\n                                                </IconButton>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>,\r\n                                        children\r\n                                    ];\r\n                                }\r\n                            )}\r\n                            {provided.placeholder}\r\n                        </List>\r\n                    </div> }\r\n            </Droppable>\r\n        ];\r\n    }\r\n}\r\n\r\nChartsTree.propTypes = {\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onShowToast: PropTypes.func,\r\n    onShowError: PropTypes.func,\r\n    onChangeList: PropTypes.func,\r\n    chartsList: PropTypes.array,\r\n    theme: PropTypes.object,\r\n    multiple: PropTypes.bool,\r\n    search: PropTypes.string,\r\n    groupBy: PropTypes.string,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.string\r\n    ]),\r\n    onSelectedChanged: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(ChartsTree)));\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport {withStyles, withTheme} from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n// icons\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdCreateNewFolder as IconFolderAdd} from 'react-icons/md';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\nimport {MdFullscreen as IconNewWindow} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport PresetsTree from './Components/PresetsTree';\r\nimport ChartsTree from './Components/ChartsTree';\r\n\r\n\r\nconst TOOLBAR_HEIGHT = 48;\r\n\r\nconst styles = theme => ({\r\n    mainListDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    mainToolbar: {\r\n        background: theme.palette.primary.main,\r\n    },\r\n    secondaryColors: {\r\n        background: '#888',\r\n        color: theme.palette.type === 'dark' ? '#000' : '#FFF',\r\n    },\r\n    smallMargin: {\r\n        marginTop: '8px !important',\r\n    },\r\n    heightMinusToolbar: {\r\n        height: 'calc(100% - ' + (TOOLBAR_HEIGHT * 2) + 'px)',\r\n        overflow: 'auto'\r\n    },\r\n});\r\n\r\nclass MenuList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            search: null,\r\n            multiple: window.localStorage.getItem('App.echarts.multiple') === 'true',\r\n            showSearch: null,\r\n            groupBy: window.localStorage.getItem('App.echarts.groupBy') || '',\r\n            addPresetFolderDialog: false,\r\n            reorder: false,\r\n        };\r\n\r\n        try {\r\n            this.isIFrame = window.self !== window.top;\r\n        } catch (e) {\r\n            this.isIFrame = true;\r\n        }\r\n\r\n        if (this.state.multiple) {\r\n            let chartList = window.localStorage.getItem('App.echarts.chartList') || '[]';\r\n            try {\r\n                chartList = JSON.parse(chartList);\r\n            } catch (e) {\r\n                chartList = [];\r\n            }\r\n            setTimeout(() => this.props.onChangeList(chartList), 100);\r\n        }\r\n    }\r\n\r\n    renderListToolbar() {\r\n        return <Toolbar key=\"toolbar\" variant=\"dense\" className={ this.props.classes.mainToolbar }>\r\n            <IconButton\r\n                onClick={ () => this.props.onCreatePreset(false) }\r\n                title={ I18n.t('Create new preset') }\r\n            ><IconAdd/></IconButton>\r\n\r\n            <IconButton\r\n                onClick={ () => this.setState({addPresetFolderDialog: true}) }\r\n                title={ I18n.t('Create new folder') }\r\n            ><IconFolderAdd/></IconButton>\r\n\r\n            <span className={this.props.classes.right}>\r\n                <IconButton onClick={() => this.setState({showSearch: !this.state.showSearch, search: ''})}>\r\n                    <SearchIcon/>\r\n                </IconButton>\r\n            </span>\r\n            {this.state.showSearch ?\r\n                <TextField\r\n                    value={ this.state.search }\r\n                    className={ this.props.classes.textInput }\r\n                    onChange={ e => this.setState({search: e.target.value}) }\r\n                    InputProps={{\r\n                        endAdornment: this.state.search ?\r\n                            <IconButton\r\n                                onClick={() => this.setState({ search: '' })}>\r\n                                <ClearIcon />\r\n                            </IconButton>\r\n                            : undefined,\r\n                    }}\r\n                /> : null\r\n            }\r\n            <div style={{flexGrow: 1}}/>\r\n            {!this.state.showSearch && this.isIFrame ? <IconButton\r\n                onClick={ () => window.open(window.location.href, 'own-echarts') }\r\n                title={ I18n.t('Open in own window') }\r\n            ><IconNewWindow/></IconButton> : null}\r\n        </Toolbar>;\r\n    }\r\n\r\n    renderFooter() {\r\n        return <Toolbar key=\"toolbarBottom\" variant=\"dense\" className={ this.props.classes.secondaryColors }>\r\n            <FormGroup row>\r\n                {!this.props.selectedPresetChanged ? <FormControlLabel\r\n                    classes={{root: this.props.secondaryColors}}\r\n                    control={<Switch\r\n                        checked={this.state.multiple}\r\n                        classes={{root: this.props.secondaryColors}}\r\n                        onChange={e => {\r\n                        window.localStorage.setItem('App.echarts.multiple', e.target.checked ? 'true' : 'false');\r\n                        if (e.target.checked) {\r\n                            const selectedId = this.props.selectedId;\r\n                            if (selectedId && typeof selectedId === 'object') {\r\n                                this.setState({multiple: true}, () => this.props.onChangeList([JSON.parse(JSON.stringify(selectedId))]));\r\n                            } else {\r\n                                this.setState({multiple: true}, () => this.props.onChangeList([]));\r\n                            }\r\n                        } else {\r\n                            this.setState({multiple: false}, () => this.props.onChangeList(null));\r\n                        }\r\n                    }} />}\r\n                    label={I18n.t('Multiple')}\r\n                /> : null}\r\n                <FormControl>\r\n                    <InputLabel shrink={true} style={{whiteSpace: 'nowrap'}}>{I18n.t('Group by') }</InputLabel>\r\n                    <Select\r\n                        label={I18n.t('Group by')}\r\n                        onChange={e => {\r\n                            window.localStorage.setItem('App.echarts.groupBy', e.target.value);\r\n                            this.setState({groupBy: e.target.value});\r\n                        }}\r\n                        value={this.state.groupBy || ''}\r\n                        className={this.props.classes.smallMargin}\r\n                        displayEmpty\r\n                    >\r\n                        <MenuItem value=\"\">{I18n.t('None')}</MenuItem>\r\n                        <MenuItem value=\"rooms\">{I18n.t('Rooms')}</MenuItem>\r\n                        <MenuItem value=\"functions\">{I18n.t('Functions')}</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n            </FormGroup>\r\n        </Toolbar>;\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.classes.mainListDiv} key=\"mainMenuDiv\">\r\n            {this.renderListToolbar()}\r\n            <div className={ this.props.classes.heightMinusToolbar }>\r\n                <PresetsTree\r\n                    socket={this.props.socket}\r\n                    addPresetFolderDialog={this.state.addPresetFolderDialog}\r\n                    onClosePresetFolderDialog={() => this.setState({addPresetFolderDialog: false})}\r\n                    onCreatePreset={this.props.onCreatePreset}\r\n                    adapterName={this.props.adapterName}\r\n                    selectedPresetChanged={this.props.selectedPresetChanged}\r\n                    onShowToast={toast => this.props.onShowToast(toast)}\r\n                    onShowError={toast => this.props.onShowToast(toast)}\r\n                    search={this.state.search}\r\n                    reorder={this.state.reorder}\r\n                    selectedId={this.props.selectedId}\r\n                    systemConfig={this.props.systemConfig}\r\n                    onSelectedChanged={(selectedId, cb) => this.props.onSelectedChanged(selectedId, cb)}\r\n                />\r\n                <ChartsTree\r\n                    socket={this.props.socket}\r\n                    instances={this.props.instances}\r\n                    adapterName={this.props.adapterName}\r\n                    onShowToast={toast => this.props.onShowToast(toast)}\r\n                    onShowError={toast => this.props.onShowToast(toast)}\r\n                    search={this.state.search}\r\n                    multiple={this.state.multiple && !this.props.selectedPresetChanged}\r\n                    theme={this.props.theme}\r\n                    groupBy={this.state.groupBy}\r\n                    selectedId={this.props.selectedId}\r\n                    onChangeList={chartList => {\r\n                        window.localStorage.setItem('App.echarts.chartList', JSON.stringify(chartList));\r\n                        this.props.onChangeList(chartList);\r\n                    }}\r\n                    chartsList={this.props.chartsList}\r\n                    onSelectedChanged={(selectedId, cb) => this.props.onSelectedChanged(selectedId, cb)}\r\n                />\r\n            </div>\r\n            {this.renderFooter()}\r\n        </div>;\r\n    }\r\n}\r\n\r\nMenuList.propTypes = {\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    adapterName: PropTypes.string.isRequired,\r\n    theme: PropTypes.object,\r\n    onSelectedChanged: PropTypes.func.isRequired,\r\n    onShowToast: PropTypes.func.isRequired,\r\n    systemConfig: PropTypes.object,\r\n    onChangeList: PropTypes.func,\r\n    chartsList: PropTypes.array,\r\n    onCreatePreset: PropTypes.func,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.string\r\n    ]),\r\n    selectedPresetChanged: PropTypes.bool,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(MenuList)));\r\n","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport { withTheme } from '@material-ui/core/styles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport clsx from 'clsx';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { DragDropContext} from \"react-beautiful-dnd\";\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\n// icons\r\nimport {MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdMenu as IconMenuClosed} from 'react-icons/md';\r\nimport {MdArrowBack as IconMenuOpened} from 'react-icons/md';\r\n\r\nimport 'react-splitter-layout/lib/index.css';\r\n\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport '@iobroker/adapter-react/index.css';\r\n\r\nimport SettingsEditor from './SettingsEditor';\r\nimport MainChart from './MainChart';\r\nimport getUrlQuery from './utils/getUrlQuery';\r\nimport DefaultPreset from './Components/DefaultPreset';\r\nimport MenuList from './MenuList';\r\nimport Utils from \"@iobroker/adapter-react/Components/Utils\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        background: theme.palette.background.default,\r\n        color: theme.palette.text.primary,\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    },\r\n    menuDiv: {\r\n        overflow: 'hidden',\r\n    },\r\n    splitterDivs: {\r\n        '&>div': {\r\n            overflow: 'hidden',\r\n            width: '100%',\r\n            height: '100%',\r\n        },\r\n        '& .layout-splitter': {\r\n            background: theme.type === 'dark' ? '#595858' : '#ccc;'\r\n        }\r\n    },\r\n    content: {\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: theme.palette.background.default,\r\n        position: 'relative'\r\n    },\r\n    menuDivWithoutMenu: {\r\n        '&>div:first-child': {\r\n            display: 'none'\r\n        },\r\n        '&>.layout-splitter': {\r\n            display: 'none'\r\n        },\r\n    },\r\n    progress: {\r\n        margin: 100\r\n    },\r\n    menuOpenCloseButton: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        borderRadius: '0 5px 5px 0',\r\n        top: 6,\r\n        paddingTop: 8,\r\n        cursor: 'pointer',\r\n        zIndex: 1,\r\n        height: 25,\r\n        width: 20,\r\n        background: theme.palette.secondary.main,\r\n        color: theme.palette.primary.main,\r\n        paddingLeft: 3,\r\n        '&:hover': {\r\n            color: 'white'\r\n        }\r\n    },\r\n    buttonsContainer: {\r\n        '& button': {\r\n            whiteSpace: 'nowrap'\r\n        }\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n});\r\n\r\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\r\n\r\nfunction loadChartParam(name, defaultValue) {\r\n    return window.localStorage.getItem('App.echarts.__' + name) ? window.localStorage.getItem('App.echarts.__' + name) : defaultValue;\r\n}\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        let settings = {socket: {}};\r\n        const query = getUrlQuery();\r\n        settings.socket.port = query.port || (parseInt(window.location.port) >= 3000 && parseInt(window.location.port) <= 3020 ? 8081 : window.location.port);\r\n        settings.socket.host = query.host || window.location.hostname;\r\n        settings.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'es': require('./i18n/es'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'nl': require('./i18n/nl'),\r\n            'pl': require('./i18n/pl'),\r\n            'pt': require('./i18n/pt'),\r\n            'ru': require('./i18n/ru'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        super(props, settings);\r\n    }\r\n\r\n    onConnectionReady() {\r\n        let selectedId = window.localStorage.getItem('App.echarts.selectedId') || null;\r\n        if (selectedId) {\r\n            try {\r\n                selectedId = JSON.parse(selectedId)\r\n            } catch (e) {\r\n                selectedId = null;\r\n            }\r\n        }\r\n\r\n        const newState = {\r\n            ready: false,\r\n            instances: [],\r\n\r\n            selectedId,\r\n            selectedPresetChanged: false,\r\n            presetData: null,\r\n            originalPresetData: null,\r\n            chartsList: null,\r\n            addPresetDialog: null,\r\n            progress: 0,\r\n            autoSave: window.localStorage.getItem('App.echarts.autoSave') === 'true',\r\n\r\n            discardChangesConfirmDialog: false,\r\n\r\n            resizing: false,\r\n            menuOpened: window.localStorage.getItem('App.echarts.menuOpened') !== 'false',\r\n            menuSelectId: '',\r\n            logHorzLayout: window.localStorage.getItem('App.echarts.logHorzLayout') === 'true',\r\n        };\r\n\r\n        this.settingsSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.echarts.settingsSize')) || 150 : 150;\r\n        this.menuSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.echarts.menuSize')) || 500 : 500;\r\n\r\n        this.objects = {};\r\n\r\n        this.socket.getSystemConfig()\r\n            .then(systemConfig => {\r\n                newState.systemConfig = systemConfig;\r\n                newState.presetData = DefaultPreset.getDefaultPreset(systemConfig);\r\n                this.setState(newState);\r\n                return Promise.resolve();\r\n            })\r\n            .then(() => this.socket.getAdapterInstances(''))\r\n            // get only history adapters\r\n            .then(instances => instances.filter(entry => entry && entry.common && entry.common.getHistory && entry.common.enabled))\r\n            .then(instances => this.setState({ready: true, instances}))\r\n            .catch(e => this.showError(e));\r\n    }\r\n\r\n    getNewPresetName(prefix, index) {\r\n        index  = index  || (prefix ? '' : '1');\r\n        prefix = prefix || 'preset_';\r\n\r\n        return this.socket.getObject(prefix + index)\r\n            .then(obj => {\r\n                if (!obj) {\r\n                    return prefix + index;\r\n                } else {\r\n                    if (!index) {\r\n                        index = 2;\r\n                    } else {\r\n                        index++;\r\n                    }\r\n                    return this.getNewPresetName(prefix, index);\r\n                }\r\n            })\r\n            .catch(e => prefix + index);\r\n    }\r\n\r\n    onCreatePreset = (isFromCurrentSelection, parentId) => {\r\n        if (isFromCurrentSelection === true) {\r\n            let name;\r\n\r\n            const chartsList = JSON.parse(JSON.stringify(this.state.chartsList || []));\r\n            if (!chartsList.find(item => item.id === this.state.selectedId.id && item.instance === this.state.selectedId.instance)) {\r\n                chartsList.push(this.state.selectedId);\r\n            }\r\n\r\n            // Todo> Detect if all ids are from one enum\r\n\r\n            // create from list selectedId\r\n            return new Promise(resolve => {\r\n                if (chartsList.length === 1) {\r\n                    return this.socket.getObject(chartsList[0].id)\r\n                        .then(obj => resolve(obj));\r\n                } else {\r\n                    resolve(null);\r\n                }\r\n            }).then(obj => {\r\n                if (obj) {\r\n                    name = (obj && obj.common && obj.common.name ? Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) : '').trim();\r\n                }\r\n\r\n                this.getNewPresetName(name)\r\n                    .then(name => {\r\n                        let template = {\r\n                            common: {\r\n                                name,\r\n                            },\r\n                            native: {\r\n                                url: '',\r\n                                data: JSON.parse(JSON.stringify(this.state.presetData))\r\n                            },\r\n                            type: 'chart'\r\n                        };\r\n                        let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\r\n\r\n                        return this.socket.setObject(id, template)\r\n                            .then(() => this.loadChartOrPreset(id));\r\n                    });\r\n            });\r\n        } else {\r\n            // create empty preset\r\n            return this.getNewPresetName()\r\n                .then(name => {\r\n                    let template = {\r\n                        common: {\r\n                            name,\r\n                        },\r\n                        native: {\r\n                            url: '',\r\n                            data: DefaultPreset.getDefaultPreset(this.state.systemConfig, null, null, I18n.getLanguage()),\r\n                        },\r\n                        type: 'chart'\r\n                    };\r\n\r\n                    let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\r\n\r\n                    return this.socket.setObject(id, template)\r\n                        .then(() => this.loadChartOrPreset(id));\r\n                })\r\n                .catch(e => this.showError(e));\r\n        }\r\n    };\r\n\r\n    savePreset = () => {\r\n        if (!this.state.presetData) {\r\n            this.showError(I18n.t('Empty preset cannot be saved!'));\r\n            return Promise.reject();\r\n        } else {\r\n            return this.socket.getObject(this.state.selectedId)\r\n                .then(obj => {\r\n                    if (!obj || !obj.native) {\r\n                        return this.showError(I18n.t('Invalid object'));\r\n                    } else {\r\n                        obj.native.data = this.state.presetData;\r\n                        return this.socket.setObject(obj._id, obj)\r\n                            .then(() => this.setState({originalPresetData: JSON.stringify(this.state.presetData), selectedPresetChanged: false}))\r\n                            .catch(e => this.showError(e));\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    loadChartOrPreset(selectedId, cb) {\r\n        window.localStorage.setItem('App.echarts.selectedId', JSON.stringify(selectedId));\r\n\r\n        if (selectedId && typeof selectedId === 'object') {\r\n            // load chart\r\n            const promises = [];\r\n            if (this.state.chartsList) {\r\n                this.state.chartsList.forEach(item => !this.objects[item.id] && promises.push(this.socket.getObject(item.id)));\r\n                !this.objects[selectedId.id] && !this.state.chartsList.find(item => item.id === selectedId.id) && promises.push(this.socket.getObject(selectedId.id));\r\n            } else {\r\n                this.objects = {};\r\n                promises.push(this.socket.getObject(selectedId.id));\r\n            }\r\n\r\n            return Promise.all(promises)\r\n                .then(results => {\r\n                    results.forEach(obj => this.objects[obj._id] = obj);\r\n                    const lines = (this.state.chartsList || []).map(item => DefaultPreset.getDefaultLine(this.state.systemConfig, item.instance, this.objects[item.id], I18n.getLanguage()));\r\n\r\n                    (!this.state.chartsList || !this.state.chartsList.find(item => item.id === selectedId.id && item.instance === selectedId.instance)) &&\r\n                        lines.push(DefaultPreset.getDefaultLine(this.state.systemConfig, selectedId.instance, this.objects[selectedId.id], I18n.getLanguage()));\r\n\r\n                    // combine same units together: e.g. if line1 and line2 are in percent => use same yAxis\r\n                    if (lines.length > 1) {\r\n                        // Find first non empty\r\n                        // ignore all booleans\r\n                        const first = lines.find(item => !item.isBoolean);\r\n                        if (first) {\r\n                            const iFirst = lines.indexOf(first);\r\n                            // set it to left\r\n                            first.yaxe = 'left';\r\n                            // find all lines with the same unit and place them to left\r\n                            if (first.unit) {\r\n                                for (let k = iFirst + 1; k < lines.length; k++) {\r\n                                    if (lines[k].unit === first.unit) {\r\n                                        lines[k].commonYAxis = iFirst;\r\n                                    }\r\n                                }\r\n                            }\r\n                            for (let k = iFirst + 1; k < lines.length; k++) {\r\n                                if (lines[k].unit && lines[k].unit !== first.unit) {\r\n                                    lines[k].yaxe = 'right';\r\n                                    // combine all following lines to one axis\r\n                                    for (let j = k + 1; j < lines.length; j++) {\r\n                                        if (lines[k].unit === lines[j].unit && lines[j].commonYAxis === undefined) {\r\n                                            lines[k].commonYAxis = j;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    let presetData = {\r\n                        marks:          [],\r\n                        lines:          lines,\r\n                        zoom:           true,\r\n                        hoverDetail:    true,\r\n                        aggregate:      loadChartParam('aggregate', 'minmax'),\r\n                        chartType:      loadChartParam('chartType', 'auto'),\r\n                        live:           loadChartParam('live', '30'),\r\n                        timeType:       loadChartParam('timeType', 'relative'),\r\n                        aggregateType:  loadChartParam('aggregateType', 'step'),\r\n                        aggregateSpan:  loadChartParam('aggregateSpan', 300),\r\n                        ticks:          loadChartParam('ticks', ''),\r\n                        range:          loadChartParam('range', 1440),\r\n                        relativeEnd:    loadChartParam('relativeEnd', 'now'),\r\n                        start:          loadChartParam('start', ''),\r\n                        end:            loadChartParam('end', ''),\r\n                        start_time:     loadChartParam('start_time', ''),\r\n                        end_time:       loadChartParam('end_time', ''),\r\n                        noBorder:       'noborder',\r\n                        noedit:         false,\r\n                        animation:      0,\r\n                        legend:         lines.length > 1 ? 'nw' : ''\r\n                    };\r\n\r\n                    this.setState({\r\n                        presetData,\r\n                        originalPresetData: '',\r\n                        selectedPresetChanged: false,\r\n                        selectedId: selectedId,\r\n                    }, () => cb && cb());\r\n                });\r\n        } else if (selectedId) {\r\n            // load preset\r\n            return this.socket.getObject(selectedId)\r\n                .then(obj => {\r\n                    if (obj && obj.native && obj.native.data) {\r\n\r\n                        const newState = {\r\n                            presetData: obj.native.data,\r\n                            originalPresetData: JSON.stringify(obj.native.data),\r\n                            selectedPresetChanged: false,\r\n                            selectedId,\r\n                        };\r\n\r\n                        this.setState(newState, () => cb && cb());\r\n                    } else {\r\n                        cb && cb();\r\n                    }\r\n                });\r\n        } else {\r\n            this.setState({\r\n                presetData: null,\r\n                originalPresetData: '',\r\n                selectedPresetChanged: false,\r\n                selectedId: null,\r\n            }, () => cb && cb());\r\n        }\r\n    }\r\n\r\n    discardChangesConfirmDialog() {\r\n        return this.state.discardChangesConfirmDialog ? <Dialog\r\n            maxWidth=\"lg\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"discardChangesConfirmDialog\"\r\n            onClose={ () => this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(false)) }>\r\n                <DialogTitle>{\r\n                    this.state.discardChangesConfirmDialog === 'chart' ? I18n.t('Are you sure for loading the chart and discard unsaved changes?')\r\n                    : (this.state.discardChangesConfirmDialog === 'preset' ? I18n.t('Are you sure for loading the preset and discard unsaved changes?') :\r\n                        I18n.t('Are you sure for closing folder and discard unsaved changes?'))\r\n                }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() =>\r\n                        this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(false))}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset()\r\n                            .then(() => this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(true)));\r\n                    }}>\r\n                        <IconSave className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Save current preset and load') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" onClick={() =>\r\n                        this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(true))}>\r\n                        { I18n.t('Load without save') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderMain() {\r\n        const {classes} = this.props;\r\n        return [\r\n            <div className={clsx(classes.content, 'iobVerticalSplitter')} key=\"confirmdialog\">\r\n                <div key=\"confirmdiv\" className={classes.menuOpenCloseButton} onClick={() => {\r\n                    window.localStorage && window.localStorage.setItem('App.echarts.menuOpened', this.state.menuOpened ? 'false' : 'true');\r\n                    this.setState({menuOpened: !this.state.menuOpened, resizing: true});\r\n                    setTimeout(() => this.setState({resizing: false}), 300);\r\n                }}>\r\n                    {this.state.menuOpened ? <IconMenuOpened /> : <IconMenuClosed />}\r\n                </div>\r\n                <SplitterLayout\r\n                    key=\"MainSplitter\"\r\n                    vertical={!this.state.logHorzLayout}\r\n                    primaryMinSize={100}\r\n                    secondaryInitialSize={this.settingsSize}\r\n                    //customClassName={classes.menuDiv + ' ' + classes.splitterDivWithoutMenu}\r\n                    onDragStart={() => this.setState({resizing: true})}\r\n                    onSecondaryPaneSizeChange={size => this.settingsSize = parseFloat(size)}\r\n                    onDragEnd={() => {\r\n                        this.setState({resizing: false});\r\n                        window.localStorage && window.localStorage.setItem('App.echarts.settingsSize', this.settingsSize.toString());\r\n                    }}\r\n                >\r\n                    { this.state.selectedId ? <MainChart\r\n                        key=\"MainChart\"\r\n                        visible={!this.state.resizing}\r\n                        theme={this.state.theme}\r\n                        onChange={presetData => this.setState({presetData})}\r\n                        presetData={this.state.presetData}\r\n                        selectedId={this.state.selectedId}\r\n                        chartsList={this.state.chartsList}\r\n                        onCreatePreset={this.onCreatePreset}\r\n                    /> : null}\r\n                    {\r\n                        this.state.presetData && this.state.selectedId && typeof this.state.selectedId === 'string' ? <SettingsEditor\r\n                            socket={this.socket}\r\n                            key=\"Editor\"\r\n                            width={window.innerWidth - this.menuSize}\r\n                            theme={this.state.theme}\r\n                            onChange={presetData => {\r\n                                if (this.state.autoSave) {\r\n                                    this.setState({presetData}, () => this.savePreset());\r\n                                } else {\r\n                                    this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\r\n                                }\r\n                            }}\r\n                            presetData={this.state.presetData}\r\n                            selectedId={this.state.selectedId}\r\n                            verticalLayout={!this.state.logHorzLayout}\r\n                            onLayoutChange={() => this.toggleLogLayout()}\r\n                            connection={this.socket}\r\n                            instances={this.state.instances}\r\n                            systemConfig={this.state.systemConfig}\r\n                            selectedPresetChanged={this.state.selectedPresetChanged}\r\n                            savePreset={this.savePreset}\r\n                            autoSave={this.state.autoSave}\r\n                            onAutoSave={autoSave => {\r\n                                window.localStorage.setItem('App.echarts.autoSave', autoSave ? 'true' : 'false');\r\n                                if (autoSave && this.state.selectedPresetChanged) {\r\n                                    this.savePreset()\r\n                                        .then(() => this.setState({autoSave}));\r\n                                } else {\r\n                                    this.setState({autoSave});\r\n                                }\r\n\r\n                            }}\r\n                        /> : null\r\n                    }\r\n                </SplitterLayout>\r\n            </div>\r\n        ];\r\n    }\r\n\r\n    onDragEnd = result => {\r\n        const { source, destination, draggableId } = result;\r\n        if (destination && draggableId.includes('***') && source.droppableId === 'Lines') {\r\n            const [instance, stateId] = draggableId.split('***');\r\n            this.socket.getObject(stateId)\r\n                .then(obj => {\r\n                    //const len = this.state.presetData.lines.length;\r\n                    //const color = (obj && obj.common && obj.common.color) || PREDEFINED_COLORS[len % PREDEFINED_COLORS.length];\r\n                    const presetData = JSON.parse(JSON.stringify(this.state.presetData));\r\n                    const newLine = DefaultPreset.getDefaultLine(this.state.systemConfig, instance, obj, I18n.getLanguage());\r\n                    if (!destination) {\r\n                        presetData.lines.push(newLine);\r\n                    } else {\r\n                        presetData.lines.splice(destination.index, 0, newLine);\r\n                    }\r\n                    if (presetData.lines.length > 1) {\r\n                        // combine new unit with existing one\r\n                        if (newLine.unit) {\r\n                            for (let i = 0; i < presetData.lines.length; i++) {\r\n                                if (newLine !== presetData.lines[i] && presetData.lines[i].unit === newLine.unit) {\r\n                                    newLine.commonYAxis = i;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\r\n                });\r\n        } else if (destination && source.droppableId === destination.droppableId) {\r\n            const presetData = JSON.parse(JSON.stringify(this.state.presetData));\r\n            const [removed] = presetData.lines.splice(source.index, 1);\r\n            presetData.lines.splice(destination.index, 0, removed);\r\n            this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\r\n        }\r\n    };\r\n\r\n    toggleLogLayout() {\r\n        window.localStorage && window.localStorage.setItem('App.echarts.logHorzLayout', this.state.logHorzLayout ? 'false' : 'true');\r\n        this.setState({logHorzLayout: !this.state.logHorzLayout});\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        if (!this.state.ready) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType}/>\r\n            </MuiThemeProvider>;\r\n        }\r\n\r\n        return <MuiThemeProvider theme={this.state.theme}>\r\n            <React.Fragment>\r\n                <div className={classes.root} key=\"divSide\">\r\n                    <DragDropContext onDragEnd={this.onDragEnd}>\r\n                        <SplitterLayout\r\n                            key=\"sidemenuwidth\"\r\n                            vertical={false}\r\n                            primaryMinSize={300}\r\n                            primaryIndex={1}\r\n                            secondaryMinSize={300}\r\n                            secondaryInitialSize={this.menuSize}\r\n                            customClassName={classes.splitterDivs + ' ' + (!this.state.menuOpened ? classes.menuDivWithoutMenu : '')}\r\n                            onDragStart={() => this.setState({resizing: true})}\r\n                            onSecondaryPaneSizeChange={size => this.menuSize = parseFloat(size)}\r\n                            onDragEnd={() => {\r\n                                this.setState({resizing: false});\r\n                                window.localStorage && window.localStorage.setItem('App.echarts.menuSize', this.menuSize.toString());\r\n                            }}\r\n                        >\r\n                            <MenuList\r\n                                key=\"menuList\"\r\n                                socket={this.socket}\r\n                                theme={this.state.theme}\r\n                                adapterName={this.adapterName}\r\n                                instances={this.state.instances}\r\n                                systemConfig={this.state.systemConfig}\r\n                                onShowToast={toast => this.showToast(toast)}\r\n                                selectedPresetChanged={this.state.selectedPresetChanged}\r\n                                chartsList={this.state.chartsList}\r\n                                selectedId={this.state.selectedId}\r\n                                onCreatePreset={this.onCreatePreset}\r\n                                onChangeList={(chartsList, cb) => {\r\n                                    // if some deselected\r\n                                    let selectedId = this.state.selectedId;\r\n                                    if (chartsList && this.state.chartsList && chartsList.length && chartsList.length < this.state.chartsList.length) {\r\n                                        const removedLine = this.state.chartsList.find(item => !chartsList.find(it => it.id === item.id && it.instance === item.instance));\r\n                                        const index = this.state.chartsList.indexOf(removedLine);\r\n                                        if (this.state.chartsList[index + 1]) {\r\n                                            selectedId = this.state.chartsList[index + 1];\r\n                                        } else if (this.state.chartsList[index - 1]) {\r\n                                            selectedId = this.state.chartsList[index - 1];\r\n                                        } else {\r\n                                            selectedId = chartsList[0];\r\n                                        }\r\n                                    }\r\n                                    this.setState({chartsList}, () => this.loadChartOrPreset(selectedId, cb));\r\n                                }}\r\n                                onSelectedChanged={(selectedId, cb) => {\r\n                                    if (cb && this.state.selectedPresetChanged) {\r\n                                        this.confirmCB = confirmed => {\r\n                                            if (confirmed) {\r\n                                                this.loadChartOrPreset(selectedId, () => cb && cb(selectedId));\r\n                                            } else {\r\n                                                cb(false); // cancel\r\n                                            }\r\n                                            this.confirmCB = null;\r\n                                        };\r\n\r\n                                        this.setState({discardChangesConfirmDialog: selectedId && typeof selectedId === 'object' ? 'chart' : (selectedId ? 'preset' : 'folder')});\r\n                                    } else {\r\n                                        this.loadChartOrPreset(selectedId, () => cb && cb(selectedId));\r\n                                    }\r\n                                }}\r\n                            />\r\n                            {this.renderMain()}\r\n                        </SplitterLayout>\r\n                    </DragDropContext>\r\n                </div>\r\n                { this.discardChangesConfirmDialog() }\r\n                { this.renderError() }\r\n                { this.renderToast() }\r\n            </React.Fragment>\r\n        </MuiThemeProvider>;\r\n    }\r\n}\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(App)));\r\n","export default function getUrlQuery() {\r\n    const parts = (window.location.search || '').replace(/^\\?/, '').split('&');\r\n    const query = {};\r\n    parts.forEach(item => {\r\n        const [name, val] = item.split('=');\r\n        query[decodeURIComponent(name)] = val !== undefined ? decodeURIComponent(val) : true;\r\n    });\r\n    return query;\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { version } from '../package.json';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nwindow.adapterName = 'echarts';\r\nlet themeName = Utils.getThemeName();\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={_theme => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root')\r\n    );\r\n}\r\n\r\n// if not local development\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://709f116e1de34029921e4f2696d6740f@sentry.iobroker.net/88',\r\n        release: 'iobroker.' + window.adapterName + '@' + version,\r\n        integrations: [new SentryIntegrations.Dedupe()],\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}