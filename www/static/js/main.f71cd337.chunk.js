(this["webpackJsonpecharts.index"]=this["webpackJsonpecharts.index"]||[]).push([[0],{268:function(e){e.exports=JSON.parse('{"a":"1.0.10"}')},314:function(e,t,o){},316:function(e,t){},408:function(e){e.exports=JSON.parse('{"Save as image":"Save as image","Reset pan and zoom":"Reset pan and zoom","Save chart as svg":"Save chart as SVG","Unfortunately your browser does not support this feature":"Unfortunately your browser does not support this feature","Save chart as png":"Save chart as png","No data found":"No data found"}')},409:function(e){e.exports=JSON.parse('{"Save as image":"Als Bild speichern","Reset pan and zoom":"Verschiebung und Zoomen zur\xfccksetzen","Save chart as svg":"Diagramm als SVG speichern","Unfortunately your browser does not support this feature":"Leider unterst\xfctzt Ihr Browser diese Funktion nicht","Save chart as png":"Diagramm als PNG speichern","No data found":"Keine Daten gefunden"}')},410:function(e){e.exports=JSON.parse('{"Save as image":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435","Reset pan and zoom":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u0434\u0432\u0438\u0433 \u0438 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","Save chart as svg":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0433\u0440\u0430\u0444\u0438\u043a \u043a\u0430\u043a SVG","Unfortunately your browser does not support this feature":"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0432\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u044d\u0442\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u044e","Save chart as png":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0443 \u043a\u0430\u043a png","No data found":"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"}')},411:function(e){e.exports=JSON.parse('{"Save as image":"Salvar como imagem","Reset pan and zoom":"Redefinir panor\xe2mica e zoom","Save chart as svg":"Salvar gr\xe1fico como SVG","Unfortunately your browser does not support this feature":"Infelizmente, seu navegador n\xe3o oferece suporte a esse recurso","Save chart as png":"Salvar gr\xe1fico como png","No data found":"Nenhum dado encontrado"}')},412:function(e){e.exports=JSON.parse('{"Save as image":"Bewaar als afbeelding","Reset pan and zoom":"Stel pannen en zoomen opnieuw in","Save chart as svg":"Bewaar grafiek als SVG","Unfortunately your browser does not support this feature":"Helaas ondersteunt uw browser deze functie niet","Save chart as png":"Bewaar grafiek als png","No data found":"Geen data gevonden"}')},413:function(e){e.exports=JSON.parse('{"Save as image":"Enregistrer comme image","Reset pan and zoom":"R\xe9initialiser le panoramique et le zoom","Save chart as svg":"Enregistrer le graphique au format SVG","Unfortunately your browser does not support this feature":"Malheureusement, votre navigateur ne prend pas en charge cette fonctionnalit\xe9","Save chart as png":"Enregistrer le graphique au format png","No data found":"Aucune donn\xe9e disponible"}')},414:function(e){e.exports=JSON.parse('{"Save as image":"Salva come immagine","Reset pan and zoom":"Reimposta panoramica e zoom","Save chart as svg":"Salva grafico come SVG","Unfortunately your browser does not support this feature":"Purtroppo il tuo browser non supporta questa funzionalit\xe0","Save chart as png":"Salva grafico come png","No data found":"Nessun dato trovato"}')},415:function(e){e.exports=JSON.parse('{"Save as image":"Guardar como imagen","Reset pan and zoom":"Restablecer panor\xe1mica y zoom","Save chart as svg":"Guardar gr\xe1fico como SVG","Unfortunately your browser does not support this feature":"Lamentablemente, su navegador no es compatible con esta funci\xf3n.","Save chart as png":"Guardar gr\xe1fico como png","No data found":"Datos no encontrados"}')},416:function(e){e.exports=JSON.parse('{"Save as image":"Zapisz jako obraz","Reset pan and zoom":"Zresetuj przesuwanie i powi\u0119kszanie","Save chart as svg":"Zapisz wykres jako SVG","Unfortunately your browser does not support this feature":"Niestety Twoja przegl\u0105darka nie obs\u0142uguje tej funkcji","Save chart as png":"Zapisz wykres jako png","No data found":"Nie znaleziono danych"}')},417:function(e){e.exports=JSON.parse('{"Save as image":"\u53e6\u5b58\u4e3a\u56fe\u7247","Reset pan and zoom":"\u91cd\u7f6e\u5e73\u79fb\u548c\u7f29\u653e","Save chart as svg":"\u5c06\u56fe\u8868\u53e6\u5b58\u4e3aSVG","Unfortunately your browser does not support this feature":"\u4e0d\u5e78\u7684\u662f\uff0c\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd","Save chart as png":"\u5c06\u56fe\u8868\u53e6\u5b58\u4e3apng","No data found":"\u6ca1\u6709\u627e\u5230\u6570\u636e"}')},421:function(e,t,o){"use strict";o.r(t);var a=o(4),n=o.n(a),i=o(84),s=o.n(i),r=o(456),c=o(465),l=o(464),h=(o(314),o(38)),u=o(35),d=o(148),f=o(156),g=o(48),p=o(280),m=o(476),v=o(288),y=o.n(v),b=o(461),x=o(191),w=o.n(x),S=o(289),k=o.n(S),D=o(88),T=o.n(D),I=o(198),C=o.n(I),O=o(290),M=o.n(O),R=o(237),z=o.n(R);o(353);function E(e){e=(e||"").toString().replace(/^\?/,"");var t={};return e.split("&").forEach((function(e){if(e=e.trim()){var o=e.split("="),a=decodeURIComponent(o[0]).trim();if(o.length>1)if(t[a]=decodeURIComponent(o[1]),"true"===t[a])t[a]=!0;else if("false"===t[a])t[a]=!1;else{var n=parseFloat(t[a]);n.toString()===t[a]&&(t[a]=n)}else t[a]=!0}})),t}function F(e){if(e.lines&&(e.l=e.lines,delete e.lines),e._ids){var t=e._ids?e._ids.split(";"):[],o=e._colors?e._colors.split(";"):[],a=e._names?e._names.split(";"):[],n=e._units?e._units.split(";"):[];e.l=[];for(var i=0;i<t.length;i++)e.l.push({id:t[i],offset:0,name:a[i]||"",aggregate:"onchange",color:o[i]||"blue",thickness:e.strokeWidth||1,shadowsize:e.strokeWidth||1,min:e.min||"",max:e.max||"",unit:n[i]||""});e.aggregateType="step",e.aggregateSpan=300,e.relativeEnd="now"}if(e.l)for(var s=0;s<e.l.length;s++)e.l[s].art&&(e.l[s].aggregate=e.l[s].art,delete e.l[s].art),e.instance&&!e.l[s].instance&&(e.l[s].instance=e.instance),e.l[s].yOffset=parseFloat(e.l[s].yOffset)||0,e.l[s].offset=parseFloat(e.l[s].offset)||0,e.l[s].validTime=parseFloat(e.l[s].validTime)||0,e.l[s].chartType=e.l[s].chartType||e.chartType||"auto";if(e.l=e.l||[],e.m){e.marks=[];for(var r=0;r<e.m.length;r++)e.marks[r]={lineId:e.m[r].l,upperValueOrId:e.m[r].v,lowerValueOrId:e.m[r].vl,color:e.m[r].c,fill:e.m[r].f,ol:e.m[r].t,os:e.m[r].s,text:e.m[r].d,textPosition:e.m[r].p,textOffset:e.m[r].py,textColor:e.m[r].fc,textSize:e.m[r].fs};delete e.m}return e.marks=e.marks||[],e.l.length||e.l.push({id:"",unit:""}),e.width=e.width||"100%",e.height=e.height||"100%",e.timeFormat=e.timeFormat||"",e.useComma="true"===e.useComma||!0===e.useComma,e.zoom="true"===e.zoom||!0===e.zoom,e.export="true"===e.export||!0===e.export,e.grid_hideX="true"===e.grid_hideX||!0===e.grid_hideX,e.grid_hideY="true"===e.grid_hideY||!0===e.grid_hideY,e.hoverDetail="true"===e.hoverDetail||!0===e.hoverDetail,e.noLoader="true"===e.noLoader||!0===e.noLoader,e.noedit="true"===e.noedit||!0===e.noedit,e.animation=parseInt(e.animation)||0,e.afterComma=void 0===e.afterComma?2:parseInt(e.afterComma,10),e.timeType=e.timeType||"relative",e}var N="notConnectedError",L=function(){function e(t,o,a){var n=this;Object(h.a)(this,e),a=Object.assign({updateTimeout:300},a||{}),this.socket=t,this.updateTimeout=a.updateTimeout||300,this.serverSide=a.serverSide||!1,this.seriesData=[],this.actualValues=[],this.ticks=null,this.liveInterval=null,this.reading=!1,this.navOptions={},this.subscribes=[],this.sessionId=1,this.updateInterval=null,this.presetSubscribed=!1,this.defaultHistory="",this.onUpdateFunc=null,this.onReadingFunc=null,this.onErrorFunc=null,this.objectPromises={},this.debug=!1,this.zoomData=null,this.serverSide||(this.lastHash=window.location.hash,o||(this.onHashInstalled=!0,this.onHashChangeBound=this.onHashChange.bind(this),window.addEventListener("hashchange",this.onHashChangeBound,!1)),this.onPresetUpdateBound=this.onPresetUpdate.bind(this)),this.onStateChangeBound=this.onStateChange.bind(this),this.socket.getSystemConfig().catch((function(e){return e===N&&n.onErrorFunc&&n.onErrorFunc(e),console.error("Cannot read systemConfig: "+e),null})).then((function(e){return n.systemConfig=e&&e.common?e.common:{},n.defaultHistory=n.systemConfig.defaultHistory,n.analyseAndLoadConfig(o)}))}return Object(u.a)(e,[{key:"analyseAndLoadConfig",value:function(e){var t=this;if(e)"string"===typeof e?this.preset=e:this.config=F(e);else if(!this.serverSide){var o=E(window.location.search);if(this.debug=!0===o.debug||"true"===o.debug||1===o.debug||"1"===o.debug,o.preset&&"string"===typeof o.preset)this.preset=o.preset;else{var a=E((window.location.hash||"").toString().replace(/^#/,""));if(a.data)try{a.data=JSON.parse(a.data)}catch(i){a.data={}}if(o.data)try{o.data=JSON.parse(o.data)}catch(i){o.data={}}if(a.preset)this.preset=a.preset,(a.range||a.relativeEnd)&&(this.hash={range:a.range,relativeEnd:a.relativeEnd});else{var n=Object.assign(o.data||{},a.data||{},!0);void 0!==a.noLoader&&(n.noLoader=!0===a.noLoader||"true"===a.noLoader||1===a.noLoader||"1"===a.noLoader),void 0!==o.noLoader&&(n.noLoader=!0===o.noLoader||"true"===o.noLoader||1===o.noLoader||"1"===o.noLoader),this.config=F(n)}}}this.seriesData=[],this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.preset?((this.preset.startsWith("echarts.")||this.preset.startsWith("flot."))&&this.preset.includes(".")||(this.preset="echarts.0."+this.preset),this.socket.getObject(this.preset).then((function(e){if(!e||!e.native||!e.native.data||"chart"!==e.type)return console.error("[ChartModel] Invalid object ".concat(t.preset,": ").concat(JSON.stringify(e)));t.config=F(e.native.data),t.config.useComma=void 0===t.config.useComma?!0===t.systemConfig.isFloatComma||"true"===t.systemConfig.isFloatComma:"true"===t.config.useComma||!0===t.config.useComma,t.config.lang=t.systemConfig.language,t.config.live=parseInt(t.config.live,10)||0,t.config.debug=t.debug,t.config.presetId=t.preset,t.hash&&t.hash.range&&(t.config.range=t.hash.range),t.hash&&t.hash.relativeEnd&&(t.config.relativeEnd=t.hash.relativeEnd),t.readData(),t.serverSide||t.presetSubscribed===t.preset||(t.presetSubscribed&&t.socket.unsubscribeObject(t.presetSubscribed,t.onPresetUpdateBound),t.presetSubscribed=t.preset,t.socket.subscribeObject(t.preset,t.onPresetUpdateBound)),t.serverSide||!t.config.live||t.zoomData&&t.zoomData.stopLive||(t.updateInterval=setInterval((function(){return t.readData()}),1e3*t.config.live))})).catch((function(e){e===N&&t.onErrorFunc&&t.onErrorFunc(e),console.error("Cannot read ".concat(t.preset,": ").concat(e))}))):(this.config.useComma=void 0===this.config.useComma?!0===this.systemConfig.isFloatComma||"true"===this.systemConfig.isFloatComma:"true"===this.config.useComma||!0===this.config.useComma,this.config.lang=this.systemConfig.language,this.config.live=parseInt(this.config.live,10)||0,this.config.debug=this.debug,this.readData(),this.serverSide||!this.config.live||this.zoomData&&this.zoomData.stopLive||(this.updateInterval=setInterval((function(){return t.readData()}),1e3*this.config.live)))}},{key:"onHashChange",value:function(){this.lastHash!==window.location.hash&&(this.lastHash=window.location.hash,this.analyseAndLoadConfig())}},{key:"onPresetUpdate",value:function(e,t){var o=this;e===this.preset&&(this.presetUpdateTimeout&&clearTimeout(this.presetUpdateTimeout),this.presetUpdateTimeout=setTimeout((function(){var e;o.presetUpdateTimeout=null,e=F(t?t.native.data:{}),JSON.stringify(e)!==JSON.stringify(o.config)&&(o.config=e,o.updateInterval&&clearInterval(o.updateInterval),o.updateInterval=null,!o.config.live||o.zoomData&&o.zoomData.stopLive||(o.updateInterval=setInterval((function(){return o.readData()}),1e3*o.config.live)),o.readData())}),100))}},{key:"setNewRange",value:function(e){var t=this;if(this.debug&&console.log("[ChartModel] [".concat((new Date).toISOString(),"] setNewRange: ").concat(JSON.stringify(e))),e)if(e.stopLive)this.zoomData=this.zoomData||{},this.zoomData.stopLive=!0,this.updateInterval&&(console.log("Clear interval"),clearInterval(this.updateInterval),this.updateInterval=null);else{var o=this.zoomData&&this.zoomData.stopLive;o&&delete this.zoomData.stopLive,this.zoomData&&JSON.stringify(this.zoomData)===JSON.stringify(e)?o&&(this.zoomData.stopLive=!0):(this.zoomData=e,o&&(this.zoomData.stopLive=!0),this.readOnZoomTimeout&&clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=setTimeout((function(){t.readOnZoomTimeout=null,t.readData()}),this.updateTimeout))}else this.zoomData&&(this.zoomData=null,this.readOnZoomTimeout&&clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=setTimeout((function(){t.readOnZoomTimeout=null,!t.config.live||t.zoomData&&t.zoomData.stopLive||(console.log("Restore update"),t.updateInterval&&clearInterval(t.updateInterval),t.updateInterval=setInterval((function(){return t.readData()}),1e3*t.config.live)),t.readData()}),this.updateTimeout))}},{key:"destroy",value:function(){var e=this;this.subscribed&&(!this.serverSide&&this.subscribes.forEach((function(t){return e.socket.unsubscribeState(t,e.onStateChangeBound)})),this.subscribes=[],this.subscribed=null),this.readOnZoomTimeout&&(clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=null),this.presetUpdateTimeout&&(clearTimeout(this.presetUpdateTimeout),this.presetUpdateTimeout=null),this.presetSubscribed&&(!this.serverSide&&this.socket.unsubscribeObject(this.presetSubscribed,this.onPresetUpdateBound),this.presetSubscribed=null),this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.serverSide||(this.onHashInstalled&&window.removeEventListener("hashchange",this.onHashChangeBound,!1),this.onHashInstalled=!1)}},{key:"onUpdate",value:function(e){this.onUpdateFunc=e}},{key:"onReading",value:function(e){this.onReadingFunc=e}},{key:"onError",value:function(e){this.onErrorFunc=e}},{key:"getConfig",value:function(){return this.config}},{key:"getSystemConfig",value:function(){return this.systemConfig}},{key:"setConfig",value:function(e){this.analyseAndLoadConfig(e)}},{key:"getStartStop",value:function(e,t){var o,a,n,i={};if(this.config.l[e].offset=this.config.l[e].offset||0,"string"===typeof this.config.range&&this.config.range.includes("m")&&this.config.l.length>1)for(var s=parseInt(this.config.range,10)||1,r=0;r<this.config.l.length;r++)if(this.config.l[r].offset&&0!==this.config.l[r].offset){n=this.addTime(this.now,this.config.l[0].offset);var c=new Date(n);c.setMonth(c.getMonth()-s),this.config.range=Math.floor((n-c.getTime())/6e4)+"";break}if(t)return this.zoomData?(a=this.zoomData.start,o=this.zoomData.end):a=(o=this.addTime(this.now,this.config.l[e].offset))-t,i={start:a,end:o,ignoreNull:void 0===this.config.l[e].ignoreNull?this.config.ignoreNull:this.config.l[e].ignoreNull,aggregate:this.config.l[e].aggregate||this.config.aggregate||"minmax",count:1,from:!1,ack:!1,q:!1,addID:!1},this.config.start=this.addTime(o,this.config.range,!1,!0),this.config.end=o,i;if(this.zoomData)a=this.zoomData.start,o=this.zoomData.end;else if("static"===this.config.timeType){var l,h;l=void 0!==this.config.start_time?this.config.start_time.split(":").map(Number):[0,0],h=void 0!==this.config.end_time?this.config.end_time.split(":").map(Number):[24,0],a=new Date(this.config.start).setHours(l[0],l[1]),o=new Date(this.config.end).setHours(h[0],h[1]),a=this.addTime(a,this.config.l[e].offset),o=this.addTime(o,this.config.l[e].offset)}else{if(this.config.relativeEnd=this.config.relativeEnd||"now","now"===this.config.relativeEnd)n=new Date(this.now);else if(this.config.relativeEnd.includes("minute")){var u=parseInt(this.config.relativeEnd,10)||1;(n=new Date(this.now)).setMinutes(Math.floor(n.getMinutes()/u)*u+u),n.setSeconds(0),n.setMilliseconds(0)}else if(this.config.relativeEnd.includes("hour")){var d=parseInt(this.config.relativeEnd,10)||1;(n=new Date(this.now)).setHours(Math.floor(n.getHours()/d)*d+d),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)}else"today"===this.config.relativeEnd?((n=new Date(this.now)).setDate(n.getDate()+1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"weekUsa"===this.config.relativeEnd?((n=new Date(this.now)).setDate(n.getDate()-n.getDay()+7),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"weekEurope"===this.config.relativeEnd?(0===(n=new Date(this.now)).getDay()?n.setDate(n.getDate()+1):n.setDate(n.getDate()-n.getDay()+8),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"week2Usa"===this.config.relativeEnd?((n=new Date(this.now)).setDate(n.getDate()-n.getDay()+7),n.setDate(n.getDate()-7),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"week2Europe"===this.config.relativeEnd?(0===(n=new Date(this.now)).getDay()?n.setDate(n.getDate()+1):n.setDate(n.getDate()-n.getDay()+8),n.setDate(n.getDate()-7),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"month"===this.config.relativeEnd?((n=new Date(this.now)).setMonth(n.getMonth()+1),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"year"===this.config.relativeEnd&&((n=new Date(this.now)).setFullYear(n.getFullYear()+1),n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0));this.config.range=this.config.range||"30m",o=this.addTime(n,this.config.l[e].offset),a=this.addTime(o,this.config.range,!1,!0)}return i={start:a,end:o,ignoreNull:void 0===this.config.l[e].ignoreNull?this.config.ignoreNull:this.config.l[e].ignoreNull,aggregate:this.config.l[e].aggregate||this.config.aggregate||"minmax",from:!1,ack:!1,q:!1,addID:!1},"step"===this.config.aggregateType?i.step=1e3*this.config.aggregateSpan:"count"===this.config.aggregateType&&(i.count=this.config.aggregateSpan||300),this.config.start=a,this.config.end=o,i}},{key:"readOneChart",value:function(e,t,o,a){var n=this,i=this.getStartStop(o);i.instance=t,i.sessionId=this.sessionId,this.debug&&console.log("[ChartModel] "+new Date(i.start)+" - "+new Date(i.end)),this.socket.getHistoryEx(e,i).then((function(e){if(n.sessionId&&e.sessionId&&e.sessionId!==n.sessionId)return console.warn("[ChartModel] Ignore request with sessionId=".concat(e.sessionId,", actual is ").concat(n.sessionId));if(e&&e.values){i.yOffset=n.config.l[o].yOffset;var t=e.values;n.seriesData[o]=[];for(var a=n.seriesData[o],s=0;s<t.length;s++){"true"===t[s].val||!0===t[s].val?t[s].val=1:"false"!==t[s].val&&!1!==t[s].val||(t[s].val=0),"string"===typeof t[s].val&&(t[s].val=parseFloat(t[s].val));var r={value:[t[s].ts,null!==t[s].val?t[s].val+i.yOffset:null]};t[s].i&&(r.exact=!1),a.push(r)}if(a.length){a[0].value[0]>i.start&&a.unshift({value:[i.start,null],exact:!1});var c=a[a.length-1];c.value[0]<i.end&&(n.config.l[o].validTime&&i.end-1e3*n.config.l[o].validTime<=c.value[0]?a.push({value:[i.end,c.value[1]],exact:!1}):a.push({value:[i.end,null],exact:!1}))}else a.push({value:[i.start,null],exact:!1}),a.push({value:[i.end,null],exact:!1});a.sort((function(e,t){return e.value[0]>t.value[0]?1:e.value[0]<t.value[0]?-1:0})),e.values=null,e=null}return Promise.resolve()})).catch((function(e){e===N&&n.onErrorFunc&&n.onErrorFunc(e),e&&console.error("[ChartModel] "+e)})).then((function(){return n.config.legActual?n.socket.getState(e).then((function(e){return n.actualValues[o]=e&&(e.val||0===e.val)?e.val:null})).catch((function(t){console.warn("Cannot read last value of ".concat(e,": ").concat(t)),n.actualValues[o]=null})).then((function(){n.serverSide||n.subscribes.includes(e)||(n.subscribes.push(e),n.subscribed=!0,n.socket.subscribeState(e,n.onStateChangeBound))})):Promise.resolve()})).then((function(){return a(e,o)}))}},{key:"_readObject",value:function(e){var t=this;return this.objectPromises[e]||(this.objectPromises[e]=this.socket.getObject(e).catch((function(o){return o===N&&t.onErrorFunc&&t.onErrorFunc(o),console.error("Cannot read ".concat(e,": ").concat(o)),null}))),this.objectPromises[e]}},{key:"_readOneLine",value:function(e,t){var o=this;return this._readObject(this.config.l[e].id).then((function(t){return t&&t.common&&(o.config.l[e].name=o.config.l[e].name||t.common.name,o.config.l[e].unit=o.config.l[e].unit||(t.common.unit?t.common.unit.replace("\ufffd","\xb0"):""),o.config.l[e].type=t.common.type,"auto"===o.config.l[e].chartType&&(o.config.l[e].chartType="boolean"===t.common.type?"steps":"line",o.config.l[e].aggregate="boolean"===t.common.type?"onchange":"minmax")),Promise.resolve()})).catch((function(t){return t===N&&o.onErrorFunc&&o.onErrorFunc(t),console.error("[ChartModel] Cannot read object ".concat(o.config.l[e].id,": ").concat(t)),Promise.resolve()})).then((function(){o.config.l[e].name=o.config.l[e].name||o.config.l[e].id,o.config.l[e].unit=o.config.l[e].unit||"","auto"===o.config.l[e].chartType&&(o.config.l[e].chartType="line",o.config.l[e].aggregate="minmax"),"object"===typeof o.config.l[e].name&&(o.config.l[e].name=o.config.l[e].name[o.systemConfig.language]||o.config.l[e].name.en),o.readOneChart(o.config.l[e].id,o.config.l[e].instance||o.defaultHistory,e,t)}))}},{key:"_readData",value:function(e,t){var o=this;if((t=t||0)>=this.config.l.length)return e();""!==this.config.l[t]&&void 0!==this.config.l[t]&&this.seriesData.push([]),this._readOneLine(t,(function(){return setTimeout((function(){return o._readData(e,t+1)}),10)}))}},{key:"readTicks",value:function(e){var t=this;if(this.config.ticks){var o=JSON.parse(JSON.stringify(this.getStartStop(0)));o.instance=this.config.l[0].instance||this.defaultHistory,o.sessionId=this.sessionId,o.aggregate="onchange",this.debug&&console.log("[ChartModel] Ticks: "+new Date(o.start)+" - "+new Date(o.end)),this.socket.getHistoryEx(this.config.ticks,o).then((function(e){if(t.sessionId&&e.sessionId&&e.sessionId!==t.sessionId)return console.warn("[ChartModel] Ignore request with sessionId=".concat(e.sessionId,", actual is ").concat(t.sessionId));if(e&&e.values){var a=t.ticks||[];t.ticks&&t.ticks.length&&t.ticks.splice(0,t.ticks.length);for(var n=e.values,i=0;i<n.length;i++)null!==n[i].val&&a.push({value:[n[i].ts,n[i].val]});a.length?(a[0][0]>o.start&&a.unshift({value:[o.start,""]}),a[a.length-1][0]<o.end&&a.push({value:[o.end,""]})):(a.push({value:[o.start,""]}),a.push({value:[o.end,""]})),e.values=null,e=null,t.ticks=a}return Promise.resolve()})).catch((function(e){e===N&&t.onErrorFunc&&t.onErrorFunc(e),console.error("[ChartModel] ".concat(e))})).then((function(){return e&&e(t.ticks)}))}else e(null)}},{key:"readValue",value:function(e,t,o){var a=this;this.socket.getState(e).then((function(e){o(t,e&&parseFloat(e.val)||0)})).catch((function(e){e===N&&a.onErrorFunc&&a.onErrorFunc(e),console.error("[ChartModel] ".concat(e)),o(t,0)}))}},{key:"readMarkings",value:function(e,t){var o=this;return t=t||0,!this.config.marks||!this.config.marks.length||t>=this.config.marks.length?e():new Promise((function(e){(o.config.marks[t].upperValueOrId||0===o.config.marks[t].upperValueOrId)&&parseFloat(o.config.marks[t].upperValueOrId).toString()!==o.config.marks[t].upperValueOrId.toString().replace(/\.0*$/,"")&&o.config.marks[t].upperValueOrId.toString().includes(".")?o.socket.getState(o.config.marks[t].upperValueOrId).then((function(a){a&&void 0!==a.val&&null!==a.val?o.config.marks[t].upperValue=parseFloat(a.val)||0:o.config.marks[t].upperValue=null,e()})).catch((function(a){a===N&&o.onErrorFunc&&o.onErrorFunc(a),console.error("Cannot read marking ".concat(o.config.marks[t].upperValueOrId,": ").concat(a)),e()})):e()})).then((function(){return new Promise((function(e){(o.config.marks[t].lowerValueOrId||0===o.config.marks[t].lowerValueOrId)&&parseFloat(o.config.marks[t].lowerValueOrId).toString()!==o.config.marks[t].lowerValueOrId.replace(/\.0*$/,"")&&o.config.marks[t].lowerValueOrId.includes(".")?o.socket.getState(o.config.marks[t].lowerValueOrId).then((function(a){a&&void 0!==a.val&&null!==a.val?o.config.marks[t].lowerValue=parseFloat(a.val)||0:o.config.marks[t].lowerValue=null,e()})).catch((function(a){a===N&&o.onErrorFunc&&o.onErrorFunc(a),console.error("Cannot read marking ".concat(o.config.marks[t].lowerValueOrId,": ").concat(a)),e()})):e()}))})).then((function(){return setTimeout((function(){return o.readMarkings(e,t+1)}),0)}))}},{key:"subscribeAll",value:function(e,t,o){var a=this;o=o||0,this.serverSide||!e||!e.length||o>=e.length?t():(this.socket.subscribeState(e[o],this.onStateChangeBound),setTimeout((function(){return a.subscribeAll(e,t,o+1)}),0))}},{key:"onStateChange",value:function(e,t){if(e&&t&&this.actualValues&&!this.reading){this.debug&&console.log("State update "+e+" - "+t.val);for(var o=!1,a=0;a<this.config.l.length;a++)if(this.config.l[a].id===e){this.actualValues[a]!==t.val&&(this.actualValues[a]=t.val,o=!0);break}o&&this.onUpdateFunc(null,this.actualValues)}}},{key:"addTime",value:function(e,t,o,a){return e=new Date(e),"string"===typeof t?"m"===t[1]?(t=parseInt(t,10),e.setMonth(o?e.getMonth()+t:e.getMonth()-t),e=e.getTime()):"y"===t[1]?(t=parseInt(t,10),e.setFullYear(o?e.getFullYear()+t:e.getFullYear()-t),e=e.getTime()):(e=e.getTime(),a?o?e+=6e4*(parseInt(t,10)||0):e-=6e4*(parseInt(t,10)||0):o?e+=1e3*(parseInt(t,10)||0):e-=1e3*(parseInt(t,10)||0)):(e=e.getTime(),a?o?e+=6e4*(parseInt(t,10)||0):e-=6e4*(parseInt(t,10)||0):o?e+=1e3*(parseInt(t,10)||0):e-=1e3*(parseInt(t,10)||0)),e}},{key:"readData",value:function(){var e=this;this.readOnZoomTimeout&&(clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=null),this.now=Date.now(),console.log("Read till "+new Date(this.now)),this.sessionId=this.sessionId||0,this.sessionId++,this.sessionId>16777215&&(this.sessionId=1),this.config.l?(this.reading=!0,this.onReadingFunc&&this.onReadingFunc(!0),this.seriesData=[],this._readData((function(){return e.readTicks((function(t){return e.readMarkings((function(){e.reading=!1,e.onUpdateFunc(e.seriesData,e.actualValues)}))}))}))):(this.onErrorFunc&&this.onErrorFunc("No config provided"),this.onReadingFunc&&this.onReadingFunc(!1),this.reading=!1)}}]),e}(),_=o(462),A=o(254),j=o(100),B=o.n(j),H=(o(355),o(356),o(357),o(358),o(359),o(360),o(361),o(362),o(363),o(364),o(291)),V=o.n(H),U=o(20),J=o(292),P=o(471),Y=o(472),W=o(458),X=o(466),G=o(459),Z=o(467),q=o(460),K=o(469),$=o(474),Q=o(475),ee=o(470),te=o(468),oe=o(473),ae={azul:["#f2385a","#f5a503","#4ad9d9","#f7879c","#c1d7a8","#4dffd2","#fccfd7","#d5f6f6"],"bee-inspired":["#001727","#805500","#ffff00","#ffd11a","#f2d71f","#f2be19","#f3a81a","#fff5cc"],blue:["#1790cf","#1bb2d8","#99d2dd","#88b0bb","#1c7099","#038cc4","#75abd0","#afd6dd"],infographic:["#C1232B","#27727B","#FCCE10","#E87C25","#B5C334","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"],vintage:["#d87c7c","#919e8b","#d7ab82","#6e7074","#61a0a8","#efa18d","#787464","#cc7e63","#724e58","#4b565b"],dark:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],macarons:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],shine:["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"],roma:["#E01F54","#001852","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9","#ff6347","#a092f1","#0a915d","#eaf889","#6699FF","#ff6666","#3cb371","#d5b158","#38b6b6"],royal:["#3f7ea6","#993366","#408000","#8c6f56","#a65149","#731f17","#adc2eb","#d9c3b0"],"dark-blue":["#00305a","#004b8d","#0074d9","#4192d9","#7abaf2","#99cce6","#d6ebf5","#eeeeee"],"tech-blue":["#4d4d4d","#3a5897","#007bb6","#7094db","#0080ff","#b3b3ff","#00bdec","#33ccff","#ccddff","#eeeeee"],red:["#d8361b","#f16b4c","#f7b4a9","#d26666","#99311c","#c42703","#d07e75"],"red-velvet":["#8b1a2d","#a7314b","#e6004c","#ff8066","#8e5c4e","#ff1a66","#d6c582","#f0d4af"],green:["#408829","#68a54a","#a9cba2","#86b379","#397b29","#8abb6f","#759c6a","#bfd3b7"],light:["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],gray:["#757575","#c7c7c7","#dadada","#8b8b8b","#b5b5b5","#e9e9e9"],"dark-bold":["#458c6b","#f2da87","#d9a86c","#d94436","#a62424","#76bc9b","#cce6da","#eeeeee"]};function ne(e){return e?(e=(e||"").toString()).length<2?"0"+e:e:"00"}function ie(e,t){var o=!1;e.includes("rgb")&&(e=function(e){var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);return t?"#"+ne(parseInt(t[1],10).toString(16))+ne(parseInt(t[2],10).toString(16))+ne(parseInt(t[3],10).toString(16)):e}(e)),"#"===e[0]&&(e=e.slice(1),o=!0);var a=parseInt(e,16),n=(a>>16)+t;n>255?n=255:n<0&&(n=0);var i=(a>>8&255)+t;i>255?i=255:i<0&&(i=0);var s=(255&a)+t;return s>255?s=255:s<0&&(s=0),(o?"#":"")+(s|i<<8|n<<16).toString(16)}var se=function(e){this.colorStops=e||[]};se.prototype={constructor:se,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}};var re=function(e,t,o,a,n,i){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==o?1:o,this.y2=null==a?0:a,this.type="linear",this.global=i||!1,se.call(this,n)};re.prototype={constructor:re},function(e,t){var o=e.prototype;function a(){}for(var n in a.prototype=t.prototype,e.prototype=new a,o)o.hasOwnProperty(n)&&(e.prototype[n]=o[n]);e.prototype.constructor=e,e.superClass=t}(re,se);var ce=function(){function e(t,o,a,n,i){if(Object(h.a)(this,e),this.moment=t,!this.moment)throw new Error("moment must be set and initialized");this.config=n?JSON.parse(JSON.stringify(n)):null,this.calcTextWidth=a,this.themeType=o||"light",this.chart={yAxis:[]},this.isTouch="undefined"!==typeof window&&"ontouchstart"in window.document.documentElement,this.compact=i,this.lastFormattedTime=null}return Object(u.a)(e,[{key:"setThemeName",value:function(e){this.themeType=e||"light"}},{key:"setConfig",value:function(e){this.config=e}},{key:"getHelperChartData",value:function(){return this.chart}},{key:"convertData",value:function(e,t,o){var a=e[t];if(!a||!a.length)return[];var n=this.chart.yAxis[o]||{max:null,min:null};this.chart.yAxis[o]=n;for(var i=0;i<a.length;i++)null!==a[i].value[1]&&((null===n.min||n.min>a[i].value[1])&&(n.min=a[i].value[1]),(null===n.max||n.max<a[i].value[1])&&(n.max=a[i].value[1]));return(null===this.chart.xMin||this.chart.xMin>a[0].value[0])&&(this.chart.xMin=a[0].value[0]),(null===this.chart.xMax||this.chart.xMax<a[a.length-1].value[0])&&(this.chart.xMax=a[a.length-1].value[0]),a}},{key:"getSeries",value:function(e,t){var o=this;this.chart.xMin=null,this.chart.xMax=null;var a=0;return this.config.l.map((function(n,i){var s=n.color||(ae[t]?ae[t][a%ae[t].length]:"");n.color||a++,n.shadowsize=parseFloat(n.shadowsize)||0,"false"===n.dashes?n.dashes=!1:"true"===n.dashes&&(n.dashes=!0);var r,c=""===n.commonYAxis||void 0===n.commonYAxis?i:parseInt(n.commonYAxis)||0,l={name:n.name,clip:!0,xAxisIndex:0,silent:!0,yAxisIndex:c,type:"scatterplot"===n.chartType?"scatter":"line",showSymbol:"scatterplot"===n.chartType||n.points,animation:!1,step:"steps"===n.chartType?"end":"stepsStart"===n.chartType?"start":void 0,smooth:"spline"===n.chartType,data:o.convertData(e,i,c),itemStyle:{color:s},symbolSize:"scatterplot"===n.chartType||n.points?n.symbolSize||3:void 0,symbol:"circle",emphasis:{scale:!1,focus:"none",blurScope:"none",lineStyle:{width:void 0!==n.thickness?parseFloat(n.thickness):1,shadowBlur:n.shadowsize?n.shadowsize+1:0,shadowOffsetY:n.shadowsize?n.shadowsize+1:0,shadowColor:s,type:n.dashes?"dashed":n.lineStyle||"solid"}},lineStyle:{width:void 0!==n.thickness?parseFloat(n.thickness):1,shadowBlur:n.shadowsize?n.shadowsize+1:0,shadowOffsetY:n.shadowsize?n.shadowsize+1:0,shadowColor:s,type:n.dashes?"dashed":n.lineStyle||"solid"}};parseFloat(n.fill)&&(r=o.isTouch?s:new re(0,0,0,1,[{offset:0,color:ie(s,30)},{offset:1,color:s}]),l.areaStyle={color:r,opacity:parseFloat(n.fill)||0});return l}))}},{key:"getXAxis",value:function(){var e=this;return[{type:"time",splitLine:{show:!this.config.grid_hideX,lineStyle:"off"===this.config.l[0].xaxe?{color:"rgba(0,0,0,0)",type:"dashed"}:this.config.grid_color?{color:this.config.grid_color,type:"dashed"}:{type:"dashed"}},splitNumber:parseInt(this.config.l[0].xticks,10)||void 0,position:"top"===this.config.l[0].xaxe?"top":"bottom",min:this.chart.xMin,max:this.chart.xMax,axisTick:{alignWithLabel:!0,lineStyle:"off"===this.config.l[0].xaxe?{color:"rgba(0,0,0,0)"}:this.config.x_ticks_color?{color:this.config.x_ticks_color}:void 0},axisLabel:{show:!this.compact,formatter:function(t,o){return e.xFormatter(t,o,"top"===e.config.l[0].xaxe)},fontSize:parseInt(this.config.x_labels_size,10)||12,color:"off"===this.config.l[0].xaxe?"rgba(0,0,0,0)":this.config.x_labels_color||void 0,rich:{a:{fontWeight:"bold"},b:{opacity:0}}}}]}},{key:"getYAxis",value:function(e,t){var o=this;return this.config.l.map((function(e,a){if(!e||""!==e.commonYAxis&&void 0!==e.commonYAxis)return{};var n=parseFloat(e.min),i=parseFloat(e.max),s=o.chart.yAxis;if(s[a]){var r=s[a].max-s[a].min;isNaN(n)&&(n=s[a].min-.1*r,r>25e3?n=1e4*Math.floor(n/1e4):r>5e3?n=1e3*Math.floor(n/1e3):r>200?n=100*Math.floor(n/100):r>30?n=10*Math.floor(n/10):r>10?n=Math.floor(n):r>1&&(n=Math.floor(10*n)/10)),isNaN(i)&&(i=s[a].max+.1*r,r>25e3?i=1e4*Math.ceil(i/1e4):r>5e3?i=1e3*Math.ceil(i/1e3):r>200?i=100*Math.ceil(i/100):r>30?i=10*Math.ceil(i/10):r>10?i=Math.ceil(i):r>1&&(i=Math.floor(10*i)/10))}else isNaN(n)&&(n=void 0),isNaN(i)&&(i=void 0);var c="off"===e.yaxe?"rgba(0,0,0,0)":o.config.grid_color||void 0;return"leftColor"!==e.yaxe&&"rightColor"!==e.yaxe||(c=t[a].itemStyle.color),{type:"value",min:n,max:i,position:"left"===e.yaxe||"off"===e.yaxe||"leftColor"===e.yaxe?"left":"right"===e.yaxe||"rightColor"===e.yaxe||a?"right":"left",splitLine:a?void 0:{show:!o.config.grid_hideY,lineStyle:{color:c||void 0,type:"dashed"}},splitNumber:parseInt(e.yticks,10)||void 0,axisLabel:{show:!o.compact,formatter:function(e){return o.yFormatter(e,a,!0)},color:"off"===e.yaxe||"leftColor"===e.yaxe||"rightColor"===e.yaxe?c:o.config.y_labels_color||void 0,fontSize:parseInt(o.config.y_labels_size,10)||12},axisTick:{alignWithLabel:!0,lineStyle:c?{color:c}:o.config.y_ticks_color?{color:o.config.y_ticks_color}:void 0}}}))}},{key:"getMarkings",value:function(e){var t=this;return this.config.marks&&this.config.marks.forEach((function(o){if(o){var a=void 0!==o.lowerValue?o.lowerValue:parseFloat(o.lowerValueOrId),n=void 0!==o.upperValue?o.upperValue:parseFloat(o.upperValueOrId),i=null!==a&&!isNaN(a),s=null!==n&&!isNaN(n),r=e.series[o.lineId];if(r){if(i&&s&&(r.markArea=r.markArea||{symbol:["none","none"],data:[]},r.markArea.data.push([{yAxis:a,name:o.text||"",itemStyle:{color:o.color||r.itemStyle.color,borderWidth:0,opacity:parseFloat(o.fill)||0}},{yAxis:n}])),i||s)for(var c=0;c<2;c++)if((c||s)&&(!c||i)){var l=c?a:n;if(r.markLine=r.markLine||{symbol:["none","none"],data:[]},r.markLine.data.push({yAxis:l,name:o.text,lineStyle:{color:o.color||r.itemStyle.color,width:parseFloat(o.ol)||1,shadowBlur:parseFloat(o.os)?parseFloat(o.os)+1:0,shadowOffsetY:parseFloat(o.os)?parseFloat(o.os)+1:0,shadowColor:o.color,type:o.lineStyle||"solid"},label:{show:!!o.text,formatter:function(e){return e.name},position:"r"===o.textPosition?"end":"start",distance:-1*o.textOffset||-35,textStyle:{color:o.textColor||"#FFF",fontStyle:"normal",fontSize:o.textSize||void 0}}}),t.config.l[o.lineId]){var h=parseFloat(t.config.l[o.lineId].min);isNaN(h)&&t.chart.yAxis[o.lineId]&&t.chart.yAxis[o.lineId].min>l&&l<0&&(e.yAxis[0].min=l);var u=parseFloat(t.config.l[o.lineId].min);isNaN(u)&&t.chart.yAxis[o.lineId]&&t.chart.yAxis[o.lineId].max<l&&(e.yAxis[0].max=l)}}}else console.error("Mark line has no chart line")}})),e}},{key:"yFormatter",value:function(e,t,o,a,n){if("boolean"===this.config.l[t].type)return e?"TRUE":"FALSE";if(null===e||void 0===e)return"";var i=this.config.l[t].afterComma;return void 0!==i&&null!==i?(e=parseFloat(e),this.config.useComma?e.toFixed(i).replace(".",",")+(o?this.config.l[t].unit:""):e.toFixed(i)+(o?this.config.l[t].unit:"")):(a&&(e=Math.round(1e4*e)/1e4),this.config.useComma?(e=parseFloat(e)||0).toString().replace(".",",")+(o?this.config.l[t].unit:""):e.toString()+(o?this.config.l[t].unit:""))}},{key:"isXLabelHasBreak",value:function(){return this.config.timeFormat?this.config.timeFormat.replace("<br/>","\n").includes("\n"):(this.chart.withSeconds||this.chart.withTime,!0)}},{key:"xFormatter",value:function(e,t,o){var a=new Date(e);if(this.config.timeFormat)return this.moment(a).format(this.config.timeFormat).replace("<br/>","\n");var n="",i=a.getDate();if(!this.chart.withSeconds&&!this.chart.withTime)return ne(i)+"."+ne(a.getMonth()+1)+"\n"+a.getFullYear();var s=!1;if(t<2||null===this.lastFormattedTime||e<this.lastFormattedTime?s=!0:s||new Date(this.lastFormattedTime).getDate()===i||(s=!0),s&&(n=o?"{a|"+ne(i)+"."+ne(a.getMonth()+1)+".}\n":"{b|..}\n{a|"+ne(i)+"."+ne(a.getMonth()+1)+".}"),this.lastFormattedTime=e,o){if(this.chart.withSeconds)return n+ne(a.getHours())+":"+ne(a.getMinutes())+":"+ne(a.getSeconds())+(n?"{b|..}":"");if(this.chart.withTime)return n+ne(a.getHours())+":"+ne(a.getMinutes())+(n?"{b|..}":"")}else{if(this.chart.withSeconds)return ne(a.getHours())+":"+ne(a.getMinutes())+":"+ne(a.getSeconds())+n;if(this.chart.withTime)return ne(a.getHours())+":"+ne(a.getMinutes())+n}}},{key:"getInterpolatedValue",value:function(e,t,o,a){var n=this.option.series[e].data;if(!n||!n[0]||n[0].value[0]>t||n[n.length-1].value[0]<t)return null;for(var i=0;i<n.length-1;i++){if(n[i].value[0]===t){var s={val:n[i].value[1]};return!1===n[i].exact&&(s.exact=!1),s}if(n[i].value[0]<t&&t<n[i+1].value[0]){var r=n[i].value[1],c=n[i+1].value[1];if(null===c||void 0===c||null===r||void 0===r)return a?null:{exact:!1,val:null};if("boolean"===o)return{exact:!1,val:r};var l=n[i+1].value[0]-n[i].value[0];return{exact:!1,val:(1-(n[i+1].value[0]-t)/l)*(c-r)+r}}}return a?null:{exact:!1,val:null}}},{key:"renderTooltip",value:function(e){var t=this,o=e[0].value[0],a=new Date(o),n=!0===this.config.hoverNoNulls||"true"===this.config.hoverNoNulls,i=this.option.series.map((function(a,i){var s,r=e.find((function(e){return e.seriesIndex===i}));if(r&&(s={exact:void 0===r.data.exact||r.data.exact,val:r.value[1]}),!(s=s||t.getInterpolatedValue(i,o,t.config.l[i].type,n)))return"";if(!s.exact&&t.config.hoverNoInterpolate)return"";var c=null===s.val?"null":t.yFormatter(s.val,i,!1,!s.exact,!0);return'<div style="width: 100%; display: inline-flex; justify-content: space-around; color: '.concat(a.itemStyle.color,'">')+'<div style="display: flex;margin-right: 4px">'.concat(a.name,":</div>")+'<div style="display: flex; flex-grow: 1"></div>'+'<div style="display: flex;">'.concat(s.exact?"":"i ","<b>").concat(c,"</b>").concat(null!==s.val?t.config.l[i].unit:"","</div>")+"</div>"})),s=this.config.timeFormat||"dd, MM Do YYYY, HH:mm:ss.SSS";return"<b>".concat(this.moment(a).format(s),"</b><br/>").concat(i.filter((function(e){return e})).join("<br/>"))}},{key:"getLegend",value:function(e){var t=this;if(this.config.legend&&"none"!==this.config.legend){var o={data:this.config.l.map((function(e){return e.name})),show:!0,left:"nw"===this.config.legend||"sw"===this.config.legend?this.chart.padLeft+1:void 0,right:"ne"===this.config.legend||"se"===this.config.legend?this.chart.padRight+1:void 0,top:"nw"===this.config.legend||"ne"===this.config.legend?this.chart.padTop+2:void 0,bottom:"sw"===this.config.legend||"se"===this.config.legend?this.chart.padBottom+2:void 0,backgroundColor:this.config.legBg||void 0,formatter:function(o,a){if(t.config.legActual&&e)for(var n=0;n<t.config.l.length;n++)if(t.config.l[n].name===o)return"".concat(o," [").concat(t.yFormatter(e[n],n,!0,!0,!0),"]");return o},textStyle:{color:this.config.legColor||("light"===this.themeType?"#000":"#FFF"),fontSize:this.config.legFontSize},orient:this.config.legendDirection||"horizontal",selected:{}};return this.config.l.forEach((function(e){return o.selected[e.name]=!0!==e.hide})),o}}},{key:"getTitle",value:function(){if(this.config&&this.config.title){var e={};return(this.config.titlePos||"top:35;left:65").split(";").forEach((function(t){var o=t.split(":");e[o[0].trim()]=parseInt(o[1].trim(),10)})),{text:this.config.title,textStyle:{fontSize:this.config.titleSize?parseInt(this.config.titleSize,10):20,color:this.config.titleColor||("light"===this.themeType?"#000":"#FFF")},textVerticalAlign:e.bottom?"bottom":"top",textAlign:50===e.left?"center":-5===e.right?"right":"left",top:35===e.top?5+this.chart.padTop:50===e.top?"50%":void 0,left:50===e.left?"50%":65===e.left?this.chart.padLeft:void 0,bottom:e.bottom?e.bottom>0?e.bottom+this.chart.padBottom-15:e.bottom:void 0,right:5===e.right?this.chart.padRight:void 0}}}},{key:"getOption",value:function(e,t,o){var a=this;t&&(this.config=JSON.parse(JSON.stringify(t)));var n=this.isTouch&&this.config.zoom,i=this.config.theme;i&&"default"!==i||(i="light"===this.themeType?"roma":"dark-bold"),this.debug=this.config&&this.config.debug,this.debug&&console.log("[ChartView ] [".concat((new Date).toISOString(),"] ").concat(JSON.stringify(this.config,null,2)));var s=this.getSeries(e,i);this.config.start&&(this.chart.xMax<this.config.end&&(this.chart.xMax=this.config.end),this.chart.xMin>this.config.start&&(this.chart.xMin=this.config.start)),this.chart.diff=this.chart.xMax-this.chart.xMin,this.chart.withTime=this.chart.diff<6048e5,this.chart.withSeconds=this.chart.diff<18e5,this.config.y_labels_size=parseInt(this.config.y_labels_size,10)||12,this.config.x_labels_size=parseInt(this.config.x_labels_size,10)||12,this.config.legFontSize=parseInt(this.config.legFontSize,10)||12;var r=this.getYAxis(i,s),c=this.getXAxis(),l={theme:i,backgroundColor:"transparent",animation:!this.config.noAnimation&&!this.config.noLoader,grid:{backgroundColor:this.config.bg_custom||"transparent",show:!!this.config.bg_custom,left:0,top:8,right:0,bottom:this.compact?4:this.isXLabelHasBreak()?40:24},tooltip:!this.compact&&this.config.hoverDetail?{trigger:"axis",formatter:function(e){return a.renderTooltip(e)},hoverAnimation:!0,axisPointer:{animation:!0}}:void 0,xAxis:c,yAxis:r,series:s,useCanvas:n};if(this.getMarkings(l),!this.compact){var h=0,u=0,d=0,f=0;s.forEach((function(e,t){var o=l.yAxis[e.yAxisIndex];if(!o){var n=a.config.l[e.yAxisIndex]?a.config.l[e.yAxisIndex].commonYAxis:void 0;if(void 0===n)return void console.log("Cannot find Y axis for line "+t);o=l.yAxis[n]}var i=a.yFormatter(o.min,t,!0),s=a.yFormatter(o.min||o.max!==o.min?o.max:.8,t,!0);"top"===c[0].position?f=a.isXLabelHasBreak()?40:24:"off"===c[0].position&&"bottom"!==c[0].position||(d=a.isXLabelHasBreak()?40:24);var r=o.position;if(!("off"===r||o.axisLabel&&"rgba(0,0,0,0)"===o.axisLabel.color)){var g=a.calcTextWidth(i,a.config.y_labels_size)+4,p=a.calcTextWidth(s,a.config.y_labels_size)+4;"right"!==r&&"rightColor"!==r?(g>h&&(h=g),p>h&&(h=p)):(g>u&&(u=g),p>u&&(u=p))}})),l.grid.left=h+10,l.grid.right=u+10+(!0===this.config.export||"true"===this.config.export?20:0),l.grid.right<=10&&(f||d)&&(l.grid.right=18),l.grid.left<=10&&(f||d)&&(l.grid.left=18),this.chart.padLeft=l.grid.left,this.chart.padRight=l.grid.right,f||(f=8),d||(d=8),l.grid.top=f,l.grid.bottom=d,this.chart.padTop=l.grid.top,this.chart.padBottom=l.grid.bottom}return l.legend=this.getLegend(o),l.title=this.getTitle(),this.config.grid_color||(l.yAxis.forEach((function(e){return e.splitLine&&delete e.splitLine.lineStyle})),l.xAxis.forEach((function(e){return e.splitLine&&delete e.splitLine.lineStyle}))),this.option=l,this.option}}]),e}(),le=(o(376),o(381),o(382),o(383),o(384),o(385),o(386),o(387),o(388),o(389),o(390),o(391),o(392),o(393),o(394),o(395),o(396),o(75));U.a([W.a,X.a,G.a,Z.a,q.a,K.a,$.a,Q.a,ee.a,W.a,P.a,Y.a,te.a,oe.a]);var he=null;function ue(e,t,o){var a=(he||(he=document.createElement("canvas"))).getContext("2d");a.font="".concat(t||12,"px ").concat(o||"Microsoft YaHei");var n=a.measureText(e);return Math.ceil(n.width)}String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String("undefined"!==typeof t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))});var de=function(e){Object(d.a)(o,e);var t=Object(f.a)(o);function o(e){var a;return Object(h.a)(this,o),(a=t.call(this,e)).updateProperties=function(e){if(a.updatePropertiesTimeout=null,a.echartsReact&&"function"===typeof a.echartsReact.getEchartsInstance){var t=a.echartsReact.getEchartsInstance(),o=e.config&&e.config.l&&e.config.l.map((function(e){return e.id}))||[];o.sort();var n=JSON.stringify(o)!==JSON.stringify(a.lastIds);n&&(a.lastIds=o,t.clear()),a.option=a.chartOption.getOption(e.data,e.config,e.actualValues),a.applySelected(),a.debug&&console.log("[ChartView ] [".concat((new Date).toISOString(),"] updateProperties: {min: ").concat(a.option.xAxis[0].min,", ").concat(a.option.xAxis[0].max,"}"));try{t.setOption(a.option,n)}catch(i){console.error("Cannot apply options: "+JSON.stringify(a.option))}}},a.onResize=function(){a.timerResize&&clearTimeout(a.timerResize),a.timerResize=setTimeout((function(){a.timerResize=null,a.componentDidUpdate()}))},a.onMouseMove=function(e){if(a.mouseDown){a.divResetButton.current&&"block"!==a.divResetButton.current.style.display&&(a.divResetButton.current.style.display="block");var t=a.chartOption.getHelperChartData();if(e.event.shiftKey){t.yMoved=!0;var o=t.lastY-(e.offsetY-t.padTop);t.lastY=e.offsetY-t.padTop;var n,i,s=a.state.chartHeight-t.padTop-t.padBottom;t._yAxis.forEach((function(e){i=e.max-e.min,n=o*i/s,e.min-=n,e.max-=n})),a.setNewYAxis(t._yAxis)}else{t.xMoved=!0;var r=t.lastX-(e.offsetX-t.padLeft);t.lastX=e.offsetX-t.padLeft;var c=t.xMax-t.xMin,l=a.state.chartWidth-t.padRight-t.padLeft,h=Math.round(r*c/l);t.xMin+=h,t.xMax+=h,a.setNewRange()}}},a.onMouseDown=function(e){a.mouseDown=!0;var t=a.chartOption.getHelperChartData();t.lastX=e.offsetX,t.lastY=e.offsetY,t.yMoved=!1,t.xMoved=!1,t._yAxis=JSON.parse(JSON.stringify(t.yAxis)),a.zr&&!a.zr._mousemove&&(a.zr._mousemove=!0,a.zr.on("mousemove",a.onMouseMove)),a.props.config.live&&a.props.onRangeChange&&(console.log("Stop update"),a.props.onRangeChange({stopLive:!0}))},a.onMouseUp=function(){a.mouseDown=!1,a.chartOption.getHelperChartData().xMoved&&a.setNewRange(!0),a.zr&&a.zr._mousemove&&(a.zr._mousemove=!1,a.zr.off("mousemove",a.onMouseMove))},a.onMouseWheel=function(e){var t=a.chartOption.getHelperChartData();if(e.event.shiftKey){var o=a.state.chartHeight-t.padBottom-t.padTop,n=(e.offsetY-t.padTop)/o,i=e.wheelDelta>0?1.1:.9,s=JSON.parse(JSON.stringify(t.yAxis));t.yAxis.forEach((function(e){var t=e.max-e.min,o=t-(t*=i);e.max+=o*(1-n),e.min-=o*n})),a.setNewYAxis(s)}else{var r=t.xMax-t.xMin,c=a.state.chartWidth-t.padRight-t.padLeft,l=(e.offsetX-t.padLeft)/c,h=r-(r*=e.wheelDelta>0?1.1:.9);t.xMax+=h*(1-l),t.xMin-=h*l,a.setNewRange(),a.updateDataTimer&&clearTimeout(a.updateDataTimer),a.updateDataTimer=setTimeout((function(){return a.setNewRange(!0)}),1e3)}},a.onTouchStart=function(e){a.mouseDown=!0;var t=e.touches||e.originalEvent.touches;if(t){e.preventDefault(),e.stopImmediatePropagation();var o=a.chartOption.getHelperChartData();o.lastX=t[t.length-1].pageX,t.length>1?o.lastWidth=Math.round(Math.abs(t[0].pageX-t[1].pageX)):o.lastWidth=null}},a.onTouchEnd=function(e){a.mouseDown&&(e.stopImmediatePropagation(),e.preventDefault(),a.mouseDown=!1,a.setNewRange(!0))},a.onTouchMove=function(e){var t=e.touches||e.originalEvent.touches;if(t){var o=a.chartOption.getHelperChartData(),n=t[t.length-1].pageX-o.padLeft;if(a.mouseDown)if(e.preventDefault(),e.stopImmediatePropagation(),a.divResetButton.current&&"block"!==a.divResetButton.current.style.display&&(a.divResetButton.current.style.display="block"),t.length>1){console.log("touch move: "+t.length);var i=Math.round(Math.abs(t[0].pageX-t[1].pageX));if(null!==o.lastWidth&&i!==o.lastWidth){var s=o.xMax-o.xMin,r=a.state.chartWidth-o.padRight-o.padLeft,c=i>o.lastWidth?1.05:.95,l=(t[0].pageX>t[1].pageX?t[1].pageX-o.padLeft+i/2:t[0].pageX-o.padLeft+i/2)/r,h=s-(s*=c);console.log("Move: ".concat(Math.round(h/1e3)," => ").concat(Math.round(h*l/1e3)," -- ").concat(Math.round(h*(1-l)/1e3))),o.xMax+=h*(1-l),o.xMin-=h*l,o.xMax=Math.round(o.xMax),o.xMin=Math.round(o.xMin),a.setNewRange()}o.lastWidth=i}else{var u=o.lastX-n,d=o.xMax-o.xMin,f=a.state.chartWidth-o.padRight-o.padLeft,g=Math.round(u*d/f);o.xMin+=g,o.xMax+=g,a.setNewRange()}o.lastX=n}},a.state={chartHeight:null,chartWidth:null,paddings:{top:0,left:0,right:0,bottom:0}},a.echartsReact=n.a.createRef(),a.divRef=n.a.createRef(),a.divResetButton=n.a.createRef(),a.selected=null,B.a.locale(T.a.getLanguage()),a.lastIds=a.props.config&&a.props.config.l&&a.props.config.l.map((function(e){return e.id}))||[],a.lastIds.sort(),a.chartOption=new ce(B.a,a.props.themeType,ue,void 0,a.props.compact),a}return Object(u.a)(o,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.data===this.state.data)return null;this.updatePropertiesTimeout&&clearTimeout(this.updatePropertiesTimeout),this.updatePropertiesTimeout=setTimeout(this.updateProperties,100,e)}},{key:"setNewRange",value:function(e){var t=this.chartOption.getHelperChartData();if(t.diff=t.xMax-t.xMin,t.withTime=t.diff<6048e5,t.withSeconds=t.diff<18e5,console.log("[ChartView ] [".concat((new Date).toISOString(),"] setNewRange: ").concat(!!e,", {min: ").concat(new Date(t.xMin),", max: ").concat(new Date(t.xMax),"}")),e)this.updateDataTimer&&clearTimeout(this.updateDataTimer),this.updateDataTimer=null,this.props.onRangeChange&&this.props.onRangeChange({start:t.xMin,end:t.xMax});else{console.log("[ChartView ] [".concat((new Date).toISOString(),"] setOption in setNewRange")),this.option.xAxis[0].min=t.xMin,this.option.xAxis[0].max=t.xMax;try{this.echartsReact&&"function"===typeof this.echartsReact.getEchartsInstance&&this.echartsReact.getEchartsInstance().setOption({xAxis:{min:t.xMin,max:t.xMax}})}catch(o){console.error("Cannot apply options 1: "+JSON.stringify(this.option))}}}},{key:"setNewYAxis",value:function(e){this.option.yAxis=e;try{this.echartsReact&&"function"===typeof this.echartsReact.getEchartsInstance&&this.echartsReact.getEchartsInstance().setOption({yAxis:e})}catch(t){console.error("Cannot apply options: "+JSON.stringify(this.option))}}},{key:"installEventHandlers",value:function(){this.zr=this.echartsReact&&this.echartsReact.getEchartsInstance&&this.echartsReact.getEchartsInstance().getZr();var e=this.divRef.current&&this.divRef.current.getElementsByClassName("echarts-for-react"),t=e&&e[0];this.zr&&this.props.config.zoom&&!this.zr._iobInstalled?(this.zr._iobInstalled=!0,this.option&&this.option.useCanvas?t&&(t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchmove",this.onTouchMove,!1)):(this.zr.on("mousedown",this.onMouseDown),this.zr.on("mouseup",this.onMouseUp),this.zr.on("mousewheel",this.onMouseWheel))):this.zr&&!this.props.config.zoom&&this.zr._iobInstalled&&(this.zr._iobInstalled=!1,this.option||!this.option.useCanvas?(this.zr.off("mousedown",this.onMouseDown),this.zr.off("mouseup",this.onMouseUp),this.zr.off("mousewheel",this.onMouseWheel),this.zr&&this.zr._mousemove&&(this.zr._mousemove=!1,this.zr.off("mousemove",this.onMouseMove))):t&&(t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchmove",this.onTouchMove,!1)))}},{key:"applySelected",value:function(){var e=this;this.selected&&this.option.legend&&Object.keys(this.selected).forEach((function(t){return e.option.legend.selected[t]=e.selected[t]}))}},{key:"renderChart",value:function(){var e=this;return this.props.data?(this.option=this.option||this.chartOption.getOption(this.props.data,this.props.config,this.props.actualValues),this.props.config.title?window.document.title=this.props.config.title:this.props.config.presetId&&(window.document.title=this.props.config.presetId),this.debug&&console.log("[ChartView ] [".concat((new Date).toISOString(),"] render chart")),this.applySelected(),Object(le.jsx)(V.a,{ref:function(t){return e.echartsReact=t},echarts:J,option:this.option,notMerge:!0,lazyUpdate:!0,theme:this.option.theme,style:{height:this.state.chartHeight+"px",width:"100%"},opts:this.option&&this.option.useCanvas?void 0:{renderer:"svg"},onEvents:{legendselectchanged:function(t){e.selected=JSON.parse(JSON.stringify(t.selected))},rendered:function(t){!e.props.compact&&e.props.config.zoom&&e.installEventHandlers()}}})):Object(le.jsx)(b.a,{})}},{key:"componentDidUpdate",value:function(){var e=this;if(this.divRef.current){var t="noborder"!==this.props.config.noBorder&&parseFloat(this.props.config.border_width)||0,o=parseFloat(this.props.config.border_padding)||0,a=this.divRef.current.offsetHeight-2*(t+o);if(this.state.chartHeight!==a){var n=this.divRef.current.offsetWidth-2*(t+o);setTimeout((function(){return e.setState({chartHeight:a,chartWidth:n})}),10)}}}},{key:"renderResetButton",value:function(){var e=this;return Object(le.jsx)(_.a,{ref:this.divResetButton,size:"small",color:"default",style:{display:"none"},className:this.props.classes.resetButton,title:T.a.t("Reset pan and zoom"),onClick:function(){e.divResetButton.current&&(e.divResetButton.current.style.display="none"),e.props.onRangeChange&&e.props.onRangeChange()},children:Object(le.jsx)(A.b,{className:this.props.classes.resetButtonIcon})})}},{key:"renderExportButton",value:function(){var e=this;return this.props.config.export?Object(le.jsx)(A.a,{color:this.props.config.exportColor||"default",className:this.props.classes.exportButton,title:this.option&&this.option.useCanvas?T.a.t("Save chart as png"):T.a.t("Save chart as svg"),onClick:function(){if(e.echartsReact&&"function"===typeof e.echartsReact.getEchartsInstance){var t=e.echartsReact.getEchartsInstance().getDataURL({pixelRatio:2,backgroundColor:e.props.config.window_bg||("dark"===e.props.themeType?"#000":"#FFF")});if(!e.option||!e.option.useCanvas)try{var o=t.split(","),a=decodeURIComponent(o[1]);a=(a=a.replace('fill="none"','fill="'+(e.props.config.window_bg||("dark"===e.props.themeType?"#000":"#FFF"))+'"')).replace('fill="transparent"','fill="'+(e.props.config.window_bg||("dark"===e.props.themeType?"#000":"#FFF"))+'"'),t=o[0]+","+encodeURIComponent(a)}catch(c){console.warn("cannot attach background: "+c)}var n=document.createElement("a");document.body.appendChild(n),n.href=t,n.target="_self";var i="";i=1===e.props.config.l.length?e.props.config.l[0].name:"chart";var s=e.option;if(s&&s.series&&s.series[0]&&s.series[0].data&&s.series[0].data.length){var r=new Date(s.xAxis[0].max||s.series[0].data[s.series[0].data.length-1].value[0]);try{n.download="".concat(r.getFullYear(),"_").concat((r.getMonth()+1).toString().padStart(2,"0"),"_").concat(r.getDate().toString().padStart(2,"0"))+"_".concat(r.getHours().toString().padStart(2,"0"),"_").concat(r.getMinutes().toString().padStart(2,"0"),"_").concat(i,".").concat(e.option&&e.option.useCanvas?"png":"svg"),n.click()}catch(c){console.error("Cannot access download: ".concat(c)),window.alert(T.a.t("Unfortunately your browser does not support this feature"))}}else window.alert(T.a.t("No data found"))}}}):null}},{key:"render",value:function(){var e=this;this.divRef.current||setTimeout((function(){return e.forceUpdate()}),10);var t="noborder"!==this.props.config.noBorder&&parseFloat(this.props.config.border_width)||0,o=parseFloat(this.props.config.border_padding)||0;return Object(le.jsxs)("div",{ref:this.divRef,className:this.props.classes.chart,style:{borderWidth:t,width:t||o?"calc(100% - ".concat(2*(t+o)+1,"px)"):void 0,height:t||o?"calc(100% - ".concat(2*(t+o),"px)"):void 0,background:this.props.config.noBackground?void 0:this.props.config.window_bg||void 0,borderColor:"noborder"!==this.props.config.noBorder&&this.props.config.border_color||void 0,borderStyle:"noborder"!==this.props.config.noBorder&&t?this.props.config.border_style||"solid":"hidden",padding:o||0},children:[this.renderExportButton(),this.renderResetButton(),null!==this.state.chartHeight?this.renderChart():null]})}}]),o}(n.a.Component),fe=Object(m.a)()(Object(g.a)((function(e){return{chart:{maxHeight:"100%",maxWidth:"100%",width:"100%",height:"100%",overflow:"hidden",position:"relative"},exportButton:{position:"absolute",top:40,right:5,width:20,height:20,zIndex:2,opacity:.7,cursor:"pointer"},resetButton:{position:"absolute",top:10,right:25,zIndex:2,opacity:.7},resetButtonIcon:{paddingTop:6}}}))(de)),ge=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var i;Object(h.a)(this,a),(i=t.call(this,e)).onReceiveMessage=function(e){if(e&&"chartReady"!==e.data)try{var t=JSON.parse(e.data);i.chartData?i.chartData.setConfig(t):i.createChartData(t)}catch(o){return console.log("Cannot parse "+e.data)}};var s=i.createTheme(),r=w.a.parseQuery(window.location.search),c=w.a.parseQuery((window.location.hash||"").replace(/^#/,""));i.state={connected:!1,seriesData:null,actualValues:null,noLoader:r.noLoader||c.noLoader||!1,theme:s,themeName:i.getThemeName(s),themeType:i.getThemeType(s),noBackground:r.noBG||c.noBG||!1,compact:r.compact||c.compact||!1},i.inEdit="1"===r.edit||1===r.edit||!0===r.edit||"true"===r.edit||"1"===c.edit||1===c.edit||!0===c.edit||"true"===c.edit,i.divRef=n.a.createRef(),i.progressRef=n.a.createRef(),i.progressShown=!0;var l={en:o(398),de:o(399),ru:o(400),pt:o(401),nl:o(402),fr:o(403),it:o(404),es:o(405),pl:o(406),"zh-cn":o(407)},u={en:o(408),de:o(409),ru:o(410),pt:o(411),nl:o(412),fr:o(413),it:o(414),es:o(415),pl:o(416),"zh-cn":o(417)};Object.keys(l).forEach((function(e){return l[e]=Object.assign(l[e],u[e])})),T.a.setTranslations(l);try{i.isIFrame=window.self!==window.top}catch(d){i.isIFrame=!0}return i.socket=new C.a({name:window.adapterName,onProgress:function(e){e===I.PROGRESS.CONNECTING?i.state.seriesData?(i.divRef.current&&(i.divRef.current.style.opacity=.5),i.progressRef.current&&(i.progressRef.current.style.display="block")):i.setState({connected:!1}):(I.PROGRESS.READY,i.setState({connected:!0}),i.restoreAfterReconnection())},onReady:function(e,t){T.a.setLanguage(i.socket.systemLang),i.socket.getSystemConfig().then((function(e){var t,o;if(i.systemLang=(null===e||void 0===e||null===(t=e.common)||void 0===t?void 0:t.language)||"en",i.isFloatComma=(null===e||void 0===e||null===(o=e.common)||void 0===o?void 0:o.isFloatComma)||!1,i.inEdit){if(window.addEventListener("message",i.onReceiveMessage),window.self!==window.parent)try{window.parent.postMessage("chartReady","*")}catch(d){console.warn("Cannot send ready event to parent window"),console.error(d)}}else i.createChartData()})).catch((function(e){e===I.ERRORS.NOT_CONNECTED?i.setState({connected:!1}):i.showError(T.a.t(e))}))},onError:function(e){console.error(e),i.showError(e)}}),i}return Object(u.a)(a,[{key:"restoreAfterReconnection",value:function(){this.divRef.current&&(this.divRef.current.style.opacity=1),this.progressRef.current&&!this.progressShown&&(this.progressRef.current.style.display="none"),this.state.seriesData&&!this.state.seriesData.find((function(e){return e.length}))&&this.chartData.setNewRange()}},{key:"createChartData",value:function(e){var t=this;this.chartData=new L(this.socket,e,{compact:this.state.compact}),this.chartData.onError((function(e){e===I.ERRORS.NOT_CONNECTED?(t.divRef.current&&(t.divRef.current.style.opacity=.5),t.progressRef.current&&(t.progressRef.current.style.display="block")):t.showError(T.a.t(e))})),this.chartData.onReading((function(e){return t.showProgress(e)})),this.chartData.onUpdate((function(e,o){var a={connected:!0,dataLoaded:!0};e&&(a.seriesData=e),o&&(a.actualValues=o),t.setState(a,(function(){return t.showProgress(!1)}))}))}},{key:"showProgress",value:function(e){this.progressShown=e,this.progressRef.current&&(this.progressRef.current.style.display=e?"block":"none")}},{key:"componentWillUnmount",value:function(){this.inEdit&&window.removeEventListener("message",this.onReceiveMessage,!1),this.chartData&&this.chartData.destroy()}},{key:"createTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return z()(w.a.getThemeName(e))}},{key:"getThemeName",value:function(e){return e.name}},{key:"getThemeType",value:function(e){return e.palette.type}},{key:"showError",value:function(e){this.setState({errorText:e})}},{key:"renderError",value:function(){var e=this;return this.state.errorText?Object(le.jsx)(M.a,{classes:{},text:this.state.errorText,onClose:function(){return e.setState({errorText:""})}}):null}},{key:"componentDidUpdate",value:function(e,t,o){!this.progressShown&&this.progressRef.current&&"none"!==this.progressRef.current.style.display&&(this.progressRef.current.style.display="none")}},{key:"render",value:function(){var e=this;if(!this.state.connected||!this.state.seriesData)return this.state.noLoader?null:Object(le.jsx)(r.a,{theme:this.state.theme,children:Object(le.jsx)(k.a,{theme:this.state.themeType})});var t=this.chartData.getConfig(),o=y()(JSON.stringify((t&&t.l&&t.l.map((function(e){return e.id}))||[]).sort())).toString();return this.state.seriesData&&t.debug&&console.log("seriesData: "+JSON.stringify(this.state.seriesData)),Object(le.jsx)(r.a,{theme:this.state.theme,children:Object(le.jsxs)("div",{ref:this.divRef,className:this.props.classes.root,style:{width:t.width,height:t.height,background:this.state.noBackground||t.noBackground?void 0:this.state.theme.palette.background.default,color:this.state.theme.palette.text.primary},children:[Object(le.jsx)(b.a,{ref:this.progressRef,style:{display:"block"},className:this.props.classes.progress}),Object(le.jsx)(fe,{socket:this.socket,t:T.a.t,noAnimation:this.state.noLoader,data:this.state.seriesData,actualValues:this.state.actualValues,config:t,compact:this.state.compact,lang:T.a.getLanguage(),themeType:this.state.themeType,onRangeChange:function(t){return e.chartData.setNewRange(t)}},o),this.renderError()]})})}}]),a}(a.Component),pe=Object(m.a)()(Object(g.a)((function(e){return{root:{width:"100%",height:"100%",position:"relative"},progress:{position:"absolute",top:0,left:0,right:0}}}))(Object(p.a)(ge)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=o(268);window.adapterName="echarts-show";var ve=w.a.getThemeName();console.log("iobroker."+window.adapterName+"@"+me.a+' using theme "'+ve+'"'),"localhost:3000"!==window.location.host&&c.a({dsn:"https://cf39325071144219aa91bb3510addcdf@sentry.iobroker.net/95",release:"iobroker."+window.adapterName+"@"+me.a,integrations:[new l.a],beforeSend:function(e,t){var o=!1;return e.exception&&e.exception.values&&e.exception.values[0]&&("NS_ERROR_FAILURE"===e.exception.values[0].type||e.exception.values[0].value&&(e.exception.values[0].value.includes("Microsoft YaHei")||"ResizeObserver loop completed with undelivered notifications."===e.exception.values[0].value||"undefined is not an object (evaluating 't.get')"===e.exception.values[0].value||"Cannot read property 'get' of undefined"===e.exception.values[0].value||"this.painter is null"===e.exception.values[0].value||e.exception.values[0].value.includes("ioBroker is not connected")||"Cannot read property 'getDisplayList' of null"===e.exception.values[0].value))&&(o=!0),o?null:e}}),function e(){return s.a.render(Object(le.jsx)(r.a,{theme:z()(ve),children:Object(le.jsx)(pe,{onThemeChange:function(t){ve=t,e()}})}),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[421,1,2]]]);
//# sourceMappingURL=main.f71cd337.chunk.js.map